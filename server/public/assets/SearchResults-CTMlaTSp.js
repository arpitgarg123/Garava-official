import{u as q,h as J,de as U,r as x,a as d,df as L,dg as I,dh as G,j as e,B as K,di as S,dj as O,bF as Q,bG as v,dk as W,dl as _,dm as V,dn as X,dp as Y,c$ as Z,dq as ee,dr as se}from"./index-CKwcYcCo.js";import{a as M}from"./index-CFYhMnPX.js";import{a as te,b as z,c as ae}from"./index-DWMn1eS0.js";import{P as re}from"./ProductCard-BcMQ8msZ.js";const le=t=>t.search.results,ne=t=>t.search.query,ie=t=>t.search.filters,ce=t=>t.search.suggestions,oe=t=>t.search.recentSearches,de=t=>t.search.popularSearches,xe=t=>t.search.results.status==="loading",he=t=>{const r=t.search.results.products;return Array.isArray(r)&&r.length>0},ge=(t,r)=>{const[m,l]=x.useState(null);return x.useCallback((...f)=>{m&&clearTimeout(m);const C=setTimeout(()=>{t(...f)},r);l(C)},[t,r,m])},be=()=>{const t=q();J();const[r,m]=U(),[l,u]=x.useState(""),[f,C]=x.useState(!1),[F,j]=x.useState(!1),[T,A]=x.useState("all"),n=d(le),c=d(ne),p=d(ie),E=d(ce),k=d(oe),P=d(de),h=d(xe),N=d(he);x.useEffect(()=>{console.log("Search Results:",n),console.log("Has Results:",N),console.log("Is Loading:",h)},[n,N,h]),x.useEffect(()=>{const s=r.get("q")||"",a=r.get("type")||"",i=r.get("category")||"",o=r.get("page")||"1";u(s),t(L(s)),(a||i)&&t(I({type:a,category:i,page:parseInt(o)})),a&&A(a),s.trim()&&y(s,{type:a,category:i,page:parseInt(o)})},[]);const B=ge((s,a={})=>{s.trim()&&t(ee({q:s,...p,...a}))},300),y=(s=l,a={})=>{const i=s.trim();if(!i)return;t(L(i)),t(G(i));const o=new URLSearchParams;o.set("q",i);const g={...p,...a};g.type&&o.set("type",g.type),g.category&&o.set("category",g.category),g.page&&g.page>1&&o.set("page",g.page.toString()),m(o),j(!1),B(i,a)},D=s=>{const a=s.target.value;u(a),j(!0),a.trim()&&t(se(a))},w=s=>{u(s),y(s)},H=s=>{u(s),y(s)},b=s=>{t(I(s)),c&&y(c,s)},R=s=>{A(s),b({type:s==="all"?"":s,page:1})},$=s=>{b({page:s}),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{className:"min-h-screen bg-gray-50  md:pt-32",children:[e.jsx("div",{className:" border-b border-gray-300 fixed top-26 md:top-32 left-0 right-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center gap-4 py-4",children:[e.jsx("div",{className:"sticky top-56 z-10 mb-3",children:e.jsx(K,{})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(S,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:l,onChange:D,onFocus:()=>j(!0),onKeyDown:s=>{s.key==="Enter"?y():s.key==="Escape"&&j(!1)},placeholder:"Search for jewelry, fragrance...",className:"block w-full pl-10 pr-12 py-3 outline-none border border-gray-300 rounded-xl  focus:border-transparent bg-white text-gray-900 placeholder-gray-500 transition-all duration-200"}),l&&e.jsx("button",{onClick:()=>{u(""),t(O()),m({})},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(M,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),e.jsx(Q,{children:F&&(l.length>0||k.length>0)&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute top-full mt-2 w-full bg-white rounded-xl border border-gray-200 shadow-xl z-50 overflow-hidden",children:[l.length>0&&E.items.length>0&&e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-500 px-3 py-2 flex items-center gap-2",children:[e.jsx(S,{className:"h-3 w-3"}),"Suggestions"]}),E.items.map((s,a)=>e.jsxs("button",{onClick:()=>w(s),className:"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors flex items-center gap-3",children:[e.jsx(te,{className:"h-4 w-4 text-gray-400"}),s]},a))]}),l.length===0&&k.length>0&&e.jsxs("div",{className:"p-2 border-t border-gray-100",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-500 px-3 py-2 flex items-center gap-2 justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-3 w-3"}),"Recent Searches"]}),e.jsx("button",{onClick:()=>t(W()),className:"text-xs text-red-500 hover:text-red-700",children:"Clear All"})]}),k.slice(0,5).map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>H(s),className:"flex-1 text-left px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors flex items-center gap-3",children:[e.jsx(z,{className:"h-4 w-4 text-gray-400"}),s]}),e.jsx("button",{onClick:()=>t(_(s)),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:e.jsx(M,{className:"h-4 w-4"})})]},a))]}),l.length===0&&e.jsxs("div",{className:"p-2 border-t border-gray-100",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-500 px-3 py-2 flex items-center gap-2",children:[e.jsx(ae,{className:"h-3 w-3"}),"Popular Searches"]}),P.slice(0,4).map((s,a)=>e.jsxs("button",{onClick:()=>w(s),className:"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors flex items-center gap-3",children:[e.jsx(V,{className:"h-4 w-4 text-gray-400"}),s]},a))]})]})})]}),e.jsx("button",{onClick:()=>C(!f),className:`p-3 rounded-xl border transition-all duration-200 ${f?"bg-black text-white border-black":"bg-white text-gray-700 border-gray-300 hover:border-gray-400"}`,children:e.jsx(X,{className:"h-5 w-5"})})]})})}),F&&e.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>j(!1)}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 mt-24 md:mt-28",children:[e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsx("div",{className:"bg-white rounded-xl p-1 border border-gray-200 shadow-sm",children:[{id:"all",label:"All Products"},{id:"jewellery",label:"Jewellery"},{id:"fragrance",label:"Fragrance"}].map(s=>e.jsx("button",{onClick:()=>R(s.id),className:`px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${T===s.id?"bg-black text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:s.label},s.id))})}),e.jsx(Q,{children:f&&e.jsxs(v.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"bg-white rounded-xl border border-gray-200 p-6 mb-6 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),e.jsx("button",{onClick:()=>t(Y()),className:"text-sm text-red-500 hover:text-red-700 font-medium",children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:p.priceMin,onChange:s=>b({priceMin:s.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent"}),e.jsx("input",{type:"number",placeholder:"Max",value:p.priceMax,onChange:s=>b({priceMax:s.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("select",{value:p.sort,onChange:s=>b({sort:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent bg-white",children:[e.jsx("option",{value:"relevance",children:"Relevance"}),e.jsx("option",{value:"price-asc",children:"Price: Low to High"}),e.jsx("option",{value:"price-desc",children:"Price: High to Low"}),e.jsx("option",{value:"newest",children:"Newest First"})]})]}),T==="jewellery"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:p.category,onChange:s=>b({category:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent bg-white",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"rings",children:"Rings"}),e.jsx("option",{value:"earrings",children:"Earrings"}),e.jsx("option",{value:"pendants",children:"Pendants"}),e.jsx("option",{value:"bracelets",children:"Bracelets"}),e.jsx("option",{value:"chains",children:"Chains"})]})]})]})]})}),c&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Search Results"}),e.jsx("p",{className:"text-gray-600 mt-1",children:h?"Searching...":`${n.total||0} results found for "${c}"`})]})})}),n.error&&e.jsxs("div",{className:"text-center py-10",children:[e.jsxs("div",{className:"text-red-500 mb-2",children:["Error: ",n.error]}),e.jsx("button",{onClick:()=>y(c),className:"text-blue-500 hover:text-blue-700",children:"Try Again"})]}),!1,h&&e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black"})}),!h&&N&&e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:n.products.map((s,a)=>e.jsx(re,{product:s},s._id||s.id||a))}),n.totalPages>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx(Z,{currentPage:n.page,totalPages:n.totalPages,onPageChange:$})})]}),!h&&c&&!N&&e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center py-20",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(S,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No results found"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:[`We couldn't find any products matching "`,c,'". Try different keywords or browse our categories.']}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Try searching for:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:P.slice(0,4).map((s,a)=>e.jsx("button",{onClick:()=>w(s),className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full hover:bg-gray-200 transition-colors",children:s},a))})]})]})}),!c&&!h&&e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center py-20",children:e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsx(S,{className:"h-20 w-20 text-gray-300 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Discover Amazing Products"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Search through our collection of premium jewelry and fragrances"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Popular Searches"}),e.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:P.map((s,a)=>e.jsx("button",{onClick:()=>w(s),className:"px-4 py-2 bg-white border border-gray-200 text-gray-700 rounded-xl hover:border-gray-300 hover:shadow-sm transition-all duration-200",children:s},a))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>R("jewellery"),className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl border border-yellow-200 hover:shadow-md transition-all duration-200 group",children:[e.jsx("div",{className:"text-2xl mb-2",children:"💎"}),e.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-yellow-800",children:"Jewellery"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Rings, Earrings, Pendants"})]}),e.jsxs("button",{onClick:()=>R("fragrance"),className:"p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 hover:shadow-md transition-all duration-200 group",children:[e.jsx("div",{className:"text-2xl mb-2",children:"🌸"}),e.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-purple-800",children:"Fragrance"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Premium Perfumes"})]})]})]})})]})]})};export{be as default};
