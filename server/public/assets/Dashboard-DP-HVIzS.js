import{u as pe,a as ne,r as W,j as e,a3 as ye,a4 as Rt,a5 as fn,a6 as hn,a7 as De,a8 as mn,a9 as pn,aa as gn,ab as xn,ac as Sr,ad as Er,ae as vt,af as Tr,ag as yn,ah as vn,ai as bn,aj as jn,ak as We,al as Te,am as Le,an as Nn,ao as It,ap as wn,aq as _n,ar as kn,as as Cr,at as Ot,au as bt,av as Ke,aw as St,ax as An,ay as rt,az as On,aA as Pr,aB as Dr,aC as Lr,aD as Sn,aE as En,aF as Tn,aG as $e,aH as Cn,aI as Rr,aJ as Pn,aK as Dn,aL as Ln,aM as Rn,aN as In,aO as qn,aP as Et,aQ as qt,aR as Mn,aS as He,aT as Fn,aU as Ir,aV as Bn,aW as $n,aX as ut,aY as Tt,aZ as Ye,a_ as Un,a$ as zn,b0 as Hn,b1 as Kn,b2 as Vn,b3 as Gn,b4 as Ce,b5 as Wn,b6 as be,b7 as ft,b8 as Zn,b9 as Qn,ba as Mt,bb as xe,bc as Yn,bd as Xn,be as nt,bf as qr,bg as Mr,bh as Fr,bi as Br,bj as $r,bk as Ur,bl as Jn,bm as es,bn as Ve,bo as Ft,bp as zr,bq as Hr,br as ts,bs as rs,bt as ns,bu as ss,bv as Bt,bw as as,bx as Kr,by as is,bz as ls,bA as ht,bB as Qe,bC as os,bD as Vr,bE as cs,bF as ds,bG as us,bH as $t,bI as fs,bJ as hs,bK as Gr,bL as Ct,bM as ms,bN as ps,bO as gs,bP as xs,bQ as ys,bR as vs,bS as bs,bT as Ut,bU as zt,bV as js,bW as Ns,bX as ws,bY as _s,bZ as ks,b_ as As,b$ as Os,c0 as Ss,c1 as Es,c2 as Ts,c3 as Cs,c4 as Ps,c5 as Ds,c6 as Oe,c7 as Ls,q as de,c8 as Rs,c9 as Is,ca as mt,cb as Wr,cc as Ae,cd as qs,ce as jt,cf as Ms,cg as Fs,ch as Bs,ci as Ht,cj as $s,ck as Us,cl as zs,cm as Hs,cn as Ks,co as Vs,cp as Gs,G as Ws,cq as Zs,cr as Kt,cs as ke,ct as Pe,cu as Vt,cv as Gt,cw as Qs,cx as Ys,cy as Xs,cz as Js,cA as ea,cB as ta,cC as Ee,cD as ra,cE as na,h as sa,cF as aa,cG as Wt,cH as Zt,cI as ia,cJ as la,cK as oa,cL as ca,cM as da,L as ua,cN as fa,cO as Qt,cP as Yt,cQ as ha,cR as ma}from"./index-CKwcYcCo.js";import{R as Ge}from"./index-DWMn1eS0.js";import{f as me}from"./pricing-Cv4rcUXx.js";const pa=({isOpen:j,onClose:A,product:s=null})=>{const l=pe(),{operationLoading:h,operationError:N}=ne(p=>p.productAdmin),_=!!s,[v,y]=W.useState({name:"",slug:"",type:"fragrance",category:"",subcategory:"",tags:[],shortDescription:"",description:"",fragranceNotes:{top:[],middle:[],base:[]},ingredients:"",caution:"",storage:"",dimensions:"",material:"",careInstructions:"",variants:[{sku:"",sizeLabel:"",price:"",mrp:"",stock:0,weight:"",isPriceOnDemand:!1,isDefault:!0,isActive:!0}],badges:[],isFeatured:!1,status:"draft",isActive:!0,metaTitle:"",metaDescription:"",collections:[]}),[w,f]=W.useState(null),[d,t]=W.useState([]),[n,i]=W.useState(""),[c,u]=W.useState([]);W.useEffect(()=>{var p;_&&s&&(y({name:s.name||"",slug:s.slug||"",type:s.type||"fragrance",category:s.category||"",subcategory:s.subcategory||"",tags:s.tags||[],shortDescription:s.shortDescription||"",description:s.description||"",fragranceNotes:s.fragranceNotes||{top:[],middle:[],base:[]},ingredients:s.ingredients||"",caution:s.caution||"",storage:s.storage||"",dimensions:s.dimensions||"",material:s.material||"",careInstructions:s.careInstructions||"",variants:s.variants&&s.variants.length>0?s.variants:[{sku:"",sizeLabel:"",price:"",mrp:"",stock:0,weight:"",isDefault:!0,isActive:!0}],badges:s.badges||[],isFeatured:s.isFeatured||!1,status:s.status||"draft",isActive:s.isActive!==void 0?s.isActive:!0,metaTitle:s.metaTitle||"",metaDescription:s.metaDescription||"",collections:s.collections||[]}),(p=s.heroImage)!=null&&p.url&&i(s.heroImage.url),s.gallery&&s.gallery.length>0&&u(s.gallery.map(m=>m.url)))},[_,s]),W.useEffect(()=>{if(!_&&v.name){const p=v.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();y(m=>({...m,slug:p}))}},[v.name,_]);const o=p=>{const{name:m,value:k,type:E,checked:P}=p.target;y(D=>({...D,[m]:E==="checkbox"?P:k}))},a=(p,m)=>{y(k=>{const E={...k},P=p.split(".");let D=E;for(let B=0;B<P.length-1;B++)D=D[P[B]];return D[P[P.length-1]]=m,E})},g=(p,m)=>{const k=m.split(",").map(E=>E.trim()).filter(Boolean);y(E=>({...E,[p]:k}))},r=(p,m,k)=>{y(E=>({...E,variants:E.variants.map((P,D)=>D===p?{...P,[m]:k}:P)}))},x=()=>{y(p=>({...p,variants:[...p.variants,{sku:"",sizeLabel:"",price:"",mrp:"",stock:0,weight:"",isPriceOnDemand:!1,isDefault:!1,isActive:!0}]}))},S=p=>{v.variants.length>1&&y(m=>({...m,variants:m.variants.filter((k,E)=>E!==p)}))},b=p=>{const m=p.target.files[0];if(m){f(m);const k=new FileReader;k.onload=E=>i(E.target.result),k.readAsDataURL(m)}},O=p=>{const m=Array.from(p.target.files);t(m);const k=[];m.forEach(E=>{const P=new FileReader;P.onload=D=>{k.push(D.target.result),k.length===m.length&&u(k)},P.readAsDataURL(E)})},C=async p=>{p.preventDefault();try{let m={...v};m.variants=m.variants.map(E=>({...E,price:parseFloat(E.price)||0,mrp:E.mrp?parseFloat(E.mrp):void 0,stock:parseInt(E.stock)||0,weight:E.weight?parseFloat(E.weight):void 0})),(w||d.length>0)&&(m=mn({...m,heroImage:w||(_?s.heroImage:void 0),gallery:d.length>0?d:_?s.gallery:[]})),_?await l(pn({productId:s._id,productData:m})).unwrap():await l(gn(m)).unwrap(),A()}catch(m){console.error("Failed to save product:",m)}};return j?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:_?"Edit Product":"Create New Product"}),e.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ye,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:N}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:v.name,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),e.jsx("input",{type:"text",name:"slug",value:v.slug,onChange:o,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{name:"type",value:v.type,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"fragrance",children:"Fragrance"}),e.jsx("option",{value:"jewellery",children:"Jewellery"}),e.jsx("option",{value:"high_jewellery",children:"High Jewellery"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsx("input",{type:"text",name:"category",value:v.category,onChange:o,required:!0,placeholder:"e.g., Perfume, Ring, etc.",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategory"}),e.jsx("input",{type:"text",name:"subcategory",value:v.subcategory,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:v.status,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),e.jsx("input",{type:"text",value:v.tags.join(", "),onChange:p=>g("tags",p.target.value),placeholder:"luxury, premium, limited edition",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Images"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hero Image"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:n?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:n,alt:"Hero preview",className:"w-full h-32 object-cover rounded"}),e.jsx("button",{type:"button",onClick:()=>{f(null),i("")},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:e.jsx(Rt,{className:"h-4 w-4"})})]}):e.jsxs("label",{className:"cursor-pointer flex flex-col items-center",children:[e.jsx(fn,{className:"h-8 w-8 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Upload hero image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gallery Images"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:c.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-2",children:c.map((p,m)=>e.jsx("img",{src:p,alt:`Gallery ${m}`,className:"w-full h-20 object-cover rounded"},m))}):e.jsxs("label",{className:"cursor-pointer flex flex-col items-center",children:[e.jsx(hn,{className:"h-8 w-8 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Upload gallery images"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:O,className:"hidden"})]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Variants"}),e.jsxs("button",{type:"button",onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(De,{className:"h-4 w-4"}),"Add Variant"]})]}),v.variants.map((p,m)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-medium",children:["Variant ",m+1]}),v.variants.length>1&&e.jsx("button",{type:"button",onClick:()=>S(m),className:"text-red-600 hover:text-red-800",children:e.jsx(Rt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),e.jsx("input",{type:"text",value:p.sku,onChange:k=>r(m,"sku",k.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size Label *"}),e.jsx("input",{type:"text",value:p.sizeLabel,onChange:k=>r(m,"sizeLabel",k.target.value),required:!0,placeholder:"e.g., 50ml, Large",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Price (₹) ",!p.isPriceOnDemand&&"*"]}),e.jsx("input",{type:"number",step:"0.01",value:p.price,onChange:k=>r(m,"price",k.target.value),required:!p.isPriceOnDemand,disabled:p.isPriceOnDemand,placeholder:p.isPriceOnDemand?"Price will be on demand":"",className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${p.isPriceOnDemand?"bg-gray-100 text-gray-500":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MRP (₹)"}),e.jsx("input",{type:"number",step:"0.01",value:p.mrp,onChange:k=>r(m,"mrp",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),e.jsx("input",{type:"number",value:p.stock,onChange:k=>r(m,"stock",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (grams)"}),e.jsx("input",{type:"number",step:"0.1",value:p.weight,onChange:k=>r(m,"weight",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:p.isDefault,onChange:k=>{k.target.checked&&y(E=>({...E,variants:E.variants.map((P,D)=>({...P,isDefault:D===m}))}))},className:"mr-2"}),"Default Variant"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:p.isActive,onChange:k=>r(m,"isActive",k.target.checked),className:"mr-2"}),"Active"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:p.isPriceOnDemand,onChange:k=>r(m,"isPriceOnDemand",k.target.checked),className:"mr-2"}),"Price on Demand"]})]})]},m))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Descriptions"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),e.jsx("textarea",{name:"shortDescription",value:v.shortDescription,onChange:o,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Description"}),e.jsx("textarea",{name:"description",value:v.description,onChange:o,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),v.type==="fragrance"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Fragrance Notes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Top Notes (comma-separated)"}),e.jsx("input",{type:"text",value:v.fragranceNotes.top.join(", "),onChange:p=>a("fragranceNotes.top",p.target.value.split(",").map(m=>m.trim()).filter(Boolean)),placeholder:"Bergamot, Lemon, Orange",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Middle Notes (comma-separated)"}),e.jsx("input",{type:"text",value:v.fragranceNotes.middle.join(", "),onChange:p=>a("fragranceNotes.middle",p.target.value.split(",").map(m=>m.trim()).filter(Boolean)),placeholder:"Rose, Jasmine, Lavender",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Notes (comma-separated)"}),e.jsx("input",{type:"text",value:v.fragranceNotes.base.join(", "),onChange:p=>a("fragranceNotes.base",p.target.value.split(",").map(m=>m.trim()).filter(Boolean)),placeholder:"Sandalwood, Musk, Vanilla",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ingredients"}),e.jsx("textarea",{name:"ingredients",value:v.ingredients,onChange:o,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caution"}),e.jsx("textarea",{name:"caution",value:v.caution,onChange:o,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Instructions"}),e.jsx("textarea",{name:"storage",value:v.storage,onChange:o,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),v.type==="jewellery"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Jewellery Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dimensions"}),e.jsx("input",{type:"text",name:"dimensions",value:v.dimensions,onChange:o,placeholder:"18 x 12 mm",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material"}),e.jsx("input",{type:"text",name:"material",value:v.material,onChange:o,placeholder:"925 Sterling Silver",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Care Instructions"}),e.jsx("textarea",{name:"careInstructions",value:v.careInstructions,onChange:o,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"SEO & Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Title"}),e.jsx("input",{type:"text",name:"metaTitle",value:v.metaTitle,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Collections (comma-separated)"}),e.jsx("input",{type:"text",value:v.collections.join(", "),onChange:p=>g("collections",p.target.value),placeholder:"Summer Collection, Premium Line",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Description"}),e.jsx("textarea",{name:"metaDescription",value:v.metaDescription,onChange:o,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isFeatured",checked:v.isFeatured,onChange:o,className:"mr-2"}),"Featured Product"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:v.isActive,onChange:o,className:"mr-2"}),"Active"]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:A,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:h?"Saving...":_?"Update Product":"Create Product"})]})]})]})}):null},ga=({isOpen:j,onClose:A,product:s})=>{var _;if(!j||!s)return null;const l=v=>({published:"bg-green-100 text-green-800 border-green-200",draft:"bg-yellow-100 text-yellow-800 border-yellow-200",archived:"bg-red-100 text-red-800 border-red-200",in_stock:"bg-green-100 text-green-800 border-green-200",out_of_stock:"bg-red-100 text-red-800 border-red-200",low_stock:"bg-yellow-100 text-yellow-800 border-yellow-200"})[v]||"bg-gray-100 text-gray-800 border-gray-200",h=v=>v===0?"out_of_stock":v<10?"low_stock":"in_stock",N=()=>s.variants?s.variants.reduce((v,y)=>v+(y.stock||0),0):0;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Product Details"}),e.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ye,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Images"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Hero Image"}),(_=s.heroImage)!=null&&_.url?e.jsx("img",{src:s.heroImage.url,alt:s.name,className:"w-full h-64 object-cover rounded-lg border"}):e.jsx("div",{className:"w-full h-64 bg-gray-100 rounded-lg border flex items-center justify-center",children:e.jsx(xn,{className:"h-16 w-16 text-gray-400"})})]}),s.gallery&&s.gallery.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Gallery (",s.gallery.length," images)"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:s.gallery.map((v,y)=>e.jsx("img",{src:v.url,alt:`Gallery ${y+1}`,className:"w-full h-20 object-cover rounded border"},y))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Product Name"}),e.jsx("p",{className:"font-medium text-lg",children:s.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Slug"}),e.jsx("p",{className:"text-gray-900",children:s.slug})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Type"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Sr,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"capitalize",children:s.type})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Category"}),e.jsx("p",{className:"text-gray-900",children:s.category})]})]}),s.subcategory&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Subcategory"}),e.jsx("p",{className:"text-gray-900",children:s.subcategory})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${l(s.status)}`,children:[e.jsx(Er,{className:"h-3 w-3 mr-1"}),s.status]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Stock"}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${l(h(N()))}`,children:[e.jsx(vt,{className:"h-3 w-3 mr-1"}),N()]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rating"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Tr,{className:"h-4 w-4 text-yellow-400 mr-1"}),e.jsxs("span",{className:"text-gray-900",children:[s.avgRating||0," (",s.reviewCount||0," reviews)"]})]})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((v,y)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:v},y))})]}),e.jsxs("div",{className:"flex gap-4",children:[s.isFeatured&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded font-medium",children:"Featured"}),s.isActive&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded font-medium",children:"Active"})]})]})]})]}),s.variants&&s.variants.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-medium mb-4",children:["Variants (",s.variants.length,")"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Size"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"MRP"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Weight"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.variants.map((v,y)=>e.jsxs("tr",{className:v.isDefault?"bg-blue-50":"bg-white",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[v.sku,v.isDefault&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded font-medium",children:"Default"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:v.sizeLabel}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:me(v.price)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:v.mrp?me(v.mrp):"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l(h(v.stock))}`,children:v.stock||0})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:v.weight?`${v.weight}g`:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.isActive?"Active":"Inactive"})})]},y))})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Descriptions"}),e.jsxs("div",{className:"space-y-4",children:[s.shortDescription&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Short Description"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded",children:s.shortDescription})]}),s.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Full Description"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded whitespace-pre-wrap",children:s.description})]})]})]}),s.type==="fragrance"&&s.fragranceNotes&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Fragrance Notes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.fragranceNotes.top&&s.fragranceNotes.top.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Top Notes"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.fragranceNotes.top.map((v,y)=>e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:v},y))})]}),s.fragranceNotes.middle&&s.fragranceNotes.middle.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Middle Notes"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.fragranceNotes.middle.map((v,y)=>e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:v},y))})]}),s.fragranceNotes.base&&s.fragranceNotes.base.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Base Notes"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.fragranceNotes.base.map((v,y)=>e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:v},y))})]})]}),(s.ingredients||s.caution||s.storage)&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.ingredients&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Ingredients"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded text-sm",children:s.ingredients})]}),s.caution&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Caution"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded text-sm",children:s.caution})]}),s.storage&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Storage"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded text-sm",children:s.storage})]})]})]}),s.type==="jewellery"&&(s.dimensions||s.material||s.careInstructions)&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Jewellery Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.dimensions&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Dimensions"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded",children:s.dimensions})]}),s.material&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Material"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded",children:s.material})]}),s.careInstructions&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Care Instructions"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded",children:s.careInstructions})]})]})]}),(s.collections&&s.collections.length>0||s.badges&&s.badges.length>0)&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Collections & Badges"}),e.jsxs("div",{className:"space-y-4",children:[s.collections&&s.collections.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Collections"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.collections.map((v,y)=>e.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 text-sm rounded-full",children:v},y))})]}),s.badges&&s.badges.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Badges"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.badges.map((v,y)=>e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 text-sm rounded-full",children:v},y))})]})]})]}),(s.metaTitle||s.metaDescription)&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"SEO Information"}),e.jsxs("div",{className:"space-y-4",children:[s.metaTitle&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded",children:s.metaTitle})]}),s.metaDescription&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded",children:s.metaDescription})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Timestamps"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Created"}),e.jsx("p",{children:new Date(s.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Last Updated"}),e.jsx("p",{children:new Date(s.updatedAt).toLocaleString()})]})]})]})]}),e.jsx("div",{className:"flex justify-end p-6 border-t",children:e.jsx("button",{onClick:A,className:"px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})},xa=({isOpen:j,onClose:A,product:s})=>{var S;const l=pe(),{operationLoading:h,operationError:N}=ne(b=>b.productAdmin),[_,v]=W.useState(null),[y,w]=W.useState(!1),[f,d]=W.useState(null),[t,n]=W.useState({sku:"",sizeLabel:"",price:"",mrp:"",stock:0,weight:"",isDefault:!1,isActive:!0}),[i,c]=W.useState({variantSku:"",stock:""});W.useEffect(()=>{j||(v(null),w(!1),d(null),n({sku:"",sizeLabel:"",price:"",mrp:"",stock:0,weight:"",isDefault:!1,isActive:!0}))},[j]);const u=b=>b===0?{status:"out_of_stock",color:"bg-red-100 text-red-800"}:b<10?{status:"low_stock",color:"bg-yellow-100 text-yellow-800"}:{status:"in_stock",color:"bg-green-100 text-green-800"},o=async b=>{b.preventDefault();try{const O={...t,price:parseFloat(t.price)||0,mrp:t.mrp?parseFloat(t.mrp):void 0,stock:parseInt(t.stock)||0,weight:t.weight?parseFloat(t.weight):void 0};await l(vn({productId:s._id,variantData:O})).unwrap(),w(!1),n({sku:"",sizeLabel:"",price:"",mrp:"",stock:0,weight:"",isDefault:!1,isActive:!0})}catch(O){console.error("Failed to add variant:",O)}},a=async b=>{if(b.preventDefault(),!!_)try{const O={..._,price:parseFloat(_.price)||0,mrp:_.mrp?parseFloat(_.mrp):void 0,stock:parseInt(_.stock)||0,weight:_.weight?parseFloat(_.weight):void 0};await l(bn({productId:s._id,variantId:_._id,variantData:O})).unwrap(),v(null)}catch(O){console.error("Failed to update variant:",O)}},g=async b=>{b.preventDefault();try{await l(jn({productId:s._id,stockData:{variantSku:i.variantSku,stock:parseInt(i.stock)||0}})).unwrap(),d(null),c({variantSku:"",stock:""})}catch(O){console.error("Failed to update stock:",O)}},r=b=>{v({...b}),w(!1),d(null)},x=b=>{c({variantSku:b.sku,stock:b.stock.toString()}),d(b._id),v(null),w(!1)};return!j||!s?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Manage Variants"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.name})]}),e.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ye,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:N}),e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsxs("button",{onClick:()=>{w(!y),v(null),d(null)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(De,{className:"h-4 w-4"}),"Add New Variant"]})}),y&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Add New Variant"}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),e.jsx("input",{type:"text",value:t.sku,onChange:b=>n({...t,sku:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size Label *"}),e.jsx("input",{type:"text",value:t.sizeLabel,onChange:b=>n({...t,sizeLabel:b.target.value}),required:!0,placeholder:"e.g., 50ml, Large",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (₹) *"}),e.jsx("input",{type:"number",step:"0.01",value:t.price,onChange:b=>n({...t,price:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MRP (₹)"}),e.jsx("input",{type:"number",step:"0.01",value:t.mrp,onChange:b=>n({...t,mrp:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),e.jsx("input",{type:"number",value:t.stock,onChange:b=>n({...t,stock:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (grams)"}),e.jsx("input",{type:"number",step:"0.1",value:t.weight,onChange:b=>n({...t,weight:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.isDefault,onChange:b=>n({...t,isDefault:b.target.checked}),className:"mr-2"}),"Default Variant"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.isActive,onChange:b=>n({...t,isActive:b.target.checked}),className:"mr-2"}),"Active"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:h?"Adding...":"Add Variant"}),e.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})]}),_&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Edit Variant"}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),e.jsx("input",{type:"text",value:_.sku,onChange:b=>v({..._,sku:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size Label *"}),e.jsx("input",{type:"text",value:_.sizeLabel,onChange:b=>v({..._,sizeLabel:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (₹) *"}),e.jsx("input",{type:"number",step:"0.01",value:_.price,onChange:b=>v({..._,price:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MRP (₹)"}),e.jsx("input",{type:"number",step:"0.01",value:_.mrp||"",onChange:b=>v({..._,mrp:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),e.jsx("input",{type:"number",value:_.stock,onChange:b=>v({..._,stock:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (grams)"}),e.jsx("input",{type:"number",step:"0.1",value:_.weight||"",onChange:b=>v({..._,weight:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:_.isDefault,onChange:b=>v({..._,isDefault:b.target.checked}),className:"mr-2"}),"Default Variant"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:_.isActive,onChange:b=>v({..._,isActive:b.target.checked}),className:"mr-2"}),"Active"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:h?"Updating...":"Update Variant"}),e.jsx("button",{type:"button",onClick:()=>v(null),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})]}),f&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Quick Stock Update"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),e.jsx("input",{type:"text",value:i.variantSku,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Stock *"}),e.jsx("input",{type:"number",value:i.stock,onChange:b=>c({...i,stock:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:h?"Updating...":"Update Stock"}),e.jsx("button",{type:"button",onClick:()=>d(null),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium mb-4",children:["Current Variants (",((S=s.variants)==null?void 0:S.length)||0,")"]}),s.variants&&s.variants.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Size"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"MRP"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Weight"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.variants.map((b,O)=>{const C=u(b.stock);return e.jsxs("tr",{className:b.isDefault?"bg-blue-50":"bg-white",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[b.sku,b.isDefault&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded font-medium",children:"Default"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:b.sizeLabel}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:me(b.price)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:b.mrp?me(b.mrp):"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.color}`,children:b.stock||0})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:b.weight?`${b.weight}g`:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>r(b),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded transition-colors",title:"Edit Variant",children:e.jsx(yn,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>x(b),className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 rounded transition-colors",title:"Update Stock",children:e.jsx(vt,{className:"h-4 w-4"})})]})})]},b._id||O)})})]})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(vt,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No variants found for this product."}),e.jsx("p",{className:"text-sm",children:"Add variants to manage inventory and pricing."})]})]})]}),e.jsx("div",{className:"flex justify-end p-6 border-t",children:e.jsx("button",{onClick:A,className:"px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})};function Xt(j){return{published:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",archived:"bg-red-100 text-red-800",in_stock:"bg-green-100 text-green-800",out_of_stock:"bg-red-100 text-red-800",low_stock:"bg-yellow-100 text-yellow-800"}[j]||"bg-gray-100 text-gray-800"}function ya(j){return!j||j.stock===void 0?"unknown":j.stock===0?"out_of_stock":j.stock<10?"low_stock":"in_stock"}function va(){const j=pe(),{products:A,pagination:s,filters:l,loading:h,error:N,operationLoading:_}=ne(D=>D.productAdmin),[v,y]=W.useState(!1),[w,f]=W.useState(!1),[d,t]=W.useState(!1),[n,i]=W.useState(null),[c,u]=W.useState(null),[o,a]=W.useState(null),[g,r]=W.useState(l),[x,S]=W.useState(l.q||"");W.useEffect(()=>{j(We({...l,page:s.page}))},[j,l,s.page]),W.useEffect(()=>{r(l)},[l]);const b=D=>{r({...g,...D}),j(It({...D,page:1}))},O=()=>{b({q:x})},C=()=>{j(wn()),r({q:"",status:"",category:""}),S("")},p=async D=>{if(window.confirm("Are you sure you want to archive this product?"))try{await j(_n(D)).unwrap()}catch(B){console.error("Failed to delete product:",B)}},m=D=>{i(D),y(!0)},k=D=>{u(D),j(kn(D)),f(!0)},E=D=>{u(D),t(!0)},P=D=>{j(It({...l,page:D}))};return N?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 font-medium",children:"Error loading products"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:N}),e.jsx("button",{onClick:()=>j(We({...l,page:s.page})),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Retry"})]})}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Products Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage your product catalog"})]}),e.jsxs("button",{onClick:()=>{i(null),y(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(De,{className:"w-4 h-4"}),"Add Product"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:x,onChange:D=>S(D.target.value),onKeyDown:D=>D.key==="Enter"&&O(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("select",{value:g.status||"",onChange:D=>b({status:D.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsxs("select",{value:g.category||"",onChange:D=>b({category:D.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"fragrance",children:"Fragrance"}),e.jsx("option",{value:"jewelry",children:"Jewelry"}),e.jsx("option",{value:"essentials",children:"Essentials"})]}),e.jsx("button",{onClick:O,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Search"}),e.jsx("button",{onClick:C,className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:"Clear"})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:h?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):A.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Sr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No products found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Add your first product to get started"})]})}):e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(D=>{var $,M;const B=(($=D.variants)==null?void 0:$[0])||{},U=ya(B);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 flex-shrink-0",children:e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:((M=D.heroImage)==null?void 0:M.url)||"/placeholder.jpg",alt:D.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",B.sku||D.sku||"No SKU"]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:D.category||"Uncategorized"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:me(B.price||0)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Xt(U)}`,children:[B.stock||0," units"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Xt(D.status)}`,children:D.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>k(D),className:"text-blue-600 hover:text-blue-900 p-1",title:"View Details",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>m(D),className:"text-green-600 hover:text-green-900 p-1",title:"Edit Product",children:e.jsx(Nn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(D._id),className:"text-red-600 hover:text-red-900 p-1",title:"Archive Product",children:e.jsx(Ge,{className:"w-4 h-4"})})]})})]},D._id)})})]})})}),s.totalPages>1&&e.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(s.page-1)*s.limit+1," to ",Math.min(s.page*s.limit,s.total)," of ",s.total," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>P(s.page-1),disabled:s.page<=1,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),[...Array(s.totalPages)].map((D,B)=>e.jsx("button",{onClick:()=>P(B+1),className:`px-3 py-1 border rounded text-sm ${s.page===B+1?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:B+1},B+1)),e.jsx("button",{onClick:()=>P(s.page+1),disabled:s.page>=s.totalPages,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})}),e.jsx(pa,{isOpen:v,product:n,onClose:()=>{y(!1),i(null)},onSuccess:()=>{y(!1),i(null),j(We({...l,page:s.page}))}}),e.jsx(ga,{isOpen:w,product:c,onClose:()=>{f(!1),u(null)},onEdit:()=>{f(!1),m(c)},onManageVariants:()=>{f(!1),E(c)}}),e.jsx(xa,{isOpen:d,product:c,onClose:()=>{t(!1),u(null)},onSuccess:()=>{t(!1),u(null),j(We({...l,page:s.page}))}})]})}function ba({isOpen:j,onClose:A,order:s}){var h,N,_,v,y,w;if(!j||!s)return null;const l=Cr(s);return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Order Details"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Order #",s.orderNumber]})]}),e.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ye,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Ot,{className:"h-5 w-5 mr-2"}),"Order Status"]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${bt(s.status)}`,children:s.status.replace("_"," ")}),e.jsx("div",{className:"mt-3 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsxs("span",{children:["Ordered: ",l.formattedDate," at ",l.formattedTime]})]})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(St,{className:"h-5 w-5 mr-2"}),"Payment Details"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${An((h=s.payment)==null?void 0:h.status)}`,children:((N=s.payment)==null?void 0:N.status)||"unpaid"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["Method: ",((_=s.payment)==null?void 0:_.method)||"N/A"]}),((v=s.payment)==null?void 0:v.transactionId)&&e.jsxs("div",{children:["Transaction: ",s.payment.transactionId]})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(rt,{className:"h-5 w-5 mr-2"}),"Customer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Contact Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",l.customerName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",l.customerEmail]}),((y=s.userSnapshot)==null?void 0:y.phone)&&e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",s.userSnapshot.phone]})]})]}),s.shippingAddress&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h5",{className:"font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(On,{className:"h-4 w-4 mr-1"}),"Shipping Address"]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("div",{children:s.shippingAddress.fullName}),e.jsx("div",{children:s.shippingAddress.street}),e.jsxs("div",{children:[s.shippingAddress.city,", ",s.shippingAddress.state," ",s.shippingAddress.postalCode]}),e.jsx("div",{children:s.shippingAddress.country}),s.shippingAddress.phone&&e.jsxs("div",{children:["Phone: ",s.shippingAddress.phone]})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Pr,{className:"h-5 w-5 mr-2"}),"Order Items (",l.itemsCount," item",l.itemsCount!==1?"s":"",")"]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(w=s.items)==null?void 0:w.map((f,d)=>{var t,n,i,c;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[((n=(t=f.productSnapshot)==null?void 0:t.images)==null?void 0:n[0])&&e.jsx("img",{src:f.productSnapshot.images[0],alt:f.productSnapshot.name,className:"h-10 w-10 rounded-md object-cover mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((i=f.productSnapshot)==null?void 0:i.name)||"Unknown Product"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",((c=f.productSnapshot)==null?void 0:c.sku)||"N/A"]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.variantSnapshot?e.jsxs("div",{children:[f.variantSnapshot.sizeLabel&&e.jsx("div",{className:"font-medium",children:f.variantSnapshot.sizeLabel}),f.variantSnapshot.color&&e.jsx("div",{className:"text-xs text-gray-500",children:f.variantSnapshot.color}),f.variantSnapshot.sku&&e.jsxs("div",{className:"text-xs text-gray-400",children:["SKU: ",f.variantSnapshot.sku]}),!f.variantSnapshot.sizeLabel&&!f.variantSnapshot.color&&!f.variantSnapshot.sku&&e.jsx("span",{className:"text-gray-500",children:"Standard"})]}):f.variantId?e.jsxs("span",{className:"text-gray-500",children:["Variant ID: ",f.variantId]}):e.jsx("span",{className:"text-gray-500",children:"No variant info"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:me(f.unitPrice||f.priceAtTime||0)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.quantity||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:me((f.unitPrice||f.priceAtTime||0)*(f.quantity||0))})]},d)})})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Dr,{className:"h-5 w-5 mr-2"}),"Price Breakdown"]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:me(s.subtotal||0)})]}),(s.shippingTotal||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping:"}),e.jsx("span",{children:me(s.shippingTotal||0)})]}),(s.taxTotal||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax:"}),e.jsx("span",{children:me(s.taxTotal||0)})]}),(s.codCharge||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"COD Charges:"}),e.jsx("span",{children:me(s.codCharge||0)})]}),(s.discountTotal||0)>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-",me(s.discountTotal||0)]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-semibold text-base",children:[e.jsx("span",{children:"Grand Total:"}),e.jsx("span",{children:me(s.grandTotal||0)})]})})]})})]}),s.notes&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Order Notes"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:s.notes})})]})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:A,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Close"})})]})})}const pt=[{value:"pending_payment",label:"Pending Payment",description:"Awaiting payment from customer"},{value:"paid",label:"Payment Completed",description:"Payment received successfully"},{value:"processing",label:"Processing",description:"Order is being prepared"},{value:"partially_shipped",label:"Partially Shipped",description:"Some items have been shipped"},{value:"shipped",label:"Shipped",description:"All items have been shipped"},{value:"delivered",label:"Delivered",description:"Order has been delivered"},{value:"cancelled",label:"Cancelled",description:"Order has been cancelled"},{value:"refunded",label:"Refunded",description:"Order has been refunded"},{value:"failed",label:"Failed",description:"Order processing failed"}];function ja({isOpen:j,onClose:A,order:s}){const l=pe(),{operationLoading:h}=ne(t=>t.orderAdmin),[N,_]=W.useState((s==null?void 0:s.status)||""),[v,y]=W.useState("");if(!j||!s)return null;const w=async t=>{if(t.preventDefault(),!N){alert("Please select a status");return}try{const n={status:N,...v.trim()&&{notes:v.trim()}};await l(Sn({orderId:s._id,statusData:n})).unwrap(),A()}catch(n){console.error("Failed to update order status:",n)}},f=pt.find(t=>t.value===s.status),d=pt.find(t=>t.value===N);return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ot,{className:"h-6 w-6 mr-2"}),"Update Order Status"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Order #",s.orderNumber]})]}),e.jsx("button",{onClick:A,disabled:h,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:e.jsx(ye,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Status"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${bt(s.status)}`,children:(f==null?void 0:f.label)||s.status}),e.jsx("span",{className:"text-sm text-gray-500",children:f==null?void 0:f.description})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Status *"}),e.jsxs("select",{id:"status",value:N,onChange:t=>_(t.target.value),required:!0,disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select new status"}),pt.map(t=>e.jsxs("option",{value:t.value,disabled:t.value===s.status,children:[t.label,t.value===s.status?" (Current)":""]},t.value))]}),d&&N!==s.status&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${bt(N)}`,children:d.label})}),e.jsx("p",{className:"text-sm text-blue-700",children:d.description})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Update Notes (Optional)"}),e.jsx("textarea",{id:"notes",value:v,onChange:t=>y(t.target.value),placeholder:"Add any notes about this status update...",rows:"3",disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-100 resize-none"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These notes will be recorded with the status update for tracking purposes."})]}),N==="cancelled"&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-1",children:"⚠️ Order Cancellation"}),e.jsx("p",{className:"text-sm text-red-700",children:"Cancelling this order will mark it as cancelled. Make sure to process any necessary refunds separately."})]}),N==="refunded"&&e.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-orange-800 mb-1",children:"💰 Refund Status"}),e.jsx("p",{className:"text-sm text-orange-700",children:"This status indicates the order has been refunded. Ensure the actual refund has been processed through your payment provider."})]}),N==="delivered"&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-800 mb-1",children:"✅ Order Completion"}),e.jsx("p",{className:"text-sm text-green-700",children:"Marking as delivered indicates successful order completion. This status change cannot be easily reversed."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:A,disabled:h,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:h||!N||N===s.status,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[h&&e.jsx(Lr,{className:"h-4 w-4 animate-spin"}),"Update Status"]})]})]})]})})}const Na=["Customer requested cancellation","Product defective/damaged","Wrong item shipped","Item not as described","Shipping delay","Duplicate order","Customer not satisfied","Other"];function wa({isOpen:j,onClose:A,order:s}){var r,x;const l=pe(),{operationLoading:h}=ne(S=>S.orderAdmin),[N,_]=W.useState(""),[v,y]=W.useState(""),[w,f]=W.useState(""),[d,t]=W.useState(""),[n,i]=W.useState("full");if(!j||!s)return null;const c=Cr(s),u=c.totalAmount;En.useEffect(()=>{_(n==="full"?u.toString():"")},[n,u]);const o=async S=>{S.preventDefault();const b=parseFloat(N);if(!b||b<=0){alert("Please enter a valid refund amount");return}if(b>u){alert(`Refund amount cannot exceed ${me(u)}`);return}if(!v){alert("Please select a refund reason");return}if(v==="Other"&&!w.trim()){alert("Please provide a custom reason");return}try{const O={amount:b,reason:v==="Other"?w.trim():v,...d.trim()&&{notes:d.trim()},refundType:n};await l(Tn({orderId:s._id,refundData:O})).unwrap(),A()}catch(O){console.error("Failed to process refund:",O)}},a=n==="partial",g=N?(parseFloat(N)/u*100).toFixed(1):0;return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Dr,{className:"h-6 w-6 mr-2"}),"Process Refund"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Order #",s.orderNumber]})]}),e.jsx("button",{onClick:A,disabled:h,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:e.jsx(ye,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Order Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:c.customerName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:((r=s.payment)==null?void 0:r.method)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total Paid:"})," ",me(c.totalAmount)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Payment Status:"})," ",((x=s.payment)==null?void 0:x.status)||"unpaid"]})]})]}),e.jsxs("form",{onSubmit:o,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Refund Type *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"relative",children:[e.jsx("input",{type:"radio",value:"full",checked:n==="full",onChange:S=>i(S.target.value),disabled:h,className:"sr-only"}),e.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-colors ${n==="full"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Full Refund"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Refund entire order amount"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600 mt-2",children:me(u)})]})]}),e.jsxs("label",{className:"relative",children:[e.jsx("input",{type:"radio",value:"partial",checked:n==="partial",onChange:S=>i(S.target.value),disabled:h,className:"sr-only"}),e.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-colors ${n==="partial"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Partial Refund"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Refund specific amount"}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Custom amount"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"refundAmount",className:"block text-sm font-medium text-gray-700 mb-2",children:["Refund Amount *",a&&N&&e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",g,"% of total)"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"₹"}),e.jsx("input",{type:"number",id:"refundAmount",value:N,onChange:S=>_(S.target.value),step:"0.01",min:"0",max:u,required:!0,disabled:h||n==="full",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-100",placeholder:"0.00"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum refundable amount: ",me(u)]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"refundReason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Reason *"}),e.jsxs("select",{id:"refundReason",value:v,onChange:S=>y(S.target.value),required:!0,disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select a reason"}),Na.map(S=>e.jsx("option",{value:S,children:S},S))]})]}),v==="Other"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"customReason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Reason *"}),e.jsx("input",{type:"text",id:"customReason",value:w,onChange:S=>f(S.target.value),required:!0,disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-100",placeholder:"Please specify the reason for refund"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{id:"notes",value:d,onChange:S=>t(S.target.value),placeholder:"Any additional information about this refund...",rows:"3",disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:bg-gray-100 resize-none"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-1",children:"⚠️ Refund Processing"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"This action will initiate the refund process. The actual refund will be processed through your payment provider and may take 3-7 business days to appear in the customer's account."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:A,disabled:h,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:h||!N||!v,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[h&&e.jsx(Lr,{className:"h-4 w-4 animate-spin"}),"Process Refund"]})]})]})]})})}function _a(j){return{pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",processing:"bg-purple-100 text-purple-800",shipped:"bg-indigo-100 text-indigo-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"}[j]||"bg-gray-100 text-gray-800"}function ka(j){return{pending:"bg-yellow-100 text-yellow-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"}[j]||"bg-gray-100 text-gray-800"}function Aa(){const j=pe(),{orders:A,pagination:s,filters:l,loading:h,error:N,operationLoading:_}=ne(p=>p.orderAdmin),[v,y]=W.useState(!1),[w,f]=W.useState(!1),[d,t]=W.useState(!1),[n,i]=W.useState(null),[c,u]=W.useState(l),[o,a]=W.useState(l.q||"");W.useEffect(()=>{j($e({...l,page:s.page}))},[j,l,s.page]),W.useEffect(()=>{u(l)},[l]);const g=p=>{const m={...c,...p};u(m),j(Pn(m))},r=()=>{g({q:o,page:1})},x=()=>{const p={q:"",status:"",paymentStatus:"",user:"",page:1};j(Dn()),u(p),a("")},S=p=>{i(p),j(Ln(p)),y(!0)},b=p=>{i(p),f(!0)},O=p=>{i(p),t(!0)},C=p=>{g({page:p})};return N?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 font-medium",children:"Error loading orders"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:N}),e.jsx("button",{onClick:()=>j($e({...l,page:s.page})),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Retry"})]})}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Orders Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track and manage customer orders"})]}),e.jsxs("button",{onClick:()=>j($e({...l,page:s.page})),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",disabled:h,children:[e.jsx(Cn,{className:`w-4 h-4 ${h?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search orders by ID, customer...",value:o,onChange:p=>a(p.target.value),onKeyDown:p=>p.key==="Enter"&&r(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("select",{value:c.status||"",onChange:p=>g({status:p.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"refunded",children:"Refunded"})]}),e.jsxs("select",{value:c.paymentStatus||"",onChange:p=>g({paymentStatus:p.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Payment Status"}),e.jsx("option",{value:"pending",children:"Payment Pending"}),e.jsx("option",{value:"success",children:"Payment Success"}),e.jsx("option",{value:"failed",children:"Payment Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"})]}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Search"}),e.jsx("button",{onClick:x,className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:"Clear"})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:h?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):A.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Pr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No orders found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Orders will appear here when customers place them"})]})}):e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(p=>{var m,k,E,P,D,B,U;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",p.orderNumber]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[((m=p.items)==null?void 0:m.length)||0," items"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(rt,{className:"w-4 h-4 text-gray-500"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((k=p.user)==null?void 0:k.name)||((E=p.customer)==null?void 0:E.name)||((P=p.shippingAddress)==null?void 0:P.name)||"Guest Customer"}),e.jsx("div",{className:"text-sm text-gray-500",children:((D=p.user)==null?void 0:D.email)||((B=p.customer)==null?void 0:B.email)||((U=p.shippingAddress)==null?void 0:U.email)||"No email provided"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:Rr(p.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:me(p.grandTotal||0)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_a(p.status)}`,children:p.status||"pending"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ka(p.paymentStatus)}`,children:p.paymentStatus||"pending"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>S(p),className:"text-blue-600 hover:text-blue-900 p-1",title:"View Details",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(p),className:"text-green-600 hover:text-green-900 p-1",title:"Update Status",children:e.jsx(Ot,{className:"w-4 h-4"})}),p.paymentStatus==="success"&&p.status!=="refunded"&&e.jsx("button",{onClick:()=>O(p),className:"text-orange-600 hover:text-orange-900 p-1",title:"Process Refund",children:e.jsx(St,{className:"w-4 h-4"})})]})})]},p._id)})})]})})}),s.totalPages>1&&e.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(s.page-1)*s.limit+1," to ",Math.min(s.page*s.limit,s.total)," of ",s.total," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(s.page-1),disabled:s.page<=1,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),[...Array(s.totalPages)].map((p,m)=>e.jsx("button",{onClick:()=>C(m+1),className:`px-3 py-1 border rounded text-sm ${s.page===m+1?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:m+1},m+1)),e.jsx("button",{onClick:()=>C(s.page+1),disabled:s.page>=s.totalPages,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})}),e.jsx(ba,{isOpen:v,order:n,onClose:()=>{y(!1),i(null)},onUpdateStatus:()=>{y(!1),b(n)},onRefund:()=>{y(!1),O(n)}}),e.jsx(ja,{isOpen:w,order:n,onClose:()=>{f(!1),i(null)},onSuccess:()=>{f(!1),i(null),j($e({...l,page:s.page}))}}),e.jsx(wa,{isOpen:d,order:n,onClose:()=>{t(!1),i(null)},onSuccess:()=>{t(!1),i(null),j($e({...l,page:s.page}))}})]})}function Oa({isOpen:j,onClose:A,appointment:s}){if(!j||!s)return null;const l=Rn(s),h=In(s.serviceType),N=qn(s.appointmentAt);return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-3xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Et,{className:"h-6 w-6 mr-2"}),"Appointment Details"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ID: ",s._id]})]}),e.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ye,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(qt,{className:"h-5 w-5 mr-2"}),"Status & Priority"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${Mn(s.status)}`,children:s.status}),e.jsxs("div",{className:`text-sm font-medium ${N.color}`,children:[N.label," • ",N.level==="past"?"Past appointment":N.level==="urgent"?"Requires immediate attention":N.level==="today"?"Scheduled for today":N.level==="tomorrow"?"Scheduled for tomorrow":"Future appointment"]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx("span",{className:"text-lg mr-2",children:h.icon}),"Service Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Service:"})," ",h.label]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Duration:"})," ",h.duration]}),e.jsx("div",{className:"text-gray-600",children:h.description})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(He,{className:"h-5 w-5 mr-2"}),"Customer Information"]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:l.customerName}),e.jsx("div",{className:"text-sm text-gray-500",children:"Full Name"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fn,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:l.customerEmail}),e.jsx("div",{className:"text-sm text-gray-500",children:"Email Address"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[l.customerPhone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ir,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:l.customerPhone}),e.jsx("div",{className:"text-sm text-gray-500",children:"Phone Number"})]})]}),s.user&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:"Registered User"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Account Holder"})]})]}),!s.user&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Guest Customer"}),e.jsx("div",{className:"text-sm text-gray-500",children:"No account"})]})]})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Schedule Details"]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"h-6 w-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:l.formattedDate}),e.jsx("div",{className:"text-sm text-gray-500",children:"Date"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bn,{className:"h-6 w-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:l.formattedTime}),e.jsx("div",{className:"text-sm text-gray-500",children:"Time"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qt,{className:"h-6 w-6 text-orange-500"}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${N.color}`,children:N.label}),e.jsx("div",{className:"text-sm text-gray-500",children:"Status"})]})]})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx($n,{className:"h-5 w-5 mr-2"}),"Notes & Comments"]}),s.notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Customer Notes"}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsx("p",{className:"text-blue-800",children:s.notes})})]}),s.adminNotes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Admin Notes"}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:e.jsx("p",{className:"text-yellow-800",children:s.adminNotes})})]}),!s.notes&&!s.adminNotes&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-500 text-center",children:"No notes available for this appointment"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Timeline"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsxs("span",{className:"text-gray-900",children:[new Date(s.createdAt).toLocaleDateString()," at ",new Date(s.createdAt).toLocaleTimeString()]})]}),s.updatedAt!==s.createdAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),e.jsxs("span",{className:"text-gray-900",children:[new Date(s.updatedAt).toLocaleDateString()," at ",new Date(s.updatedAt).toLocaleTimeString()]})]}),l.daysDifference!==void 0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Days Until Appointment:"}),e.jsx("span",{className:`font-medium ${l.daysDifference<0?"text-red-600":l.daysDifference===0?"text-orange-600":l.daysDifference<=1?"text-yellow-600":"text-green-600"}`,children:l.daysDifference<0?`${Math.abs(l.daysDifference)} days ago`:l.daysDifference===0?"Today":`${l.daysDifference} days`})]})]})})]})]}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:A,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Close"})})]})})}function Sa(){const j=pe(),{appointments:A,loading:s,error:l}=ne(a=>a.appointmentAdmin),[h,N]=W.useState(""),[_,v]=W.useState(""),[y,w]=W.useState(""),[f,d]=W.useState(!1),[t,n]=W.useState(null);W.useEffect(()=>{j(ut({}))},[j]);const i=a=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",c=a=>{n(a),d(!0)},u=async(a,g)=>{try{await j(Un({appointmentId:a,updateData:{status:g}})).unwrap(),j(ut({}))}catch(r){console.error("Failed to update appointment status:",r)}},o=(A||[]).filter(a=>{var S,b;const g=((S=a.customerName)==null?void 0:S.toLowerCase().includes(h.toLowerCase()))||((b=a.customerEmail)==null?void 0:b.toLowerCase().includes(h.toLowerCase())),r=!_||a.status===_,x=!y||a.serviceType===y;return g&&r&&x});return l?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 font-medium",children:"Error loading appointments"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:l}),e.jsx("button",{onClick:()=>j(ut({})),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Retry"})]})}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Appointments Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage customer appointments and bookings"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(De,{className:"w-4 h-4"}),"New Appointment"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search appointments...",value:h,onChange:a=>N(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("select",{value:_,onChange:a=>v(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:y,onChange:a=>w(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Services"}),e.jsx("option",{value:"consultation",children:"Consultation"}),e.jsx("option",{value:"repair",children:"Repair"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"custom",children:"Custom Order"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:s?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Loading appointments..."})]})}):o.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ke,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No appointments found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Customer appointments will appear here"})]})}):e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appointment Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(rt,{className:"w-4 h-4 text-gray-500"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.customerName}),e.jsx("div",{className:"text-sm text-gray-500",children:a.customerEmail}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Ir,{className:"w-3 h-3"}),a.customerPhone]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:a.serviceType})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:Rr(a.appointmentAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i(a.status)}`,children:a.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:a.adminNotes||"No notes"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>c(a),className:"text-blue-600 hover:text-blue-900 p-1",title:"View Details",children:e.jsx(Le,{className:"w-4 h-4"})}),a.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>u(a._id,"confirmed"),className:"text-green-600 hover:text-green-900 p-1",title:"Confirm Appointment",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(a._id,"cancelled"),className:"text-red-600 hover:text-red-900 p-1",title:"Cancel Appointment",children:e.jsx(Ye,{className:"w-4 h-4"})})]}),a.status==="confirmed"&&e.jsx("button",{onClick:()=>u(a._id,"completed"),className:"text-green-600 hover:text-green-900 p-1",title:"Mark as Completed",children:e.jsx(Et,{className:"w-4 h-4"})})]})})]},a._id))})]})})}),e.jsx(Oa,{isOpen:f,appointment:t,onClose:()=>{d(!1),n(null)}})]})}function Ea(){const j=pe(),A=ne(zn),s=ne(Hn);ne(Kn);const l=ne(Vn),h=ne(Gn),[N,_]=W.useState(""),[v,y]=W.useState(""),[w,f]=W.useState("");W.useEffect(()=>{j(Ce({page:1,limit:20}))},[j]);const d=(r,x)=>x?"bg-red-100 text-red-800":r?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",t=(r,x)=>x?"Flagged":r?"Approved":"Pending",n=async r=>{try{await j(ft({reviewId:r,moderationData:{approve:!0}})).unwrap()}catch(x){console.error("Failed to approve review:",x)}},i=async r=>{try{await j(ft({reviewId:r,moderationData:{approve:!1}})).unwrap()}catch(x){console.error("Failed to reject review:",x)}},c=async r=>{try{await j(ft({reviewId:r,moderationData:{flag:!0}})).unwrap()}catch(x){console.error("Failed to flag review:",x)}},u=async r=>{if(window.confirm("Are you sure you want to delete this review?"))try{await j(Zn(r)).unwrap()}catch(x){console.error("Failed to delete review:",x)}},o=()=>{j(Ce({page:1,search:N,isApproved:v==="approved"?"true":v==="pending"?"false":"",flagged:v==="flagged"?"true":""}))},a=()=>{_(""),y(""),f(""),j(Ce({page:1,limit:20}))},g=A.filter(r=>{var O,C,p,m;const x=N===""||((O=r.title)==null?void 0:O.toLowerCase().includes(N.toLowerCase()))||((C=r.body)==null?void 0:C.toLowerCase().includes(N.toLowerCase()))||((m=(p=r.user)==null?void 0:p.name)==null?void 0:m.toLowerCase().includes(N.toLowerCase())),S=v===""||v==="approved"&&r.isApproved||v==="pending"&&!r.isApproved&&!r.flagged||v==="flagged"&&r.flagged,b=w===""||r.rating===parseInt(w);return x&&S&&b});return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Reviews Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Moderate and manage customer reviews"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l.total," total reviews"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search reviews...",value:N,onChange:r=>_(r.target.value),onKeyDown:r=>r.key==="Enter"&&o(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("select",{value:v,onChange:r=>y(r.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"flagged",children:"Flagged"})]}),e.jsxs("select",{value:w,onChange:r=>f(r.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Ratings"}),e.jsx("option",{value:"5",children:"5 Stars"}),e.jsx("option",{value:"4",children:"4 Stars"}),e.jsx("option",{value:"3",children:"3 Stars"}),e.jsx("option",{value:"2",children:"2 Stars"}),e.jsx("option",{value:"1",children:"1 Star"})]}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Search"}),e.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:"Clear"})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:s?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Loading reviews..."})]})}):g.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Wn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No reviews found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Customer reviews will appear here"})]})}):e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Review"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(r=>{var x,S;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((x=r.user)==null?void 0:x.name)||"Anonymous"}),e.jsx("div",{className:"text-sm text-gray-500",children:((S=r.user)==null?void 0:S.email)||"N/A"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:r.product||"Unknown Product"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((b,O)=>e.jsx(Tr,{className:`w-4 h-4 ${O<r.rating?"text-yellow-400":"text-gray-300"}`},O)),e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["(",r.rating,")"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"max-w-xs",children:e.jsx("div",{className:"text-sm text-gray-900 line-clamp-2",children:r.comment||"No comment provided"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:be(r.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d(r.isApproved,r.flagged)}`,children:t(r.isApproved,r.flagged)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[!r.isApproved&&!r.flagged&&e.jsx("button",{onClick:()=>n(r._id),className:"text-green-600 hover:text-green-900 p-1",title:"Approve Review",children:e.jsx(Tt,{className:"w-4 h-4"})}),r.isApproved&&e.jsx("button",{onClick:()=>i(r._id),className:"text-orange-600 hover:text-orange-900 p-1",title:"Reject Review",children:e.jsx(Ye,{className:"w-4 h-4"})}),!r.flagged&&e.jsx("button",{onClick:()=>c(r._id),className:"text-red-600 hover:text-red-900 p-1",title:"Flag Review",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(r._id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Review",children:e.jsx(Ge,{className:"w-4 h-4"})})]})})]},r._id)})})]})})}),l.totalPages>1&&e.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(l.page-1)*l.limit+1," to ",Math.min(l.page*l.limit,l.total)," of ",l.total," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j(Ce({...h,page:l.page-1})),disabled:l.page<=1,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),[...Array(l.totalPages)].map((r,x)=>e.jsx("button",{onClick:()=>j(Ce({...h,page:x+1})),className:`px-3 py-1 border rounded text-sm ${l.page===x+1?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:x+1},x+1)),e.jsx("button",{onClick:()=>j(Ce({...h,page:l.page+1})),disabled:l.page>=l.totalPages,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})})]})}function Ta({subscribers:j=[],pagination:A={page:1,limit:20,total:0,totalPages:1},onFilterChange:s=()=>{},onPageChange:l=()=>{}}){const[h,N]=W.useState(""),[_,v]=W.useState(""),[y,w]=W.useState(j),f=a=>({subscribed:"bg-green-100 text-green-800",unsubscribed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"})[a]||"bg-gray-100 text-gray-800",d=(a,g)=>{w(r=>r.map(x=>x._id===a?{...x,status:g}:x))},t=a=>{window.confirm("Are you sure you want to remove this subscriber?")&&w(g=>g.filter(r=>r._id!==a))},n=()=>{s({search:h,status:_})},i=()=>{N(""),v(""),s({})},c=()=>{const a=y.map(S=>`${S.email},${S.status},${be(S.createdAt)}`).join(`
`),g=new Blob([`Email,Status,Date
${a}`],{type:"text/csv"}),r=window.URL.createObjectURL(g),x=document.createElement("a");x.href=r,x.download="newsletter-subscribers.csv",x.click(),window.URL.revokeObjectURL(r)},o=(y.length>0?y:j).filter(a=>{const g=a.email.toLowerCase().includes(h.toLowerCase()),r=!_||a.status===_;return g&&r});return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Newsletter Subscribers"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage newsletter subscriptions"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[A.total," total subscribers"]}),e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(Qn,{className:"w-4 h-4"}),"Export CSV"]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search by email...",value:h,onChange:a=>N(a.target.value),onKeyDown:a=>a.key==="Enter"&&n(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("select",{value:_,onChange:a=>v(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"subscribed",children:"Subscribed"}),e.jsx("option",{value:"unsubscribed",children:"Unsubscribed"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Search"}),e.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:"Clear"})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:o.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No subscribers found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Newsletter subscribers will appear here"})]})}):e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscribed Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Mt,{className:"w-4 h-4 text-blue-600"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.email})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f(a.status)}`,children:a.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:be(a.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.status==="unsubscribed"&&e.jsx("button",{onClick:()=>d(a._id,"subscribed"),className:"text-green-600 hover:text-green-900 p-1",title:"Reactivate Subscription",children:e.jsx(Tt,{className:"w-4 h-4"})}),a.status==="subscribed"&&e.jsx("button",{onClick:()=>d(a._id,"unsubscribed"),className:"text-red-600 hover:text-red-900 p-1",title:"Unsubscribe",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t(a._id),className:"text-red-600 hover:text-red-900 p-1",title:"Remove Subscriber",children:e.jsx(Ge,{className:"w-4 h-4"})})]})})]},a._id))})]})})}),A.totalPages>1&&e.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(A.page-1)*A.limit+1," to ",Math.min(A.page*A.limit,A.total)," of ",A.total," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(A.page-1),disabled:A.page<=1,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),[...Array(A.totalPages)].map((a,g)=>e.jsx("button",{onClick:()=>l(g+1),className:`px-3 py-1 border rounded text-sm ${A.page===g+1?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:g+1},g+1)),e.jsx("button",{onClick:()=>l(A.page+1),disabled:A.page>=A.totalPages,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})})]})}function Ca(){this.__data__=[],this.size=0}var Pa=Ca;function Da(j,A){return j===A||j!==j&&A!==A}var Zr=Da,La=Zr;function Ra(j,A){for(var s=j.length;s--;)if(La(j[s][0],A))return s;return-1}var st=Ra,Ia=st,qa=Array.prototype,Ma=qa.splice;function Fa(j){var A=this.__data__,s=Ia(A,j);if(s<0)return!1;var l=A.length-1;return s==l?A.pop():Ma.call(A,s,1),--this.size,!0}var Ba=Fa,$a=st;function Ua(j){var A=this.__data__,s=$a(A,j);return s<0?void 0:A[s][1]}var za=Ua,Ha=st;function Ka(j){return Ha(this.__data__,j)>-1}var Va=Ka,Ga=st;function Wa(j,A){var s=this.__data__,l=Ga(s,j);return l<0?(++this.size,s.push([j,A])):s[l][1]=A,this}var Za=Wa,Qa=Pa,Ya=Ba,Xa=za,Ja=Va,ei=Za;function Re(j){var A=-1,s=j==null?0:j.length;for(this.clear();++A<s;){var l=j[A];this.set(l[0],l[1])}}Re.prototype.clear=Qa;Re.prototype.delete=Ya;Re.prototype.get=Xa;Re.prototype.has=Ja;Re.prototype.set=ei;var at=Re,ti=at;function ri(){this.__data__=new ti,this.size=0}var ni=ri;function si(j){var A=this.__data__,s=A.delete(j);return this.size=A.size,s}var ai=si;function ii(j){return this.__data__.get(j)}var li=ii;function oi(j){return this.__data__.has(j)}var ci=oi,di=typeof xe=="object"&&xe&&xe.Object===Object&&xe,Qr=di,ui=Qr,fi=typeof self=="object"&&self&&self.Object===Object&&self,hi=ui||fi||Function("return this")(),we=hi,mi=we,pi=mi.Symbol,Pt=pi,Jt=Pt,Yr=Object.prototype,gi=Yr.hasOwnProperty,xi=Yr.toString,Ue=Jt?Jt.toStringTag:void 0;function yi(j){var A=gi.call(j,Ue),s=j[Ue];try{j[Ue]=void 0;var l=!0}catch{}var h=xi.call(j);return l&&(A?j[Ue]=s:delete j[Ue]),h}var vi=yi,bi=Object.prototype,ji=bi.toString;function Ni(j){return ji.call(j)}var wi=Ni,er=Pt,_i=vi,ki=wi,Ai="[object Null]",Oi="[object Undefined]",tr=er?er.toStringTag:void 0;function Si(j){return j==null?j===void 0?Oi:Ai:tr&&tr in Object(j)?_i(j):ki(j)}var it=Si;function Ei(j){var A=typeof j;return j!=null&&(A=="object"||A=="function")}var Xr=Ei,Ti=it,Ci=Xr,Pi="[object AsyncFunction]",Di="[object Function]",Li="[object GeneratorFunction]",Ri="[object Proxy]";function Ii(j){if(!Ci(j))return!1;var A=Ti(j);return A==Di||A==Li||A==Pi||A==Ri}var Jr=Ii,qi=we,Mi=qi["__core-js_shared__"],Fi=Mi,gt=Fi,rr=function(){var j=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}();function Bi(j){return!!rr&&rr in j}var $i=Bi,Ui=Function.prototype,zi=Ui.toString;function Hi(j){if(j!=null){try{return zi.call(j)}catch{}try{return j+""}catch{}}return""}var en=Hi,Ki=Jr,Vi=$i,Gi=Xr,Wi=en,Zi=/[\\^$.*+?()[\]{}|]/g,Qi=/^\[object .+?Constructor\]$/,Yi=Function.prototype,Xi=Object.prototype,Ji=Yi.toString,el=Xi.hasOwnProperty,tl=RegExp("^"+Ji.call(el).replace(Zi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rl(j){if(!Gi(j)||Vi(j))return!1;var A=Ki(j)?tl:Qi;return A.test(Wi(j))}var nl=rl;function sl(j,A){return j==null?void 0:j[A]}var al=sl,il=nl,ll=al;function ol(j,A){var s=ll(j,A);return il(s)?s:void 0}var Ie=ol,cl=Ie,dl=we,ul=cl(dl,"Map"),Dt=ul,fl=Ie,hl=fl(Object,"create"),lt=hl,nr=lt;function ml(){this.__data__=nr?nr(null):{},this.size=0}var pl=ml;function gl(j){var A=this.has(j)&&delete this.__data__[j];return this.size-=A?1:0,A}var xl=gl,yl=lt,vl="__lodash_hash_undefined__",bl=Object.prototype,jl=bl.hasOwnProperty;function Nl(j){var A=this.__data__;if(yl){var s=A[j];return s===vl?void 0:s}return jl.call(A,j)?A[j]:void 0}var wl=Nl,_l=lt,kl=Object.prototype,Al=kl.hasOwnProperty;function Ol(j){var A=this.__data__;return _l?A[j]!==void 0:Al.call(A,j)}var Sl=Ol,El=lt,Tl="__lodash_hash_undefined__";function Cl(j,A){var s=this.__data__;return this.size+=this.has(j)?0:1,s[j]=El&&A===void 0?Tl:A,this}var Pl=Cl,Dl=pl,Ll=xl,Rl=wl,Il=Sl,ql=Pl;function qe(j){var A=-1,s=j==null?0:j.length;for(this.clear();++A<s;){var l=j[A];this.set(l[0],l[1])}}qe.prototype.clear=Dl;qe.prototype.delete=Ll;qe.prototype.get=Rl;qe.prototype.has=Il;qe.prototype.set=ql;var Ml=qe,sr=Ml,Fl=at,Bl=Dt;function $l(){this.size=0,this.__data__={hash:new sr,map:new(Bl||Fl),string:new sr}}var Ul=$l;function zl(j){var A=typeof j;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?j!=="__proto__":j===null}var Hl=zl,Kl=Hl;function Vl(j,A){var s=j.__data__;return Kl(A)?s[typeof A=="string"?"string":"hash"]:s.map}var ot=Vl,Gl=ot;function Wl(j){var A=Gl(this,j).delete(j);return this.size-=A?1:0,A}var Zl=Wl,Ql=ot;function Yl(j){return Ql(this,j).get(j)}var Xl=Yl,Jl=ot;function eo(j){return Jl(this,j).has(j)}var to=eo,ro=ot;function no(j,A){var s=ro(this,j),l=s.size;return s.set(j,A),this.size+=s.size==l?0:1,this}var so=no,ao=Ul,io=Zl,lo=Xl,oo=to,co=so;function Me(j){var A=-1,s=j==null?0:j.length;for(this.clear();++A<s;){var l=j[A];this.set(l[0],l[1])}}Me.prototype.clear=ao;Me.prototype.delete=io;Me.prototype.get=lo;Me.prototype.has=oo;Me.prototype.set=co;var tn=Me,uo=at,fo=Dt,ho=tn,mo=200;function po(j,A){var s=this.__data__;if(s instanceof uo){var l=s.__data__;if(!fo||l.length<mo-1)return l.push([j,A]),this.size=++s.size,this;s=this.__data__=new ho(l)}return s.set(j,A),this.size=s.size,this}var go=po,xo=at,yo=ni,vo=ai,bo=li,jo=ci,No=go;function Fe(j){var A=this.__data__=new xo(j);this.size=A.size}Fe.prototype.clear=yo;Fe.prototype.delete=vo;Fe.prototype.get=bo;Fe.prototype.has=jo;Fe.prototype.set=No;var wo=Fe,_o="__lodash_hash_undefined__";function ko(j){return this.__data__.set(j,_o),this}var Ao=ko;function Oo(j){return this.__data__.has(j)}var So=Oo,Eo=tn,To=Ao,Co=So;function Xe(j){var A=-1,s=j==null?0:j.length;for(this.__data__=new Eo;++A<s;)this.add(j[A])}Xe.prototype.add=Xe.prototype.push=To;Xe.prototype.has=Co;var Po=Xe;function Do(j,A){for(var s=-1,l=j==null?0:j.length;++s<l;)if(A(j[s],s,j))return!0;return!1}var Lo=Do;function Ro(j,A){return j.has(A)}var Io=Ro,qo=Po,Mo=Lo,Fo=Io,Bo=1,$o=2;function Uo(j,A,s,l,h,N){var _=s&Bo,v=j.length,y=A.length;if(v!=y&&!(_&&y>v))return!1;var w=N.get(j),f=N.get(A);if(w&&f)return w==A&&f==j;var d=-1,t=!0,n=s&$o?new qo:void 0;for(N.set(j,A),N.set(A,j);++d<v;){var i=j[d],c=A[d];if(l)var u=_?l(c,i,d,A,j,N):l(i,c,d,j,A,N);if(u!==void 0){if(u)continue;t=!1;break}if(n){if(!Mo(A,function(o,a){if(!Fo(n,a)&&(i===o||h(i,o,s,l,N)))return n.push(a)})){t=!1;break}}else if(!(i===c||h(i,c,s,l,N))){t=!1;break}}return N.delete(j),N.delete(A),t}var rn=Uo,zo=we,Ho=zo.Uint8Array,Ko=Ho;function Vo(j){var A=-1,s=Array(j.size);return j.forEach(function(l,h){s[++A]=[h,l]}),s}var Go=Vo;function Wo(j){var A=-1,s=Array(j.size);return j.forEach(function(l){s[++A]=l}),s}var Zo=Wo,ar=Pt,ir=Ko,Qo=Zr,Yo=rn,Xo=Go,Jo=Zo,ec=1,tc=2,rc="[object Boolean]",nc="[object Date]",sc="[object Error]",ac="[object Map]",ic="[object Number]",lc="[object RegExp]",oc="[object Set]",cc="[object String]",dc="[object Symbol]",uc="[object ArrayBuffer]",fc="[object DataView]",lr=ar?ar.prototype:void 0,xt=lr?lr.valueOf:void 0;function hc(j,A,s,l,h,N,_){switch(s){case fc:if(j.byteLength!=A.byteLength||j.byteOffset!=A.byteOffset)return!1;j=j.buffer,A=A.buffer;case uc:return!(j.byteLength!=A.byteLength||!N(new ir(j),new ir(A)));case rc:case nc:case ic:return Qo(+j,+A);case sc:return j.name==A.name&&j.message==A.message;case lc:case cc:return j==A+"";case ac:var v=Xo;case oc:var y=l&ec;if(v||(v=Jo),j.size!=A.size&&!y)return!1;var w=_.get(j);if(w)return w==A;l|=tc,_.set(j,A);var f=Yo(v(j),v(A),l,h,N,_);return _.delete(j),f;case dc:if(xt)return xt.call(j)==xt.call(A)}return!1}var mc=hc;function pc(j,A){for(var s=-1,l=A.length,h=j.length;++s<l;)j[h+s]=A[s];return j}var gc=pc,xc=Array.isArray,Lt=xc,yc=gc,vc=Lt;function bc(j,A,s){var l=A(j);return vc(j)?l:yc(l,s(j))}var jc=bc;function Nc(j,A){for(var s=-1,l=j==null?0:j.length,h=0,N=[];++s<l;){var _=j[s];A(_,s,j)&&(N[h++]=_)}return N}var wc=Nc;function _c(){return[]}var kc=_c,Ac=wc,Oc=kc,Sc=Object.prototype,Ec=Sc.propertyIsEnumerable,or=Object.getOwnPropertySymbols,Tc=or?function(j){return j==null?[]:(j=Object(j),Ac(or(j),function(A){return Ec.call(j,A)}))}:Oc,Cc=Tc;function Pc(j,A){for(var s=-1,l=Array(j);++s<j;)l[s]=A(s);return l}var Dc=Pc;function Lc(j){return j!=null&&typeof j=="object"}var ct=Lc,Rc=it,Ic=ct,qc="[object Arguments]";function Mc(j){return Ic(j)&&Rc(j)==qc}var Fc=Mc,cr=Fc,Bc=ct,nn=Object.prototype,$c=nn.hasOwnProperty,Uc=nn.propertyIsEnumerable,zc=cr(function(){return arguments}())?cr:function(j){return Bc(j)&&$c.call(j,"callee")&&!Uc.call(j,"callee")},Hc=zc,Je={exports:{}};function Kc(){return!1}var Vc=Kc;Je.exports;(function(j,A){var s=we,l=Vc,h=A&&!A.nodeType&&A,N=h&&!0&&j&&!j.nodeType&&j,_=N&&N.exports===h,v=_?s.Buffer:void 0,y=v?v.isBuffer:void 0,w=y||l;j.exports=w})(Je,Je.exports);var sn=Je.exports,Gc=9007199254740991,Wc=/^(?:0|[1-9]\d*)$/;function Zc(j,A){var s=typeof j;return A=A??Gc,!!A&&(s=="number"||s!="symbol"&&Wc.test(j))&&j>-1&&j%1==0&&j<A}var Qc=Zc,Yc=9007199254740991;function Xc(j){return typeof j=="number"&&j>-1&&j%1==0&&j<=Yc}var an=Xc,Jc=it,ed=an,td=ct,rd="[object Arguments]",nd="[object Array]",sd="[object Boolean]",ad="[object Date]",id="[object Error]",ld="[object Function]",od="[object Map]",cd="[object Number]",dd="[object Object]",ud="[object RegExp]",fd="[object Set]",hd="[object String]",md="[object WeakMap]",pd="[object ArrayBuffer]",gd="[object DataView]",xd="[object Float32Array]",yd="[object Float64Array]",vd="[object Int8Array]",bd="[object Int16Array]",jd="[object Int32Array]",Nd="[object Uint8Array]",wd="[object Uint8ClampedArray]",_d="[object Uint16Array]",kd="[object Uint32Array]",ce={};ce[xd]=ce[yd]=ce[vd]=ce[bd]=ce[jd]=ce[Nd]=ce[wd]=ce[_d]=ce[kd]=!0;ce[rd]=ce[nd]=ce[pd]=ce[sd]=ce[gd]=ce[ad]=ce[id]=ce[ld]=ce[od]=ce[cd]=ce[dd]=ce[ud]=ce[fd]=ce[hd]=ce[md]=!1;function Ad(j){return td(j)&&ed(j.length)&&!!ce[Jc(j)]}var Od=Ad;function Sd(j){return function(A){return j(A)}}var Ed=Sd,et={exports:{}};et.exports;(function(j,A){var s=Qr,l=A&&!A.nodeType&&A,h=l&&!0&&j&&!j.nodeType&&j,N=h&&h.exports===l,_=N&&s.process,v=function(){try{var y=h&&h.require&&h.require("util").types;return y||_&&_.binding&&_.binding("util")}catch{}}();j.exports=v})(et,et.exports);var Td=et.exports,Cd=Od,Pd=Ed,dr=Td,ur=dr&&dr.isTypedArray,Dd=ur?Pd(ur):Cd,ln=Dd,Ld=Dc,Rd=Hc,Id=Lt,qd=sn,Md=Qc,Fd=ln,Bd=Object.prototype,$d=Bd.hasOwnProperty;function Ud(j,A){var s=Id(j),l=!s&&Rd(j),h=!s&&!l&&qd(j),N=!s&&!l&&!h&&Fd(j),_=s||l||h||N,v=_?Ld(j.length,String):[],y=v.length;for(var w in j)(A||$d.call(j,w))&&!(_&&(w=="length"||h&&(w=="offset"||w=="parent")||N&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Md(w,y)))&&v.push(w);return v}var zd=Ud,Hd=Object.prototype;function Kd(j){var A=j&&j.constructor,s=typeof A=="function"&&A.prototype||Hd;return j===s}var Vd=Kd;function Gd(j,A){return function(s){return j(A(s))}}var Wd=Gd,Zd=Wd,Qd=Zd(Object.keys,Object),Yd=Qd,Xd=Vd,Jd=Yd,eu=Object.prototype,tu=eu.hasOwnProperty;function ru(j){if(!Xd(j))return Jd(j);var A=[];for(var s in Object(j))tu.call(j,s)&&s!="constructor"&&A.push(s);return A}var nu=ru,su=Jr,au=an;function iu(j){return j!=null&&au(j.length)&&!su(j)}var lu=iu,ou=zd,cu=nu,du=lu;function uu(j){return du(j)?ou(j):cu(j)}var fu=uu,hu=jc,mu=Cc,pu=fu;function gu(j){return hu(j,pu,mu)}var xu=gu,fr=xu,yu=1,vu=Object.prototype,bu=vu.hasOwnProperty;function ju(j,A,s,l,h,N){var _=s&yu,v=fr(j),y=v.length,w=fr(A),f=w.length;if(y!=f&&!_)return!1;for(var d=y;d--;){var t=v[d];if(!(_?t in A:bu.call(A,t)))return!1}var n=N.get(j),i=N.get(A);if(n&&i)return n==A&&i==j;var c=!0;N.set(j,A),N.set(A,j);for(var u=_;++d<y;){t=v[d];var o=j[t],a=A[t];if(l)var g=_?l(a,o,t,A,j,N):l(o,a,t,j,A,N);if(!(g===void 0?o===a||h(o,a,s,l,N):g)){c=!1;break}u||(u=t=="constructor")}if(c&&!u){var r=j.constructor,x=A.constructor;r!=x&&"constructor"in j&&"constructor"in A&&!(typeof r=="function"&&r instanceof r&&typeof x=="function"&&x instanceof x)&&(c=!1)}return N.delete(j),N.delete(A),c}var Nu=ju,wu=Ie,_u=we,ku=wu(_u,"DataView"),Au=ku,Ou=Ie,Su=we,Eu=Ou(Su,"Promise"),Tu=Eu,Cu=Ie,Pu=we,Du=Cu(Pu,"Set"),Lu=Du,Ru=Ie,Iu=we,qu=Ru(Iu,"WeakMap"),Mu=qu,Nt=Au,wt=Dt,_t=Tu,kt=Lu,At=Mu,on=it,Be=en,hr="[object Map]",Fu="[object Object]",mr="[object Promise]",pr="[object Set]",gr="[object WeakMap]",xr="[object DataView]",Bu=Be(Nt),$u=Be(wt),Uu=Be(_t),zu=Be(kt),Hu=Be(At),Se=on;(Nt&&Se(new Nt(new ArrayBuffer(1)))!=xr||wt&&Se(new wt)!=hr||_t&&Se(_t.resolve())!=mr||kt&&Se(new kt)!=pr||At&&Se(new At)!=gr)&&(Se=function(j){var A=on(j),s=A==Fu?j.constructor:void 0,l=s?Be(s):"";if(l)switch(l){case Bu:return xr;case $u:return hr;case Uu:return mr;case zu:return pr;case Hu:return gr}return A});var Ku=Se,yt=wo,Vu=rn,Gu=mc,Wu=Nu,yr=Ku,vr=Lt,br=sn,Zu=ln,Qu=1,jr="[object Arguments]",Nr="[object Array]",Ze="[object Object]",Yu=Object.prototype,wr=Yu.hasOwnProperty;function Xu(j,A,s,l,h,N){var _=vr(j),v=vr(A),y=_?Nr:yr(j),w=v?Nr:yr(A);y=y==jr?Ze:y,w=w==jr?Ze:w;var f=y==Ze,d=w==Ze,t=y==w;if(t&&br(j)){if(!br(A))return!1;_=!0,f=!1}if(t&&!f)return N||(N=new yt),_||Zu(j)?Vu(j,A,s,l,h,N):Gu(j,A,y,s,l,h,N);if(!(s&Qu)){var n=f&&wr.call(j,"__wrapped__"),i=d&&wr.call(A,"__wrapped__");if(n||i){var c=n?j.value():j,u=i?A.value():A;return N||(N=new yt),h(c,u,s,l,N)}}return t?(N||(N=new yt),Wu(j,A,s,l,h,N)):!1}var Ju=Xu,ef=Ju,_r=ct;function cn(j,A,s,l,h){return j===A?!0:j==null||A==null||!_r(j)&&!_r(A)?j!==j&&A!==A:ef(j,A,s,l,cn,h)}var tf=cn,rf=tf;function nf(j,A){return rf(j,A)}var sf=nf,dn={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(j,A){(function(l,h){j.exports=h()})(typeof self<"u"?self:xe,function(){return function(s){var l={};function h(N){if(l[N])return l[N].exports;var _=l[N]={i:N,l:!1,exports:{}};return s[N].call(_.exports,_,_.exports,h),_.l=!0,_.exports}return h.m=s,h.c=l,h.d=function(N,_,v){h.o(N,_)||Object.defineProperty(N,_,{configurable:!1,enumerable:!0,get:v})},h.n=function(N){var _=N&&N.__esModule?function(){return N.default}:function(){return N};return h.d(_,"a",_),_},h.o=function(N,_){return Object.prototype.hasOwnProperty.call(N,_)},h.p="",h(h.s=109)}([function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(17),_=h(18),v=h(19),y=h(45),w=h(46),f=h(47),d=h(48),t=h(49),n=h(12),i=h(32),c=h(33),u=h(31),o=h(1),a={Scope:o.Scope,create:o.create,find:o.find,query:o.query,register:o.register,Container:N.default,Format:_.default,Leaf:v.default,Embed:d.default,Scroll:y.default,Block:f.default,Inline:w.default,Text:t.default,Attributor:{Attribute:n.default,Class:i.default,Style:c.default,Store:u.default}};l.default=a},function(s,l,h){var N=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var g in a)a.hasOwnProperty(g)&&(o[g]=a[g])};return function(o,a){u(o,a);function g(){this.constructor=o}o.prototype=a===null?Object.create(a):(g.prototype=a.prototype,new g)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=function(u){N(o,u);function o(a){var g=this;return a="[Parchment] "+a,g=u.call(this,a)||this,g.message=a,g.name=g.constructor.name,g}return o}(Error);l.ParchmentError=_;var v={},y={},w={},f={};l.DATA_KEY="__blot";var d;(function(u){u[u.TYPE=3]="TYPE",u[u.LEVEL=12]="LEVEL",u[u.ATTRIBUTE=13]="ATTRIBUTE",u[u.BLOT=14]="BLOT",u[u.INLINE=7]="INLINE",u[u.BLOCK=11]="BLOCK",u[u.BLOCK_BLOT=10]="BLOCK_BLOT",u[u.INLINE_BLOT=6]="INLINE_BLOT",u[u.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",u[u.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",u[u.ANY=15]="ANY"})(d=l.Scope||(l.Scope={}));function t(u,o){var a=i(u);if(a==null)throw new _("Unable to create "+u+" blot");var g=a,r=u instanceof Node||u.nodeType===Node.TEXT_NODE?u:g.create(o);return new g(r,o)}l.create=t;function n(u,o){return o===void 0&&(o=!1),u==null?null:u[l.DATA_KEY]!=null?u[l.DATA_KEY].blot:o?n(u.parentNode,o):null}l.find=n;function i(u,o){o===void 0&&(o=d.ANY);var a;if(typeof u=="string")a=f[u]||v[u];else if(u instanceof Text||u.nodeType===Node.TEXT_NODE)a=f.text;else if(typeof u=="number")u&d.LEVEL&d.BLOCK?a=f.block:u&d.LEVEL&d.INLINE&&(a=f.inline);else if(u instanceof HTMLElement){var g=(u.getAttribute("class")||"").split(/\s+/);for(var r in g)if(a=y[g[r]],a)break;a=a||w[u.tagName]}return a==null?null:o&d.LEVEL&a.scope&&o&d.TYPE&a.scope?a:null}l.query=i;function c(){for(var u=[],o=0;o<arguments.length;o++)u[o]=arguments[o];if(u.length>1)return u.map(function(r){return c(r)});var a=u[0];if(typeof a.blotName!="string"&&typeof a.attrName!="string")throw new _("Invalid definition");if(a.blotName==="abstract")throw new _("Cannot register abstract class");if(f[a.blotName||a.attrName]=a,typeof a.keyName=="string")v[a.keyName]=a;else if(a.className!=null&&(y[a.className]=a),a.tagName!=null){Array.isArray(a.tagName)?a.tagName=a.tagName.map(function(r){return r.toUpperCase()}):a.tagName=a.tagName.toUpperCase();var g=Array.isArray(a.tagName)?a.tagName:[a.tagName];g.forEach(function(r){(w[r]==null||a.className==null)&&(w[r]=a)})}return a}l.register=c},function(s,l,h){var N=h(51),_=h(11),v=h(3),y=h(20),w="\0",f=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};f.prototype.insert=function(d,t){var n={};return d.length===0?this:(n.insert=d,t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))},f.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},f.prototype.retain=function(d,t){if(d<=0)return this;var n={retain:d};return t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)},f.prototype.push=function(d){var t=this.ops.length,n=this.ops[t-1];if(d=v(!0,{},d),typeof n=="object"){if(typeof d.delete=="number"&&typeof n.delete=="number")return this.ops[t-1]={delete:n.delete+d.delete},this;if(typeof n.delete=="number"&&d.insert!=null&&(t-=1,n=this.ops[t-1],typeof n!="object"))return this.ops.unshift(d),this;if(_(d.attributes,n.attributes)){if(typeof d.insert=="string"&&typeof n.insert=="string")return this.ops[t-1]={insert:n.insert+d.insert},typeof d.attributes=="object"&&(this.ops[t-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof n.retain=="number")return this.ops[t-1]={retain:n.retain+d.retain},typeof d.attributes=="object"&&(this.ops[t-1].attributes=d.attributes),this}}return t===this.ops.length?this.ops.push(d):this.ops.splice(t,0,d),this},f.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},f.prototype.filter=function(d){return this.ops.filter(d)},f.prototype.forEach=function(d){this.ops.forEach(d)},f.prototype.map=function(d){return this.ops.map(d)},f.prototype.partition=function(d){var t=[],n=[];return this.forEach(function(i){var c=d(i)?t:n;c.push(i)}),[t,n]},f.prototype.reduce=function(d,t){return this.ops.reduce(d,t)},f.prototype.changeLength=function(){return this.reduce(function(d,t){return t.insert?d+y.length(t):t.delete?d-t.delete:d},0)},f.prototype.length=function(){return this.reduce(function(d,t){return d+y.length(t)},0)},f.prototype.slice=function(d,t){d=d||0,typeof t!="number"&&(t=1/0);for(var n=[],i=y.iterator(this.ops),c=0;c<t&&i.hasNext();){var u;c<d?u=i.next(d-c):(u=i.next(t-c),n.push(u)),c+=y.length(u)}return new f(n)},f.prototype.compose=function(d){var t=y.iterator(this.ops),n=y.iterator(d.ops),i=[],c=n.peek();if(c!=null&&typeof c.retain=="number"&&c.attributes==null){for(var u=c.retain;t.peekType()==="insert"&&t.peekLength()<=u;)u-=t.peekLength(),i.push(t.next());c.retain-u>0&&n.next(c.retain-u)}for(var o=new f(i);t.hasNext()||n.hasNext();)if(n.peekType()==="insert")o.push(n.next());else if(t.peekType()==="delete")o.push(t.next());else{var a=Math.min(t.peekLength(),n.peekLength()),g=t.next(a),r=n.next(a);if(typeof r.retain=="number"){var x={};typeof g.retain=="number"?x.retain=a:x.insert=g.insert;var S=y.attributes.compose(g.attributes,r.attributes,typeof g.retain=="number");if(S&&(x.attributes=S),o.push(x),!n.hasNext()&&_(o.ops[o.ops.length-1],x)){var b=new f(t.rest());return o.concat(b).chop()}}else typeof r.delete=="number"&&typeof g.retain=="number"&&o.push(r)}return o.chop()},f.prototype.concat=function(d){var t=new f(this.ops.slice());return d.ops.length>0&&(t.push(d.ops[0]),t.ops=t.ops.concat(d.ops.slice(1))),t},f.prototype.diff=function(d,t){if(this.ops===d.ops)return new f;var n=[this,d].map(function(a){return a.map(function(g){if(g.insert!=null)return typeof g.insert=="string"?g.insert:w;var r=a===d?"on":"with";throw new Error("diff() called "+r+" non-document")}).join("")}),i=new f,c=N(n[0],n[1],t),u=y.iterator(this.ops),o=y.iterator(d.ops);return c.forEach(function(a){for(var g=a[1].length;g>0;){var r=0;switch(a[0]){case N.INSERT:r=Math.min(o.peekLength(),g),i.push(o.next(r));break;case N.DELETE:r=Math.min(g,u.peekLength()),u.next(r),i.delete(r);break;case N.EQUAL:r=Math.min(u.peekLength(),o.peekLength(),g);var x=u.next(r),S=o.next(r);_(x.insert,S.insert)?i.retain(r,y.attributes.diff(x.attributes,S.attributes)):i.push(S).delete(r);break}g-=r}}),i.chop()},f.prototype.eachLine=function(d,t){t=t||`
`;for(var n=y.iterator(this.ops),i=new f,c=0;n.hasNext();){if(n.peekType()!=="insert")return;var u=n.peek(),o=y.length(u)-n.peekLength(),a=typeof u.insert=="string"?u.insert.indexOf(t,o)-o:-1;if(a<0)i.push(n.next());else if(a>0)i.push(n.next(a));else{if(d(i,n.next(1).attributes||{},c)===!1)return;c+=1,i=new f}}i.length()>0&&d(i,{},c)},f.prototype.transform=function(d,t){if(t=!!t,typeof d=="number")return this.transformPosition(d,t);for(var n=y.iterator(this.ops),i=y.iterator(d.ops),c=new f;n.hasNext()||i.hasNext();)if(n.peekType()==="insert"&&(t||i.peekType()!=="insert"))c.retain(y.length(n.next()));else if(i.peekType()==="insert")c.push(i.next());else{var u=Math.min(n.peekLength(),i.peekLength()),o=n.next(u),a=i.next(u);if(o.delete)continue;a.delete?c.push(a):c.retain(u,y.attributes.transform(o.attributes,a.attributes,t))}return c.chop()},f.prototype.transformPosition=function(d,t){t=!!t;for(var n=y.iterator(this.ops),i=0;n.hasNext()&&i<=d;){var c=n.peekLength(),u=n.peekType();if(n.next(),u==="delete"){d-=Math.min(c,d-i);continue}else u==="insert"&&(i<d||!t)&&(d+=c);i+=c}return d},s.exports=f},function(s,l){var h=Object.prototype.hasOwnProperty,N=Object.prototype.toString,_=Object.defineProperty,v=Object.getOwnPropertyDescriptor,y=function(n){return typeof Array.isArray=="function"?Array.isArray(n):N.call(n)==="[object Array]"},w=function(n){if(!n||N.call(n)!=="[object Object]")return!1;var i=h.call(n,"constructor"),c=n.constructor&&n.constructor.prototype&&h.call(n.constructor.prototype,"isPrototypeOf");if(n.constructor&&!i&&!c)return!1;var u;for(u in n);return typeof u>"u"||h.call(n,u)},f=function(n,i){_&&i.name==="__proto__"?_(n,i.name,{enumerable:!0,configurable:!0,value:i.newValue,writable:!0}):n[i.name]=i.newValue},d=function(n,i){if(i==="__proto__")if(h.call(n,i)){if(v)return v(n,i).value}else return;return n[i]};s.exports=function t(){var n,i,c,u,o,a,g=arguments[0],r=1,x=arguments.length,S=!1;for(typeof g=="boolean"&&(S=g,g=arguments[1]||{},r=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});r<x;++r)if(n=arguments[r],n!=null)for(i in n)c=d(g,i),u=d(n,i),g!==u&&(S&&u&&(w(u)||(o=y(u)))?(o?(o=!1,a=c&&y(c)?c:[]):a=c&&w(c)?c:{},f(g,{name:i,newValue:t(S,a,u)})):typeof u<"u"&&f(g,{name:i,newValue:u}));return g}},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BlockEmbed=l.bubbleFormats=void 0;var N=function(){function m(k,E){for(var P=0;P<E.length;P++){var D=E[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,E,P){return E&&m(k.prototype,E),P&&m(k,P),k}}(),_=function m(k,E,P){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,E);if(D===void 0){var B=Object.getPrototypeOf(k);return B===null?void 0:m(B,E,P)}else{if("value"in D)return D.value;var U=D.get;return U===void 0?void 0:U.call(P)}},v=h(3),y=g(v),w=h(2),f=g(w),d=h(0),t=g(d),n=h(16),i=g(n),c=h(6),u=g(c),o=h(7),a=g(o);function g(m){return m&&m.__esModule?m:{default:m}}function r(m,k){if(!(m instanceof k))throw new TypeError("Cannot call a class as a function")}function x(m,k){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:m}function S(m,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);m.prototype=Object.create(k&&k.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(m,k):m.__proto__=k)}var b=1,O=function(m){S(k,m);function k(){return r(this,k),x(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return N(k,[{key:"attach",value:function(){_(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"attach",this).call(this),this.attributes=new t.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,y.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(P,D){var B=t.default.query(P,t.default.Scope.BLOCK_ATTRIBUTE);B!=null&&this.attributes.attribute(B,D)}},{key:"formatAt",value:function(P,D,B,U){this.format(B,U)}},{key:"insertAt",value:function(P,D,B){if(typeof D=="string"&&D.endsWith(`
`)){var U=t.default.create(C.blotName);this.parent.insertBefore(U,P===0?this:this.next),U.insertAt(0,D.slice(0,-1))}else _(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,P,D,B)}}]),k}(t.default.Embed);O.scope=t.default.Scope.BLOCK_BLOT;var C=function(m){S(k,m);function k(E){r(this,k);var P=x(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,E));return P.cache={},P}return N(k,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(t.default.Leaf).reduce(function(P,D){return D.length()===0?P:P.insert(D.value(),p(D))},new f.default).insert(`
`,p(this))),this.cache.delta}},{key:"deleteAt",value:function(P,D){_(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,P,D),this.cache={}}},{key:"formatAt",value:function(P,D,B,U){D<=0||(t.default.query(B,t.default.Scope.BLOCK)?P+D===this.length()&&this.format(B,U):_(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,P,Math.min(D,this.length()-P-1),B,U),this.cache={})}},{key:"insertAt",value:function(P,D,B){if(B!=null)return _(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,P,D,B);if(D.length!==0){var U=D.split(`
`),$=U.shift();$.length>0&&(P<this.length()-1||this.children.tail==null?_(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,Math.min(P,this.length()-1),$):this.children.tail.insertAt(this.children.tail.length(),$),this.cache={});var M=this;U.reduce(function(I,T){return M=M.split(I,!0),M.insertAt(0,T),T.length},P+$.length)}}},{key:"insertBefore",value:function(P,D){var B=this.children.head;_(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,P,D),B instanceof i.default&&B.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=_(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"length",this).call(this)+b),this.cache.length}},{key:"moveChildren",value:function(P,D){_(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"moveChildren",this).call(this,P,D),this.cache={}}},{key:"optimize",value:function(P){_(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,P),this.cache={}}},{key:"path",value:function(P){return _(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,P,!0)}},{key:"removeChild",value:function(P){_(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"removeChild",this).call(this,P),this.cache={}}},{key:"split",value:function(P){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(D&&(P===0||P>=this.length()-b)){var B=this.clone();return P===0?(this.parent.insertBefore(B,this),this):(this.parent.insertBefore(B,this.next),B)}else{var U=_(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"split",this).call(this,P,D);return this.cache={},U}}}]),k}(t.default.Block);C.blotName="block",C.tagName="P",C.defaultChild="break",C.allowedChildren=[u.default,t.default.Embed,a.default];function p(m){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return m==null||(typeof m.formats=="function"&&(k=(0,y.default)(k,m.formats())),m.parent==null||m.parent.blotName=="scroll"||m.parent.statics.scope!==m.statics.scope)?k:p(m.parent,k)}l.bubbleFormats=p,l.BlockEmbed=O,l.default=C},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.overload=l.expandConfig=void 0;var N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},_=function(){function M(I,T){var R=[],q=!0,H=!1,z=void 0;try{for(var L=I[Symbol.iterator](),F;!(q=(F=L.next()).done)&&(R.push(F.value),!(T&&R.length===T));q=!0);}catch(K){H=!0,z=K}finally{try{!q&&L.return&&L.return()}finally{if(H)throw z}}return R}return function(I,T){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return M(I,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function M(I,T){for(var R=0;R<T.length;R++){var q=T[R];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(I,q.key,q)}}return function(I,T,R){return T&&M(I.prototype,T),R&&M(I,R),I}}();h(50);var y=h(2),w=p(y),f=h(14),d=p(f),t=h(8),n=p(t),i=h(9),c=p(i),u=h(0),o=p(u),a=h(15),g=p(a),r=h(3),x=p(r),S=h(10),b=p(S),O=h(34),C=p(O);function p(M){return M&&M.__esModule?M:{default:M}}function m(M,I,T){return I in M?Object.defineProperty(M,I,{value:T,enumerable:!0,configurable:!0,writable:!0}):M[I]=T,M}function k(M,I){if(!(M instanceof I))throw new TypeError("Cannot call a class as a function")}var E=(0,b.default)("quill"),P=function(){v(M,null,[{key:"debug",value:function(T){T===!0&&(T="log"),b.default.level(T)}},{key:"find",value:function(T){return T.__quill||o.default.find(T)}},{key:"import",value:function(T){return this.imports[T]==null&&E.error("Cannot import "+T+". Are you sure it was registered?"),this.imports[T]}},{key:"register",value:function(T,R){var q=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof T!="string"){var z=T.attrName||T.blotName;typeof z=="string"?this.register("formats/"+z,T,R):Object.keys(T).forEach(function(L){q.register(L,T[L],R)})}else this.imports[T]!=null&&!H&&E.warn("Overwriting "+T+" with",R),this.imports[T]=R,(T.startsWith("blots/")||T.startsWith("formats/"))&&R.blotName!=="abstract"?o.default.register(R):T.startsWith("modules")&&typeof R.register=="function"&&R.register()}}]);function M(I){var T=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(k(this,M),this.options=D(I,R),this.container=this.options.container,this.container==null)return E.error("Invalid Quill container",I);this.options.debug&&M.debug(this.options.debug);var q=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new n.default,this.scroll=o.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new g.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(n.default.events.EDITOR_CHANGE,function(z){z===n.default.events.TEXT_CHANGE&&T.root.classList.toggle("ql-blank",T.editor.isBlank())}),this.emitter.on(n.default.events.SCROLL_UPDATE,function(z,L){var F=T.selection.lastRange,K=F&&F.length===0?F.index:void 0;B.call(T,function(){return T.editor.update(null,L,K)},z)});var H=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+q+"<p><br></p></div>");this.setContents(H),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return v(M,[{key:"addContainer",value:function(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof T=="string"){var q=T;T=document.createElement("div"),T.classList.add(q)}return this.container.insertBefore(T,R),T}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(T,R,q){var H=this,z=U(T,R,q),L=_(z,4);return T=L[0],R=L[1],q=L[3],B.call(this,function(){return H.editor.deleteText(T,R)},q,T,-1*R)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(T),this.container.classList.toggle("ql-disabled",!T)}},{key:"focus",value:function(){var T=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=T,this.scrollIntoView()}},{key:"format",value:function(T,R){var q=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n.default.sources.API;return B.call(this,function(){var z=q.getSelection(!0),L=new w.default;if(z==null)return L;if(o.default.query(T,o.default.Scope.BLOCK))L=q.editor.formatLine(z.index,z.length,m({},T,R));else{if(z.length===0)return q.selection.format(T,R),L;L=q.editor.formatText(z.index,z.length,m({},T,R))}return q.setSelection(z,n.default.sources.SILENT),L},H)}},{key:"formatLine",value:function(T,R,q,H,z){var L=this,F=void 0,K=U(T,R,q,H,z),V=_(K,4);return T=V[0],R=V[1],F=V[2],z=V[3],B.call(this,function(){return L.editor.formatLine(T,R,F)},z,T,0)}},{key:"formatText",value:function(T,R,q,H,z){var L=this,F=void 0,K=U(T,R,q,H,z),V=_(K,4);return T=V[0],R=V[1],F=V[2],z=V[3],B.call(this,function(){return L.editor.formatText(T,R,F)},z,T,0)}},{key:"getBounds",value:function(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=void 0;typeof T=="number"?q=this.selection.getBounds(T,R):q=this.selection.getBounds(T.index,T.length);var H=this.container.getBoundingClientRect();return{bottom:q.bottom-H.top,height:q.height,left:q.left-H.left,right:q.right-H.left,top:q.top-H.top,width:q.width}}},{key:"getContents",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-T,q=U(T,R),H=_(q,2);return T=H[0],R=H[1],this.editor.getContents(T,R)}},{key:"getFormat",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof T=="number"?this.editor.getFormat(T,R):this.editor.getFormat(T.index,T.length)}},{key:"getIndex",value:function(T){return T.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(T){return this.scroll.leaf(T)}},{key:"getLine",value:function(T){return this.scroll.line(T)}},{key:"getLines",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof T!="number"?this.scroll.lines(T.index,T.length):this.scroll.lines(T,R)}},{key:"getModule",value:function(T){return this.theme.modules[T]}},{key:"getSelection",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return T&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-T,q=U(T,R),H=_(q,2);return T=H[0],R=H[1],this.editor.getText(T,R)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(T,R,q){var H=this,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:M.sources.API;return B.call(this,function(){return H.editor.insertEmbed(T,R,q)},z,T)}},{key:"insertText",value:function(T,R,q,H,z){var L=this,F=void 0,K=U(T,0,q,H,z),V=_(K,4);return T=V[0],F=V[2],z=V[3],B.call(this,function(){return L.editor.insertText(T,R,F)},z,T,R.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(T,R,q){this.clipboard.dangerouslyPasteHTML(T,R,q)}},{key:"removeFormat",value:function(T,R,q){var H=this,z=U(T,R,q),L=_(z,4);return T=L[0],R=L[1],q=L[3],B.call(this,function(){return H.editor.removeFormat(T,R)},q,T)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(T){var R=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.default.sources.API;return B.call(this,function(){T=new w.default(T);var H=R.getLength(),z=R.editor.deleteText(0,H),L=R.editor.applyDelta(T),F=L.ops[L.ops.length-1];F!=null&&typeof F.insert=="string"&&F.insert[F.insert.length-1]===`
`&&(R.editor.deleteText(R.getLength()-1,1),L.delete(1));var K=z.compose(L);return K},q)}},{key:"setSelection",value:function(T,R,q){if(T==null)this.selection.setRange(null,R||M.sources.API);else{var H=U(T,R,q),z=_(H,4);T=z[0],R=z[1],q=z[3],this.selection.setRange(new a.Range(T,R),q),q!==n.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.default.sources.API,q=new w.default().insert(T);return this.setContents(q,R)}},{key:"update",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.default.sources.USER,R=this.scroll.update(T);return this.selection.update(T),R}},{key:"updateContents",value:function(T){var R=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.default.sources.API;return B.call(this,function(){return T=new w.default(T),R.editor.applyDelta(T,q)},q,!0)}}]),M}();P.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},P.events=n.default.events,P.sources=n.default.sources,P.version="1.3.7",P.imports={delta:w.default,parchment:o.default,"core/module":c.default,"core/theme":C.default};function D(M,I){if(I=(0,x.default)(!0,{container:M,modules:{clipboard:!0,keyboard:!0,history:!0}},I),!I.theme||I.theme===P.DEFAULTS.theme)I.theme=C.default;else if(I.theme=P.import("themes/"+I.theme),I.theme==null)throw new Error("Invalid theme "+I.theme+". Did you register it?");var T=(0,x.default)(!0,{},I.theme.DEFAULTS);[T,I].forEach(function(H){H.modules=H.modules||{},Object.keys(H.modules).forEach(function(z){H.modules[z]===!0&&(H.modules[z]={})})});var R=Object.keys(T.modules).concat(Object.keys(I.modules)),q=R.reduce(function(H,z){var L=P.import("modules/"+z);return L==null?E.error("Cannot load "+z+" module. Are you sure you registered it?"):H[z]=L.DEFAULTS||{},H},{});return I.modules!=null&&I.modules.toolbar&&I.modules.toolbar.constructor!==Object&&(I.modules.toolbar={container:I.modules.toolbar}),I=(0,x.default)(!0,{},P.DEFAULTS,{modules:q},T,I),["bounds","container","scrollingContainer"].forEach(function(H){typeof I[H]=="string"&&(I[H]=document.querySelector(I[H]))}),I.modules=Object.keys(I.modules).reduce(function(H,z){return I.modules[z]&&(H[z]=I.modules[z]),H},{}),I}function B(M,I,T,R){if(this.options.strict&&!this.isEnabled()&&I===n.default.sources.USER)return new w.default;var q=T==null?null:this.getSelection(),H=this.editor.delta,z=M();if(q!=null&&(T===!0&&(T=q.index),R==null?q=$(q,z,I):R!==0&&(q=$(q,T,R,I)),this.setSelection(q,n.default.sources.SILENT)),z.length()>0){var L,F=[n.default.events.TEXT_CHANGE,z,H,I];if((L=this.emitter).emit.apply(L,[n.default.events.EDITOR_CHANGE].concat(F)),I!==n.default.sources.SILENT){var K;(K=this.emitter).emit.apply(K,F)}}return z}function U(M,I,T,R,q){var H={};return typeof M.index=="number"&&typeof M.length=="number"?typeof I!="number"?(q=R,R=T,T=I,I=M.length,M=M.index):(I=M.length,M=M.index):typeof I!="number"&&(q=R,R=T,T=I,I=0),(typeof T>"u"?"undefined":N(T))==="object"?(H=T,q=R):typeof T=="string"&&(R!=null?H[T]=R:q=T),q=q||n.default.sources.API,[M,I,H,q]}function $(M,I,T,R){if(M==null)return null;var q=void 0,H=void 0;if(I instanceof w.default){var z=[M.index,M.index+M.length].map(function(V){return I.transformPosition(V,R!==n.default.sources.USER)}),L=_(z,2);q=L[0],H=L[1]}else{var F=[M.index,M.index+M.length].map(function(V){return V<I||V===I&&R===n.default.sources.USER?V:T>=0?V+T:Math.max(I,V+T)}),K=_(F,2);q=K[0],H=K[1]}return new a.Range(q,H-q)}l.expandConfig=D,l.overload=U,l.default=P},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function u(o,a){for(var g=0;g<a.length;g++){var r=a[g];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,a,g){return a&&u(o.prototype,a),g&&u(o,g),o}}(),_=function u(o,a,g){o===null&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,a);if(r===void 0){var x=Object.getPrototypeOf(o);return x===null?void 0:u(x,a,g)}else{if("value"in r)return r.value;var S=r.get;return S===void 0?void 0:S.call(g)}},v=h(7),y=d(v),w=h(0),f=d(w);function d(u){return u&&u.__esModule?u:{default:u}}function t(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function n(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function i(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var c=function(u){i(o,u);function o(){return t(this,o),n(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return N(o,[{key:"formatAt",value:function(g,r,x,S){if(o.compare(this.statics.blotName,x)<0&&f.default.query(x,f.default.Scope.BLOT)){var b=this.isolate(g,r);S&&b.wrap(x,S)}else _(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"formatAt",this).call(this,g,r,x,S)}},{key:"optimize",value:function(g){if(_(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"optimize",this).call(this,g),this.parent instanceof o&&o.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(g,r){var x=o.order.indexOf(g),S=o.order.indexOf(r);return x>=0||S>=0?x-S:g===r?0:g<r?-1:1}}]),o}(f.default.Inline);c.allowedChildren=[c,f.default.Embed,y.default],c.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],l.default=c},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(0),_=v(N);function v(t){return t&&t.__esModule?t:{default:t}}function y(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function w(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t}function f(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(t){f(n,t);function n(){return y(this,n),w(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return n}(_.default.Text);l.default=d},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function a(g,r){for(var x=0;x<r.length;x++){var S=r[x];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,r,x){return r&&a(g.prototype,r),x&&a(g,x),g}}(),_=function a(g,r,x){g===null&&(g=Function.prototype);var S=Object.getOwnPropertyDescriptor(g,r);if(S===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:a(b,r,x)}else{if("value"in S)return S.value;var O=S.get;return O===void 0?void 0:O.call(x)}},v=h(54),y=d(v),w=h(10),f=d(w);function d(a){return a&&a.__esModule?a:{default:a}}function t(a,g){if(!(a instanceof g))throw new TypeError("Cannot call a class as a function")}function n(a,g){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:a}function i(a,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);a.prototype=Object.create(g&&g.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(a,g):a.__proto__=g)}var c=(0,f.default)("quill:events"),u=["selectionchange","mousedown","mouseup","click"];u.forEach(function(a){document.addEventListener(a,function(){for(var g=arguments.length,r=Array(g),x=0;x<g;x++)r[x]=arguments[x];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(S){if(S.__quill&&S.__quill.emitter){var b;(b=S.__quill.emitter).handleDOM.apply(b,r)}})})});var o=function(a){i(g,a);function g(){t(this,g);var r=n(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return r.listeners={},r.on("error",c.error),r}return N(g,[{key:"emit",value:function(){c.log.apply(c,arguments),_(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(x){for(var S=arguments.length,b=Array(S>1?S-1:0),O=1;O<S;O++)b[O-1]=arguments[O];(this.listeners[x.type]||[]).forEach(function(C){var p=C.node,m=C.handler;(x.target===p||p.contains(x.target))&&m.apply(void 0,[x].concat(b))})}},{key:"listenDOM",value:function(x,S,b){this.listeners[x]||(this.listeners[x]=[]),this.listeners[x].push({node:S,handler:b})}}]),g}(y.default);o.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},o.sources={API:"api",SILENT:"silent",USER:"user"},l.default=o},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});function N(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}var _=function v(y){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N(this,v),this.quill=y,this.options=w};_.DEFAULTS={},l.default=_},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=["error","warn","log","info"],_="warn";function v(w){if(N.indexOf(w)<=N.indexOf(_)){for(var f,d=arguments.length,t=Array(d>1?d-1:0),n=1;n<d;n++)t[n-1]=arguments[n];(f=console)[w].apply(f,t)}}function y(w){return N.reduce(function(f,d){return f[d]=v.bind(console,d,w),f},{})}v.level=y.level=function(w){_=w},l.default=y},function(s,l,h){var N=Array.prototype.slice,_=h(52),v=h(53),y=s.exports=function(t,n,i){return i||(i={}),t===n?!0:t instanceof Date&&n instanceof Date?t.getTime()===n.getTime():!t||!n||typeof t!="object"&&typeof n!="object"?i.strict?t===n:t==n:d(t,n,i)};function w(t){return t==null}function f(t){return!(!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number")}function d(t,n,i){var c,u;if(w(t)||w(n)||t.prototype!==n.prototype)return!1;if(v(t))return v(n)?(t=N.call(t),n=N.call(n),y(t,n,i)):!1;if(f(t)){if(!f(n)||t.length!==n.length)return!1;for(c=0;c<t.length;c++)if(t[c]!==n[c])return!1;return!0}try{var o=_(t),a=_(n)}catch{return!1}if(o.length!=a.length)return!1;for(o.sort(),a.sort(),c=o.length-1;c>=0;c--)if(o[c]!=a[c])return!1;for(c=o.length-1;c>=0;c--)if(u=o[c],!y(t[u],n[u],i))return!1;return typeof t==typeof n}},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(1),_=function(){function v(y,w,f){f===void 0&&(f={}),this.attrName=y,this.keyName=w;var d=N.Scope.TYPE&N.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&N.Scope.LEVEL|d:this.scope=N.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return v.keys=function(y){return[].map.call(y.attributes,function(w){return w.name})},v.prototype.add=function(y,w){return this.canAdd(y,w)?(y.setAttribute(this.keyName,w),!0):!1},v.prototype.canAdd=function(y,w){var f=N.query(y,N.Scope.BLOT&(this.scope|N.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof w=="string"?this.whitelist.indexOf(w.replace(/["']/g,""))>-1:this.whitelist.indexOf(w)>-1},v.prototype.remove=function(y){y.removeAttribute(this.keyName)},v.prototype.value=function(y){var w=y.getAttribute(this.keyName);return this.canAdd(y,w)&&w?w:""},v}();l.default=_},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.Code=void 0;var N=function(){function O(C,p){var m=[],k=!0,E=!1,P=void 0;try{for(var D=C[Symbol.iterator](),B;!(k=(B=D.next()).done)&&(m.push(B.value),!(p&&m.length===p));k=!0);}catch(U){E=!0,P=U}finally{try{!k&&D.return&&D.return()}finally{if(E)throw P}}return m}return function(C,p){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return O(C,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function O(C,p){for(var m=0;m<p.length;m++){var k=p[m];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(C,k.key,k)}}return function(C,p,m){return p&&O(C.prototype,p),m&&O(C,m),C}}(),v=function O(C,p,m){C===null&&(C=Function.prototype);var k=Object.getOwnPropertyDescriptor(C,p);if(k===void 0){var E=Object.getPrototypeOf(C);return E===null?void 0:O(E,p,m)}else{if("value"in k)return k.value;var P=k.get;return P===void 0?void 0:P.call(m)}},y=h(2),w=a(y),f=h(0),d=a(f),t=h(4),n=a(t),i=h(6),c=a(i),u=h(7),o=a(u);function a(O){return O&&O.__esModule?O:{default:O}}function g(O,C){if(!(O instanceof C))throw new TypeError("Cannot call a class as a function")}function r(O,C){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:O}function x(O,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);O.prototype=Object.create(C&&C.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(O,C):O.__proto__=C)}var S=function(O){x(C,O);function C(){return g(this,C),r(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return C}(c.default);S.blotName="code",S.tagName="CODE";var b=function(O){x(C,O);function C(){return g(this,C),r(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return _(C,[{key:"delta",value:function(){var m=this,k=this.domNode.textContent;return k.endsWith(`
`)&&(k=k.slice(0,-1)),k.split(`
`).reduce(function(E,P){return E.insert(P).insert(`
`,m.formats())},new w.default)}},{key:"format",value:function(m,k){if(!(m===this.statics.blotName&&k)){var E=this.descendant(o.default,this.length()-1),P=N(E,1),D=P[0];D!=null&&D.deleteAt(D.length()-1,1),v(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"format",this).call(this,m,k)}}},{key:"formatAt",value:function(m,k,E,P){if(k!==0&&!(d.default.query(E,d.default.Scope.BLOCK)==null||E===this.statics.blotName&&P===this.statics.formats(this.domNode))){var D=this.newlineIndex(m);if(!(D<0||D>=m+k)){var B=this.newlineIndex(m,!0)+1,U=D-B+1,$=this.isolate(B,U),M=$.next;$.format(E,P),M instanceof C&&M.formatAt(0,m-B+k-U,E,P)}}}},{key:"insertAt",value:function(m,k,E){if(E==null){var P=this.descendant(o.default,m),D=N(P,2),B=D[0],U=D[1];B.insertAt(U,k)}}},{key:"length",value:function(){var m=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?m:m+1}},{key:"newlineIndex",value:function(m){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(k)return this.domNode.textContent.slice(0,m).lastIndexOf(`
`);var E=this.domNode.textContent.slice(m).indexOf(`
`);return E>-1?m+E:-1}},{key:"optimize",value:function(m){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),v(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,m);var k=this.next;k!=null&&k.prev===this&&k.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===k.statics.formats(k.domNode)&&(k.optimize(m),k.moveChildren(this),k.remove())}},{key:"replace",value:function(m){v(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replace",this).call(this,m),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(k){var E=d.default.find(k);E==null?k.parentNode.removeChild(k):E instanceof d.default.Embed?E.remove():E.unwrap()})}}],[{key:"create",value:function(m){var k=v(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this,m);return k.setAttribute("spellcheck",!1),k}},{key:"formats",value:function(){return!0}}]),C}(n.default);b.blotName="code-block",b.tagName="PRE",b.TAB="  ",l.Code=S,l.default=b},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},_=function(){function M(I,T){var R=[],q=!0,H=!1,z=void 0;try{for(var L=I[Symbol.iterator](),F;!(q=(F=L.next()).done)&&(R.push(F.value),!(T&&R.length===T));q=!0);}catch(K){H=!0,z=K}finally{try{!q&&L.return&&L.return()}finally{if(H)throw z}}return R}return function(I,T){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return M(I,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function M(I,T){for(var R=0;R<T.length;R++){var q=T[R];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(I,q.key,q)}}return function(I,T,R){return T&&M(I.prototype,T),R&&M(I,R),I}}(),y=h(2),w=k(y),f=h(20),d=k(f),t=h(0),n=k(t),i=h(13),c=k(i),u=h(24),o=k(u),a=h(4),g=k(a),r=h(16),x=k(r),S=h(21),b=k(S),O=h(11),C=k(O),p=h(3),m=k(p);function k(M){return M&&M.__esModule?M:{default:M}}function E(M,I,T){return I in M?Object.defineProperty(M,I,{value:T,enumerable:!0,configurable:!0,writable:!0}):M[I]=T,M}function P(M,I){if(!(M instanceof I))throw new TypeError("Cannot call a class as a function")}var D=/^[ -~]*$/,B=function(){function M(I){P(this,M),this.scroll=I,this.delta=this.getDelta()}return v(M,[{key:"applyDelta",value:function(T){var R=this,q=!1;this.scroll.update();var H=this.scroll.length();return this.scroll.batchStart(),T=$(T),T.reduce(function(z,L){var F=L.retain||L.delete||L.insert.length||1,K=L.attributes||{};if(L.insert!=null){if(typeof L.insert=="string"){var V=L.insert;V.endsWith(`
`)&&q&&(q=!1,V=V.slice(0,-1)),z>=H&&!V.endsWith(`
`)&&(q=!0),R.scroll.insertAt(z,V);var Q=R.scroll.line(z),ee=_(Q,2),te=ee[0],re=ee[1],le=(0,m.default)({},(0,a.bubbleFormats)(te));if(te instanceof g.default){var oe=te.descendant(n.default.Leaf,re),ge=_(oe,1),he=ge[0];le=(0,m.default)(le,(0,a.bubbleFormats)(he))}K=d.default.attributes.diff(le,K)||{}}else if(N(L.insert)==="object"){var G=Object.keys(L.insert)[0];if(G==null)return z;R.scroll.insertAt(z,G,L.insert[G])}H+=F}return Object.keys(K).forEach(function(Z){R.scroll.formatAt(z,F,Z,K[Z])}),z+F},0),T.reduce(function(z,L){return typeof L.delete=="number"?(R.scroll.deleteAt(z,L.delete),z):z+(L.retain||L.insert.length||1)},0),this.scroll.batchEnd(),this.update(T)}},{key:"deleteText",value:function(T,R){return this.scroll.deleteAt(T,R),this.update(new w.default().retain(T).delete(R))}},{key:"formatLine",value:function(T,R){var q=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(H).forEach(function(z){if(!(q.scroll.whitelist!=null&&!q.scroll.whitelist[z])){var L=q.scroll.lines(T,Math.max(R,1)),F=R;L.forEach(function(K){var V=K.length();if(!(K instanceof c.default))K.format(z,H[z]);else{var Q=T-K.offset(q.scroll),ee=K.newlineIndex(Q+F)-Q+1;K.formatAt(Q,ee,z,H[z])}F-=V})}}),this.scroll.optimize(),this.update(new w.default().retain(T).retain(R,(0,b.default)(H)))}},{key:"formatText",value:function(T,R){var q=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(H).forEach(function(z){q.scroll.formatAt(T,R,z,H[z])}),this.update(new w.default().retain(T).retain(R,(0,b.default)(H)))}},{key:"getContents",value:function(T,R){return this.delta.slice(T,T+R)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(T,R){return T.concat(R.delta())},new w.default)}},{key:"getFormat",value:function(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=[],H=[];R===0?this.scroll.path(T).forEach(function(L){var F=_(L,1),K=F[0];K instanceof g.default?q.push(K):K instanceof n.default.Leaf&&H.push(K)}):(q=this.scroll.lines(T,R),H=this.scroll.descendants(n.default.Leaf,T,R));var z=[q,H].map(function(L){if(L.length===0)return{};for(var F=(0,a.bubbleFormats)(L.shift());Object.keys(F).length>0;){var K=L.shift();if(K==null)return F;F=U((0,a.bubbleFormats)(K),F)}return F});return m.default.apply(m.default,z)}},{key:"getText",value:function(T,R){return this.getContents(T,R).filter(function(q){return typeof q.insert=="string"}).map(function(q){return q.insert}).join("")}},{key:"insertEmbed",value:function(T,R,q){return this.scroll.insertAt(T,R,q),this.update(new w.default().retain(T).insert(E({},R,q)))}},{key:"insertText",value:function(T,R){var q=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return R=R.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(T,R),Object.keys(H).forEach(function(z){q.scroll.formatAt(T,R.length,z,H[z])}),this.update(new w.default().retain(T).insert(R,(0,b.default)(H)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var T=this.scroll.children.head;return T.statics.blotName!==g.default.blotName||T.children.length>1?!1:T.children.head instanceof x.default}},{key:"removeFormat",value:function(T,R){var q=this.getText(T,R),H=this.scroll.line(T+R),z=_(H,2),L=z[0],F=z[1],K=0,V=new w.default;L!=null&&(L instanceof c.default?K=L.newlineIndex(F)-F+1:K=L.length()-F,V=L.delta().slice(F,F+K-1).insert(`
`));var Q=this.getContents(T,R+K),ee=Q.diff(new w.default().insert(q).concat(V)),te=new w.default().retain(T).concat(ee);return this.applyDelta(te)}},{key:"update",value:function(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,H=this.delta;if(R.length===1&&R[0].type==="characterData"&&R[0].target.data.match(D)&&n.default.find(R[0].target)){var z=n.default.find(R[0].target),L=(0,a.bubbleFormats)(z),F=z.offset(this.scroll),K=R[0].oldValue.replace(o.default.CONTENTS,""),V=new w.default().insert(K),Q=new w.default().insert(z.value()),ee=new w.default().retain(F).concat(V.diff(Q,q));T=ee.reduce(function(te,re){return re.insert?te.insert(re.insert,L):te.push(re)},new w.default),this.delta=H.compose(T)}else this.delta=this.getDelta(),(!T||!(0,C.default)(H.compose(T),this.delta))&&(T=H.diff(this.delta,q));return T}}]),M}();function U(M,I){return Object.keys(I).reduce(function(T,R){return M[R]==null||(I[R]===M[R]?T[R]=I[R]:Array.isArray(I[R])?I[R].indexOf(M[R])<0&&(T[R]=I[R].concat([M[R]])):T[R]=[I[R],M[R]]),T},{})}function $(M){return M.reduce(function(I,T){if(T.insert===1){var R=(0,b.default)(T.attributes);return delete R.image,I.insert({image:T.attributes.image},R)}if(T.attributes!=null&&(T.attributes.list===!0||T.attributes.bullet===!0)&&(T=(0,b.default)(T),T.attributes.list?T.attributes.list="ordered":(T.attributes.list="bullet",delete T.attributes.bullet)),typeof T.insert=="string"){var q=T.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return I.insert(q,T.attributes)}return I.push(T)},new w.default)}l.default=B},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.Range=void 0;var N=function(){function O(C,p){var m=[],k=!0,E=!1,P=void 0;try{for(var D=C[Symbol.iterator](),B;!(k=(B=D.next()).done)&&(m.push(B.value),!(p&&m.length===p));k=!0);}catch(U){E=!0,P=U}finally{try{!k&&D.return&&D.return()}finally{if(E)throw P}}return m}return function(C,p){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return O(C,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function O(C,p){for(var m=0;m<p.length;m++){var k=p[m];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(C,k.key,k)}}return function(C,p,m){return p&&O(C.prototype,p),m&&O(C,m),C}}(),v=h(0),y=o(v),w=h(21),f=o(w),d=h(11),t=o(d),n=h(8),i=o(n),c=h(10),u=o(c);function o(O){return O&&O.__esModule?O:{default:O}}function a(O){if(Array.isArray(O)){for(var C=0,p=Array(O.length);C<O.length;C++)p[C]=O[C];return p}else return Array.from(O)}function g(O,C){if(!(O instanceof C))throw new TypeError("Cannot call a class as a function")}var r=(0,u.default)("quill:selection"),x=function O(C){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;g(this,O),this.index=C,this.length=p},S=function(){function O(C,p){var m=this;g(this,O),this.emitter=p,this.scroll=C,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=y.default.create("cursor",this),this.lastRange=this.savedRange=new x(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){m.mouseDown||setTimeout(m.update.bind(m,i.default.sources.USER),1)}),this.emitter.on(i.default.events.EDITOR_CHANGE,function(k,E){k===i.default.events.TEXT_CHANGE&&E.length()>0&&m.update(i.default.sources.SILENT)}),this.emitter.on(i.default.events.SCROLL_BEFORE_UPDATE,function(){if(m.hasFocus()){var k=m.getNativeRange();k!=null&&k.start.node!==m.cursor.textNode&&m.emitter.once(i.default.events.SCROLL_UPDATE,function(){try{m.setNativeRange(k.start.node,k.start.offset,k.end.node,k.end.offset)}catch{}})}}),this.emitter.on(i.default.events.SCROLL_OPTIMIZE,function(k,E){if(E.range){var P=E.range,D=P.startNode,B=P.startOffset,U=P.endNode,$=P.endOffset;m.setNativeRange(D,B,U,$)}}),this.update(i.default.sources.SILENT)}return _(O,[{key:"handleComposition",value:function(){var p=this;this.root.addEventListener("compositionstart",function(){p.composing=!0}),this.root.addEventListener("compositionend",function(){if(p.composing=!1,p.cursor.parent){var m=p.cursor.restore();if(!m)return;setTimeout(function(){p.setNativeRange(m.startNode,m.startOffset,m.endNode,m.endOffset)},1)}})}},{key:"handleDragging",value:function(){var p=this;this.emitter.listenDOM("mousedown",document.body,function(){p.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){p.mouseDown=!1,p.update(i.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(p,m){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[p])){this.scroll.update();var k=this.getNativeRange();if(!(k==null||!k.native.collapsed||y.default.query(p,y.default.Scope.BLOCK))){if(k.start.node!==this.cursor.textNode){var E=y.default.find(k.start.node,!1);if(E==null)return;if(E instanceof y.default.Leaf){var P=E.split(k.start.offset);E.parent.insertBefore(this.cursor,P)}else E.insertBefore(this.cursor,k.start.node);this.cursor.attach()}this.cursor.format(p,m),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=this.scroll.length();p=Math.min(p,k-1),m=Math.min(p+m,k-1)-p;var E=void 0,P=this.scroll.leaf(p),D=N(P,2),B=D[0],U=D[1];if(B==null)return null;var $=B.position(U,!0),M=N($,2);E=M[0],U=M[1];var I=document.createRange();if(m>0){I.setStart(E,U);var T=this.scroll.leaf(p+m),R=N(T,2);if(B=R[0],U=R[1],B==null)return null;var q=B.position(U,!0),H=N(q,2);return E=H[0],U=H[1],I.setEnd(E,U),I.getBoundingClientRect()}else{var z="left",L=void 0;return E instanceof Text?(U<E.data.length?(I.setStart(E,U),I.setEnd(E,U+1)):(I.setStart(E,U-1),I.setEnd(E,U),z="right"),L=I.getBoundingClientRect()):(L=B.domNode.getBoundingClientRect(),U>0&&(z="right")),{bottom:L.top+L.height,height:L.height,left:L[z],right:L[z],top:L.top,width:0}}}},{key:"getNativeRange",value:function(){var p=document.getSelection();if(p==null||p.rangeCount<=0)return null;var m=p.getRangeAt(0);if(m==null)return null;var k=this.normalizeNative(m);return r.info("getNativeRange",k),k}},{key:"getRange",value:function(){var p=this.getNativeRange();if(p==null)return[null,null];var m=this.normalizedToRange(p);return[m,p]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(p){var m=this,k=[[p.start.node,p.start.offset]];p.native.collapsed||k.push([p.end.node,p.end.offset]);var E=k.map(function(B){var U=N(B,2),$=U[0],M=U[1],I=y.default.find($,!0),T=I.offset(m.scroll);return M===0?T:I instanceof y.default.Container?T+I.length():T+I.index($,M)}),P=Math.min(Math.max.apply(Math,a(E)),this.scroll.length()-1),D=Math.min.apply(Math,[P].concat(a(E)));return new x(D,P-D)}},{key:"normalizeNative",value:function(p){if(!b(this.root,p.startContainer)||!p.collapsed&&!b(this.root,p.endContainer))return null;var m={start:{node:p.startContainer,offset:p.startOffset},end:{node:p.endContainer,offset:p.endOffset},native:p};return[m.start,m.end].forEach(function(k){for(var E=k.node,P=k.offset;!(E instanceof Text)&&E.childNodes.length>0;)if(E.childNodes.length>P)E=E.childNodes[P],P=0;else if(E.childNodes.length===P)E=E.lastChild,P=E instanceof Text?E.data.length:E.childNodes.length+1;else break;k.node=E,k.offset=P}),m}},{key:"rangeToNative",value:function(p){var m=this,k=p.collapsed?[p.index]:[p.index,p.index+p.length],E=[],P=this.scroll.length();return k.forEach(function(D,B){D=Math.min(P-1,D);var U=void 0,$=m.scroll.leaf(D),M=N($,2),I=M[0],T=M[1],R=I.position(T,B!==0),q=N(R,2);U=q[0],T=q[1],E.push(U,T)}),E.length<2&&(E=E.concat(E)),E}},{key:"scrollIntoView",value:function(p){var m=this.lastRange;if(m!=null){var k=this.getBounds(m.index,m.length);if(k!=null){var E=this.scroll.length()-1,P=this.scroll.line(Math.min(m.index,E)),D=N(P,1),B=D[0],U=B;if(m.length>0){var $=this.scroll.line(Math.min(m.index+m.length,E)),M=N($,1);U=M[0]}if(!(B==null||U==null)){var I=p.getBoundingClientRect();k.top<I.top?p.scrollTop-=I.top-k.top:k.bottom>I.bottom&&(p.scrollTop+=k.bottom-I.bottom)}}}}},{key:"setNativeRange",value:function(p,m){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:m,P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(r.info("setNativeRange",p,m,k,E),!(p!=null&&(this.root.parentNode==null||p.parentNode==null||k.parentNode==null))){var D=document.getSelection();if(D!=null)if(p!=null){this.hasFocus()||this.root.focus();var B=(this.getNativeRange()||{}).native;if(B==null||P||p!==B.startContainer||m!==B.startOffset||k!==B.endContainer||E!==B.endOffset){p.tagName=="BR"&&(m=[].indexOf.call(p.parentNode.childNodes,p),p=p.parentNode),k.tagName=="BR"&&(E=[].indexOf.call(k.parentNode.childNodes,k),k=k.parentNode);var U=document.createRange();U.setStart(p,m),U.setEnd(k,E),D.removeAllRanges(),D.addRange(U)}}else D.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.default.sources.API;if(typeof m=="string"&&(k=m,m=!1),r.info("setRange",p),p!=null){var E=this.rangeToNative(p);this.setNativeRange.apply(this,a(E).concat([m]))}else this.setNativeRange(null);this.update(k)}},{key:"update",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i.default.sources.USER,m=this.lastRange,k=this.getRange(),E=N(k,2),P=E[0],D=E[1];if(this.lastRange=P,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,t.default)(m,this.lastRange)){var B;!this.composing&&D!=null&&D.native.collapsed&&D.start.node!==this.cursor.textNode&&this.cursor.restore();var U=[i.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(m),p];if((B=this.emitter).emit.apply(B,[i.default.events.EDITOR_CHANGE].concat(U)),p!==i.default.sources.SILENT){var $;($=this.emitter).emit.apply($,U)}}}}]),O}();function b(O,C){try{C.parentNode}catch{return!1}return C instanceof Text&&(C=C.parentNode),O.contains(C)}l.Range=x,l.default=S},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function i(c,u){for(var o=0;o<u.length;o++){var a=u[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}}return function(c,u,o){return u&&i(c.prototype,u),o&&i(c,o),c}}(),_=function i(c,u,o){c===null&&(c=Function.prototype);var a=Object.getOwnPropertyDescriptor(c,u);if(a===void 0){var g=Object.getPrototypeOf(c);return g===null?void 0:i(g,u,o)}else{if("value"in a)return a.value;var r=a.get;return r===void 0?void 0:r.call(o)}},v=h(0),y=w(v);function w(i){return i&&i.__esModule?i:{default:i}}function f(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")}function d(i,c){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:i}function t(i,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);i.prototype=Object.create(c&&c.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(i,c):i.__proto__=c)}var n=function(i){t(c,i);function c(){return f(this,c),d(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return N(c,[{key:"insertInto",value:function(o,a){o.children.length===0?_(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"insertInto",this).call(this,o,a):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),c}(y.default.Embed);n.blotName="break",n.tagName="BR",l.default=n},function(s,l,h){var N=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])};return function(t,n){d(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=h(44),v=h(30),y=h(1),w=function(d){N(t,d);function t(n){var i=d.call(this,n)||this;return i.build(),i}return t.prototype.appendChild=function(n){this.insertBefore(n)},t.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(n){n.attach()})},t.prototype.build=function(){var n=this;this.children=new _.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(i){try{var c=f(i);n.insertBefore(c,n.children.head||void 0)}catch(u){if(u instanceof y.ParchmentError)return;throw u}})},t.prototype.deleteAt=function(n,i){if(n===0&&i===this.length())return this.remove();this.children.forEachAt(n,i,function(c,u,o){c.deleteAt(u,o)})},t.prototype.descendant=function(n,i){var c=this.children.find(i),u=c[0],o=c[1];return n.blotName==null&&n(u)||n.blotName!=null&&u instanceof n?[u,o]:u instanceof t?u.descendant(n,o):[null,-1]},t.prototype.descendants=function(n,i,c){i===void 0&&(i=0),c===void 0&&(c=Number.MAX_VALUE);var u=[],o=c;return this.children.forEachAt(i,c,function(a,g,r){(n.blotName==null&&n(a)||n.blotName!=null&&a instanceof n)&&u.push(a),a instanceof t&&(u=u.concat(a.descendants(n,g,o))),o-=r}),u},t.prototype.detach=function(){this.children.forEach(function(n){n.detach()}),d.prototype.detach.call(this)},t.prototype.formatAt=function(n,i,c,u){this.children.forEachAt(n,i,function(o,a,g){o.formatAt(a,g,c,u)})},t.prototype.insertAt=function(n,i,c){var u=this.children.find(n),o=u[0],a=u[1];if(o)o.insertAt(a,i,c);else{var g=c==null?y.create("text",i):y.create(i,c);this.appendChild(g)}},t.prototype.insertBefore=function(n,i){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(c){return n instanceof c}))throw new y.ParchmentError("Cannot insert "+n.statics.blotName+" into "+this.statics.blotName);n.insertInto(this,i)},t.prototype.length=function(){return this.children.reduce(function(n,i){return n+i.length()},0)},t.prototype.moveChildren=function(n,i){this.children.forEach(function(c){n.insertBefore(c,i)})},t.prototype.optimize=function(n){if(d.prototype.optimize.call(this,n),this.children.length===0)if(this.statics.defaultChild!=null){var i=y.create(this.statics.defaultChild);this.appendChild(i),i.optimize(n)}else this.remove()},t.prototype.path=function(n,i){i===void 0&&(i=!1);var c=this.children.find(n,i),u=c[0],o=c[1],a=[[this,n]];return u instanceof t?a.concat(u.path(o,i)):(u!=null&&a.push([u,o]),a)},t.prototype.removeChild=function(n){this.children.remove(n)},t.prototype.replace=function(n){n instanceof t&&n.moveChildren(this),d.prototype.replace.call(this,n)},t.prototype.split=function(n,i){if(i===void 0&&(i=!1),!i){if(n===0)return this;if(n===this.length())return this.next}var c=this.clone();return this.parent.insertBefore(c,this.next),this.children.forEachAt(n,this.length(),function(u,o,a){u=u.split(o,i),c.appendChild(u)}),c},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(n,i){var c=this,u=[],o=[];n.forEach(function(a){a.target===c.domNode&&a.type==="childList"&&(u.push.apply(u,a.addedNodes),o.push.apply(o,a.removedNodes))}),o.forEach(function(a){if(!(a.parentNode!=null&&a.tagName!=="IFRAME"&&document.body.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var g=y.find(a);g!=null&&(g.domNode.parentNode==null||g.domNode.parentNode===c.domNode)&&g.detach()}}),u.filter(function(a){return a.parentNode==c.domNode}).sort(function(a,g){return a===g?0:a.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(a){var g=null;a.nextSibling!=null&&(g=y.find(a.nextSibling));var r=f(a);(r.next!=g||r.next==null)&&(r.parent!=null&&r.parent.removeChild(c),c.insertBefore(r,g||void 0))})},t}(v.default);function f(d){var t=y.find(d);if(t==null)try{t=y.create(d)}catch{t=y.create(y.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(i){t.domNode.appendChild(i)}),d.parentNode&&d.parentNode.replaceChild(t.domNode,d),t.attach()}return t}l.default=w},function(s,l,h){var N=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])};return function(t,n){d(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=h(12),v=h(31),y=h(17),w=h(1),f=function(d){N(t,d);function t(n){var i=d.call(this,n)||this;return i.attributes=new v.default(i.domNode),i}return t.formats=function(n){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return n.tagName.toLowerCase()},t.prototype.format=function(n,i){var c=w.query(n);c instanceof _.default?this.attributes.attribute(c,i):i&&c!=null&&(n!==this.statics.blotName||this.formats()[n]!==i)&&this.replaceWith(n,i)},t.prototype.formats=function(){var n=this.attributes.values(),i=this.statics.formats(this.domNode);return i!=null&&(n[this.statics.blotName]=i),n},t.prototype.replaceWith=function(n,i){var c=d.prototype.replaceWith.call(this,n,i);return this.attributes.copy(c),c},t.prototype.update=function(n,i){var c=this;d.prototype.update.call(this,n,i),n.some(function(u){return u.target===c.domNode&&u.type==="attributes"})&&this.attributes.build()},t.prototype.wrap=function(n,i){var c=d.prototype.wrap.call(this,n,i);return c instanceof t&&c.statics.scope===this.statics.scope&&this.attributes.move(c),c},t}(y.default);l.default=f},function(s,l,h){var N=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var t in d)d.hasOwnProperty(t)&&(f[t]=d[t])};return function(f,d){w(f,d);function t(){this.constructor=f}f.prototype=d===null?Object.create(d):(t.prototype=d.prototype,new t)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=h(30),v=h(1),y=function(w){N(f,w);function f(){return w!==null&&w.apply(this,arguments)||this}return f.value=function(d){return!0},f.prototype.index=function(d,t){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},f.prototype.position=function(d,t){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(n+=1),[this.parent.domNode,n]},f.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},f.scope=v.Scope.INLINE_BLOT,f}(_.default);l.default=y},function(s,l,h){var N=h(11),_=h(3),v={attributes:{compose:function(w,f,d){typeof w!="object"&&(w={}),typeof f!="object"&&(f={});var t=_(!0,{},f);d||(t=Object.keys(t).reduce(function(i,c){return t[c]!=null&&(i[c]=t[c]),i},{}));for(var n in w)w[n]!==void 0&&f[n]===void 0&&(t[n]=w[n]);return Object.keys(t).length>0?t:void 0},diff:function(w,f){typeof w!="object"&&(w={}),typeof f!="object"&&(f={});var d=Object.keys(w).concat(Object.keys(f)).reduce(function(t,n){return N(w[n],f[n])||(t[n]=f[n]===void 0?null:f[n]),t},{});return Object.keys(d).length>0?d:void 0},transform:function(w,f,d){if(typeof w!="object")return f;if(typeof f=="object"){if(!d)return f;var t=Object.keys(f).reduce(function(n,i){return w[i]===void 0&&(n[i]=f[i]),n},{});return Object.keys(t).length>0?t:void 0}}},iterator:function(w){return new y(w)},length:function(w){return typeof w.delete=="number"?w.delete:typeof w.retain=="number"?w.retain:typeof w.insert=="string"?w.insert.length:1}};function y(w){this.ops=w,this.index=0,this.offset=0}y.prototype.hasNext=function(){return this.peekLength()<1/0},y.prototype.next=function(w){w||(w=1/0);var f=this.ops[this.index];if(f){var d=this.offset,t=v.length(f);if(w>=t-d?(w=t-d,this.index+=1,this.offset=0):this.offset+=w,typeof f.delete=="number")return{delete:w};var n={};return f.attributes&&(n.attributes=f.attributes),typeof f.retain=="number"?n.retain=w:typeof f.insert=="string"?n.insert=f.insert.substr(d,w):n.insert=f.insert,n}else return{retain:1/0}},y.prototype.peek=function(){return this.ops[this.index]},y.prototype.peekLength=function(){return this.ops[this.index]?v.length(this.ops[this.index])-this.offset:1/0},y.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},y.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var w=this.offset,f=this.index,d=this.next(),t=this.ops.slice(this.index);return this.offset=w,this.index=f,[d].concat(t)}else return[]},s.exports=v},function(s,l){var h=function(){function N(c,u){return u!=null&&c instanceof u}var _;try{_=Map}catch{_=function(){}}var v;try{v=Set}catch{v=function(){}}var y;try{y=Promise}catch{y=function(){}}function w(c,u,o,a,g){typeof u=="object"&&(o=u.depth,a=u.prototype,g=u.includeNonEnumerable,u=u.circular);var r=[],x=[],S=typeof Buffer<"u";typeof u>"u"&&(u=!0),typeof o>"u"&&(o=1/0);function b(O,C){if(O===null)return null;if(C===0)return O;var p,m;if(typeof O!="object")return O;if(N(O,_))p=new _;else if(N(O,v))p=new v;else if(N(O,y))p=new y(function(I,T){O.then(function(R){I(b(R,C-1))},function(R){T(b(R,C-1))})});else if(w.__isArray(O))p=[];else if(w.__isRegExp(O))p=new RegExp(O.source,i(O)),O.lastIndex&&(p.lastIndex=O.lastIndex);else if(w.__isDate(O))p=new Date(O.getTime());else{if(S&&Buffer.isBuffer(O))return Buffer.allocUnsafe?p=Buffer.allocUnsafe(O.length):p=new Buffer(O.length),O.copy(p),p;N(O,Error)?p=Object.create(O):typeof a>"u"?(m=Object.getPrototypeOf(O),p=Object.create(m)):(p=Object.create(a),m=a)}if(u){var k=r.indexOf(O);if(k!=-1)return x[k];r.push(O),x.push(p)}N(O,_)&&O.forEach(function(I,T){var R=b(T,C-1),q=b(I,C-1);p.set(R,q)}),N(O,v)&&O.forEach(function(I){var T=b(I,C-1);p.add(T)});for(var E in O){var P;m&&(P=Object.getOwnPropertyDescriptor(m,E)),!(P&&P.set==null)&&(p[E]=b(O[E],C-1))}if(Object.getOwnPropertySymbols)for(var D=Object.getOwnPropertySymbols(O),E=0;E<D.length;E++){var B=D[E],U=Object.getOwnPropertyDescriptor(O,B);U&&!U.enumerable&&!g||(p[B]=b(O[B],C-1),U.enumerable||Object.defineProperty(p,B,{enumerable:!1}))}if(g)for(var $=Object.getOwnPropertyNames(O),E=0;E<$.length;E++){var M=$[E],U=Object.getOwnPropertyDescriptor(O,M);U&&U.enumerable||(p[M]=b(O[M],C-1),Object.defineProperty(p,M,{enumerable:!1}))}return p}return b(c,o)}w.clonePrototype=function(u){if(u===null)return null;var o=function(){};return o.prototype=u,new o};function f(c){return Object.prototype.toString.call(c)}w.__objToStr=f;function d(c){return typeof c=="object"&&f(c)==="[object Date]"}w.__isDate=d;function t(c){return typeof c=="object"&&f(c)==="[object Array]"}w.__isArray=t;function n(c){return typeof c=="object"&&f(c)==="[object RegExp]"}w.__isRegExp=n;function i(c){var u="";return c.global&&(u+="g"),c.ignoreCase&&(u+="i"),c.multiline&&(u+="m"),u}return w.__getRegExpFlags=i,w}();typeof s=="object"&&s.exports&&(s.exports=h)},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function p(m,k){var E=[],P=!0,D=!1,B=void 0;try{for(var U=m[Symbol.iterator](),$;!(P=($=U.next()).done)&&(E.push($.value),!(k&&E.length===k));P=!0);}catch(M){D=!0,B=M}finally{try{!P&&U.return&&U.return()}finally{if(D)throw B}}return E}return function(m,k){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return p(m,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function p(m,k){for(var E=0;E<k.length;E++){var P=k[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(m,P.key,P)}}return function(m,k,E){return k&&p(m.prototype,k),E&&p(m,E),m}}(),v=function p(m,k,E){m===null&&(m=Function.prototype);var P=Object.getOwnPropertyDescriptor(m,k);if(P===void 0){var D=Object.getPrototypeOf(m);return D===null?void 0:p(D,k,E)}else{if("value"in P)return P.value;var B=P.get;return B===void 0?void 0:B.call(E)}},y=h(0),w=r(y),f=h(8),d=r(f),t=h(4),n=r(t),i=h(16),c=r(i),u=h(13),o=r(u),a=h(25),g=r(a);function r(p){return p&&p.__esModule?p:{default:p}}function x(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function S(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function b(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}function O(p){return p instanceof n.default||p instanceof t.BlockEmbed}var C=function(p){b(m,p);function m(k,E){x(this,m);var P=S(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,k));return P.emitter=E.emitter,Array.isArray(E.whitelist)&&(P.whitelist=E.whitelist.reduce(function(D,B){return D[B]=!0,D},{})),P.domNode.addEventListener("DOMNodeInserted",function(){}),P.optimize(),P.enable(),P}return _(m,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(E,P){var D=this.line(E),B=N(D,2),U=B[0],$=B[1],M=this.line(E+P),I=N(M,1),T=I[0];if(v(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"deleteAt",this).call(this,E,P),T!=null&&U!==T&&$>0){if(U instanceof t.BlockEmbed||T instanceof t.BlockEmbed){this.optimize();return}if(U instanceof o.default){var R=U.newlineIndex(U.length(),!0);if(R>-1&&(U=U.split(R+1),U===T)){this.optimize();return}}else if(T instanceof o.default){var q=T.newlineIndex(0);q>-1&&T.split(q+1)}var H=T.children.head instanceof c.default?null:T.children.head;U.moveChildren(T,H),U.remove()}this.optimize()}},{key:"enable",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",E)}},{key:"formatAt",value:function(E,P,D,B){this.whitelist!=null&&!this.whitelist[D]||(v(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,E,P,D,B),this.optimize())}},{key:"insertAt",value:function(E,P,D){if(!(D!=null&&this.whitelist!=null&&!this.whitelist[P])){if(E>=this.length())if(D==null||w.default.query(P,w.default.Scope.BLOCK)==null){var B=w.default.create(this.statics.defaultChild);this.appendChild(B),D==null&&P.endsWith(`
`)&&(P=P.slice(0,-1)),B.insertAt(0,P,D)}else{var U=w.default.create(P,D);this.appendChild(U)}else v(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertAt",this).call(this,E,P,D);this.optimize()}}},{key:"insertBefore",value:function(E,P){if(E.statics.scope===w.default.Scope.INLINE_BLOT){var D=w.default.create(this.statics.defaultChild);D.appendChild(E),E=D}v(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertBefore",this).call(this,E,P)}},{key:"leaf",value:function(E){return this.path(E).pop()||[null,-1]}},{key:"line",value:function(E){return E===this.length()?this.line(E-1):this.descendant(O,E)}},{key:"lines",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,D=function B(U,$,M){var I=[],T=M;return U.children.forEachAt($,M,function(R,q,H){O(R)?I.push(R):R instanceof w.default.Container&&(I=I.concat(B(R,q,T))),T-=H}),I};return D(this,E,P)}},{key:"optimize",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(v(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,E,P),E.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,E,P))}},{key:"path",value:function(E){return v(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"path",this).call(this,E).slice(1)}},{key:"update",value:function(E){if(this.batch!==!0){var P=d.default.sources.USER;typeof E=="string"&&(P=E),Array.isArray(E)||(E=this.observer.takeRecords()),E.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,P,E),v(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"update",this).call(this,E.concat([])),E.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,P,E)}}}]),m}(w.default.Scroll);C.blotName="scroll",C.className="ql-editor",C.tagName="DIV",C.defaultChild="block",C.allowedChildren=[n.default,t.BlockEmbed,g.default],l.default=C},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.SHORTKEY=l.default=void 0;var N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},_=function(){function L(F,K){var V=[],Q=!0,ee=!1,te=void 0;try{for(var re=F[Symbol.iterator](),le;!(Q=(le=re.next()).done)&&(V.push(le.value),!(K&&V.length===K));Q=!0);}catch(oe){ee=!0,te=oe}finally{try{!Q&&re.return&&re.return()}finally{if(ee)throw te}}return V}return function(F,K){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return L(F,K);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function L(F,K){for(var V=0;V<K.length;V++){var Q=K[V];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(F,Q.key,Q)}}return function(F,K,V){return K&&L(F.prototype,K),V&&L(F,V),F}}(),y=h(21),w=p(y),f=h(11),d=p(f),t=h(3),n=p(t),i=h(2),c=p(i),u=h(20),o=p(u),a=h(0),g=p(a),r=h(5),x=p(r),S=h(10),b=p(S),O=h(9),C=p(O);function p(L){return L&&L.__esModule?L:{default:L}}function m(L,F,K){return F in L?Object.defineProperty(L,F,{value:K,enumerable:!0,configurable:!0,writable:!0}):L[F]=K,L}function k(L,F){if(!(L instanceof F))throw new TypeError("Cannot call a class as a function")}function E(L,F){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:L}function P(L,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);L.prototype=Object.create(F&&F.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(L,F):L.__proto__=F)}var D=(0,b.default)("quill:keyboard"),B=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",U=function(L){P(F,L),v(F,null,[{key:"match",value:function(V,Q){return Q=z(Q),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ee){return!!Q[ee]!==V[ee]&&Q[ee]!==null})?!1:Q.key===(V.which||V.keyCode)}}]);function F(K,V){k(this,F);var Q=E(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,K,V));return Q.bindings={},Object.keys(Q.options.bindings).forEach(function(ee){ee==="list autofill"&&K.scroll.whitelist!=null&&!K.scroll.whitelist.list||Q.options.bindings[ee]&&Q.addBinding(Q.options.bindings[ee])}),Q.addBinding({key:F.keys.ENTER,shiftKey:null},R),Q.addBinding({key:F.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Q.addBinding({key:F.keys.BACKSPACE},{collapsed:!0},M),Q.addBinding({key:F.keys.DELETE},{collapsed:!0},I)):(Q.addBinding({key:F.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},M),Q.addBinding({key:F.keys.DELETE},{collapsed:!0,suffix:/^.?$/},I)),Q.addBinding({key:F.keys.BACKSPACE},{collapsed:!1},T),Q.addBinding({key:F.keys.DELETE},{collapsed:!1},T),Q.addBinding({key:F.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},M),Q.listen(),Q}return v(F,[{key:"addBinding",value:function(V){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},te=z(V);if(te==null||te.key==null)return D.warn("Attempted to add invalid keyboard binding",te);typeof Q=="function"&&(Q={handler:Q}),typeof ee=="function"&&(ee={handler:ee}),te=(0,n.default)(te,Q,ee),this.bindings[te.key]=this.bindings[te.key]||[],this.bindings[te.key].push(te)}},{key:"listen",value:function(){var V=this;this.quill.root.addEventListener("keydown",function(Q){if(!Q.defaultPrevented){var ee=Q.which||Q.keyCode,te=(V.bindings[ee]||[]).filter(function(fe){return F.match(Q,fe)});if(te.length!==0){var re=V.quill.getSelection();if(!(re==null||!V.quill.hasFocus())){var le=V.quill.getLine(re.index),oe=_(le,2),ge=oe[0],he=oe[1],G=V.quill.getLeaf(re.index),Z=_(G,2),X=Z[0],J=Z[1],Y=re.length===0?[X,J]:V.quill.getLeaf(re.index+re.length),se=_(Y,2),ae=se[0],ie=se[1],ve=X instanceof g.default.Text?X.value().slice(0,J):"",Ne=ae instanceof g.default.Text?ae.value().slice(ie):"",ue={collapsed:re.length===0,empty:re.length===0&&ge.length()<=1,format:V.quill.getFormat(re),offset:he,prefix:ve,suffix:Ne},un=te.some(function(fe){if(fe.collapsed!=null&&fe.collapsed!==ue.collapsed||fe.empty!=null&&fe.empty!==ue.empty||fe.offset!=null&&fe.offset!==ue.offset)return!1;if(Array.isArray(fe.format)){if(fe.format.every(function(_e){return ue.format[_e]==null}))return!1}else if(N(fe.format)==="object"&&!Object.keys(fe.format).every(function(_e){return fe.format[_e]===!0?ue.format[_e]!=null:fe.format[_e]===!1?ue.format[_e]==null:(0,d.default)(fe.format[_e],ue.format[_e])}))return!1;return fe.prefix!=null&&!fe.prefix.test(ue.prefix)||fe.suffix!=null&&!fe.suffix.test(ue.suffix)?!1:fe.handler.call(V,re,ue)!==!0});un&&Q.preventDefault()}}}})}}]),F}(C.default);U.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},U.DEFAULTS={bindings:{bold:H("bold"),italic:H("italic"),underline:H("underline"),indent:{key:U.keys.TAB,format:["blockquote","indent","list"],handler:function(F,K){if(K.collapsed&&K.offset!==0)return!0;this.quill.format("indent","+1",x.default.sources.USER)}},outdent:{key:U.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(F,K){if(K.collapsed&&K.offset!==0)return!0;this.quill.format("indent","-1",x.default.sources.USER)}},"outdent backspace":{key:U.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(F,K){K.format.indent!=null?this.quill.format("indent","-1",x.default.sources.USER):K.format.list!=null&&this.quill.format("list",!1,x.default.sources.USER)}},"indent code-block":q(!0),"outdent code-block":q(!1),"remove tab":{key:U.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(F){this.quill.deleteText(F.index-1,1,x.default.sources.USER)}},tab:{key:U.keys.TAB,handler:function(F){this.quill.history.cutoff();var K=new c.default().retain(F.index).delete(F.length).insert("	");this.quill.updateContents(K,x.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(F.index+1,x.default.sources.SILENT)}},"list empty enter":{key:U.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(F,K){this.quill.format("list",!1,x.default.sources.USER),K.format.indent&&this.quill.format("indent",!1,x.default.sources.USER)}},"checklist enter":{key:U.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(F){var K=this.quill.getLine(F.index),V=_(K,2),Q=V[0],ee=V[1],te=(0,n.default)({},Q.formats(),{list:"checked"}),re=new c.default().retain(F.index).insert(`
`,te).retain(Q.length()-ee-1).retain(1,{list:"unchecked"});this.quill.updateContents(re,x.default.sources.USER),this.quill.setSelection(F.index+1,x.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:U.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(F,K){var V=this.quill.getLine(F.index),Q=_(V,2),ee=Q[0],te=Q[1],re=new c.default().retain(F.index).insert(`
`,K.format).retain(ee.length()-te-1).retain(1,{header:null});this.quill.updateContents(re,x.default.sources.USER),this.quill.setSelection(F.index+1,x.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(F,K){var V=K.prefix.length,Q=this.quill.getLine(F.index),ee=_(Q,2),te=ee[0],re=ee[1];if(re>V)return!0;var le=void 0;switch(K.prefix.trim()){case"[]":case"[ ]":le="unchecked";break;case"[x]":le="checked";break;case"-":case"*":le="bullet";break;default:le="ordered"}this.quill.insertText(F.index," ",x.default.sources.USER),this.quill.history.cutoff();var oe=new c.default().retain(F.index-re).delete(V+1).retain(te.length()-2-re).retain(1,{list:le});this.quill.updateContents(oe,x.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(F.index-V,x.default.sources.SILENT)}},"code exit":{key:U.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(F){var K=this.quill.getLine(F.index),V=_(K,2),Q=V[0],ee=V[1],te=new c.default().retain(F.index+Q.length()-ee-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(te,x.default.sources.USER)}},"embed left":$(U.keys.LEFT,!1),"embed left shift":$(U.keys.LEFT,!0),"embed right":$(U.keys.RIGHT,!1),"embed right shift":$(U.keys.RIGHT,!0)}};function $(L,F){var K,V=L===U.keys.LEFT?"prefix":"suffix";return K={key:L,shiftKey:F,altKey:null},m(K,V,/^$/),m(K,"handler",function(ee){var te=ee.index;L===U.keys.RIGHT&&(te+=ee.length+1);var re=this.quill.getLeaf(te),le=_(re,1),oe=le[0];return oe instanceof g.default.Embed?(L===U.keys.LEFT?F?this.quill.setSelection(ee.index-1,ee.length+1,x.default.sources.USER):this.quill.setSelection(ee.index-1,x.default.sources.USER):F?this.quill.setSelection(ee.index,ee.length+1,x.default.sources.USER):this.quill.setSelection(ee.index+ee.length+1,x.default.sources.USER),!1):!0}),K}function M(L,F){if(!(L.index===0||this.quill.getLength()<=1)){var K=this.quill.getLine(L.index),V=_(K,1),Q=V[0],ee={};if(F.offset===0){var te=this.quill.getLine(L.index-1),re=_(te,1),le=re[0];if(le!=null&&le.length()>1){var oe=Q.formats(),ge=this.quill.getFormat(L.index-1,1);ee=o.default.attributes.diff(oe,ge)||{}}}var he=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(F.prefix)?2:1;this.quill.deleteText(L.index-he,he,x.default.sources.USER),Object.keys(ee).length>0&&this.quill.formatLine(L.index-he,he,ee,x.default.sources.USER),this.quill.focus()}}function I(L,F){var K=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(F.suffix)?2:1;if(!(L.index>=this.quill.getLength()-K)){var V={},Q=0,ee=this.quill.getLine(L.index),te=_(ee,1),re=te[0];if(F.offset>=re.length()-1){var le=this.quill.getLine(L.index+1),oe=_(le,1),ge=oe[0];if(ge){var he=re.formats(),G=this.quill.getFormat(L.index,1);V=o.default.attributes.diff(he,G)||{},Q=ge.length()}}this.quill.deleteText(L.index,K,x.default.sources.USER),Object.keys(V).length>0&&this.quill.formatLine(L.index+Q-1,K,V,x.default.sources.USER)}}function T(L){var F=this.quill.getLines(L),K={};if(F.length>1){var V=F[0].formats(),Q=F[F.length-1].formats();K=o.default.attributes.diff(Q,V)||{}}this.quill.deleteText(L,x.default.sources.USER),Object.keys(K).length>0&&this.quill.formatLine(L.index,1,K,x.default.sources.USER),this.quill.setSelection(L.index,x.default.sources.SILENT),this.quill.focus()}function R(L,F){var K=this;L.length>0&&this.quill.scroll.deleteAt(L.index,L.length);var V=Object.keys(F.format).reduce(function(Q,ee){return g.default.query(ee,g.default.Scope.BLOCK)&&!Array.isArray(F.format[ee])&&(Q[ee]=F.format[ee]),Q},{});this.quill.insertText(L.index,`
`,V,x.default.sources.USER),this.quill.setSelection(L.index+1,x.default.sources.SILENT),this.quill.focus(),Object.keys(F.format).forEach(function(Q){V[Q]==null&&(Array.isArray(F.format[Q])||Q!=="link"&&K.quill.format(Q,F.format[Q],x.default.sources.USER))})}function q(L){return{key:U.keys.TAB,shiftKey:!L,format:{"code-block":!0},handler:function(K){var V=g.default.query("code-block"),Q=K.index,ee=K.length,te=this.quill.scroll.descendant(V,Q),re=_(te,2),le=re[0],oe=re[1];if(le!=null){var ge=this.quill.getIndex(le),he=le.newlineIndex(oe,!0)+1,G=le.newlineIndex(ge+oe+ee),Z=le.domNode.textContent.slice(he,G).split(`
`);oe=0,Z.forEach(function(X,J){L?(le.insertAt(he+oe,V.TAB),oe+=V.TAB.length,J===0?Q+=V.TAB.length:ee+=V.TAB.length):X.startsWith(V.TAB)&&(le.deleteAt(he+oe,V.TAB.length),oe-=V.TAB.length,J===0?Q-=V.TAB.length:ee-=V.TAB.length),oe+=X.length+1}),this.quill.update(x.default.sources.USER),this.quill.setSelection(Q,ee,x.default.sources.SILENT)}}}}function H(L){return{key:L[0].toUpperCase(),shortKey:!0,handler:function(K,V){this.quill.format(L,!V.format[L],x.default.sources.USER)}}}function z(L){if(typeof L=="string"||typeof L=="number")return z({key:L});if((typeof L>"u"?"undefined":N(L))==="object"&&(L=(0,w.default)(L,!1)),typeof L.key=="string")if(U.keys[L.key.toUpperCase()]!=null)L.key=U.keys[L.key.toUpperCase()];else if(L.key.length===1)L.key=L.key.toUpperCase().charCodeAt(0);else return null;return L.shortKey&&(L[B]=L.shortKey,delete L.shortKey),L}l.default=U,l.SHORTKEY=B},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function o(a,g){var r=[],x=!0,S=!1,b=void 0;try{for(var O=a[Symbol.iterator](),C;!(x=(C=O.next()).done)&&(r.push(C.value),!(g&&r.length===g));x=!0);}catch(p){S=!0,b=p}finally{try{!x&&O.return&&O.return()}finally{if(S)throw b}}return r}return function(a,g){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return o(a,g);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function o(a,g,r){a===null&&(a=Function.prototype);var x=Object.getOwnPropertyDescriptor(a,g);if(x===void 0){var S=Object.getPrototypeOf(a);return S===null?void 0:o(S,g,r)}else{if("value"in x)return x.value;var b=x.get;return b===void 0?void 0:b.call(r)}},v=function(){function o(a,g){for(var r=0;r<g.length;r++){var x=g[r];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(a,x.key,x)}}return function(a,g,r){return g&&o(a.prototype,g),r&&o(a,r),a}}(),y=h(0),w=t(y),f=h(7),d=t(f);function t(o){return o&&o.__esModule?o:{default:o}}function n(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}function i(o,a){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:o}function c(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);o.prototype=Object.create(a&&a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(o,a):o.__proto__=a)}var u=function(o){c(a,o),v(a,null,[{key:"value",value:function(){}}]);function a(g,r){n(this,a);var x=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,g));return x.selection=r,x.textNode=document.createTextNode(a.CONTENTS),x.domNode.appendChild(x.textNode),x._length=0,x}return v(a,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(r,x){if(this._length!==0)return _(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"format",this).call(this,r,x);for(var S=this,b=0;S!=null&&S.statics.scope!==w.default.Scope.BLOCK_BLOT;)b+=S.offset(S.parent),S=S.parent;S!=null&&(this._length=a.CONTENTS.length,S.optimize(),S.formatAt(b,a.CONTENTS.length,r,x),this._length=0)}},{key:"index",value:function(r,x){return r===this.textNode?0:_(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"index",this).call(this,r,x)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){_(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var r=this.textNode,x=this.selection.getNativeRange(),S=void 0,b=void 0,O=void 0;if(x!=null&&x.start.node===r&&x.end.node===r){var C=[r,x.start.offset,x.end.offset];S=C[0],b=C[1],O=C[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==a.CONTENTS){var p=this.textNode.data.split(a.CONTENTS).join("");this.next instanceof d.default?(S=this.next.domNode,this.next.insertAt(0,p),this.textNode.data=a.CONTENTS):(this.textNode.data=p,this.parent.insertBefore(w.default.create(this.textNode),this),this.textNode=document.createTextNode(a.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),b!=null){var m=[b,O].map(function(E){return Math.max(0,Math.min(S.data.length,E-1))}),k=N(m,2);return b=k[0],O=k[1],{startNode:S,startOffset:b,endNode:S,endOffset:O}}}}},{key:"update",value:function(r,x){var S=this;if(r.some(function(O){return O.type==="characterData"&&O.target===S.textNode})){var b=this.restore();b&&(x.range=b)}}},{key:"value",value:function(){return""}}]),a}(w.default.Embed);u.blotName="cursor",u.className="ql-cursor",u.tagName="span",u.CONTENTS="\uFEFF",l.default=u},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(0),_=w(N),v=h(4),y=w(v);function w(i){return i&&i.__esModule?i:{default:i}}function f(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")}function d(i,c){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:i}function t(i,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);i.prototype=Object.create(c&&c.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(i,c):i.__proto__=c)}var n=function(i){t(c,i);function c(){return f(this,c),d(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(_.default.Container);n.allowedChildren=[y.default,v.BlockEmbed,n],l.default=n},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.ColorStyle=l.ColorClass=l.ColorAttributor=void 0;var N=function(){function u(o,a){for(var g=0;g<a.length;g++){var r=a[g];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,a,g){return a&&u(o.prototype,a),g&&u(o,g),o}}(),_=function u(o,a,g){o===null&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,a);if(r===void 0){var x=Object.getPrototypeOf(o);return x===null?void 0:u(x,a,g)}else{if("value"in r)return r.value;var S=r.get;return S===void 0?void 0:S.call(g)}},v=h(0),y=w(v);function w(u){return u&&u.__esModule?u:{default:u}}function f(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function d(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function t(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var n=function(u){t(o,u);function o(){return f(this,o),d(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return N(o,[{key:"value",value:function(g){var r=_(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"value",this).call(this,g);return r.startsWith("rgb(")?(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+r.split(",").map(function(x){return("00"+parseInt(x).toString(16)).slice(-2)}).join("")):r}}]),o}(y.default.Attributor.Style),i=new y.default.Attributor.Class("color","ql-color",{scope:y.default.Scope.INLINE}),c=new n("color","color",{scope:y.default.Scope.INLINE});l.ColorAttributor=n,l.ColorClass=i,l.ColorStyle=c},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.sanitize=l.default=void 0;var N=function(){function c(u,o){for(var a=0;a<o.length;a++){var g=o[a];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,o,a){return o&&c(u.prototype,o),a&&c(u,a),u}}(),_=function c(u,o,a){u===null&&(u=Function.prototype);var g=Object.getOwnPropertyDescriptor(u,o);if(g===void 0){var r=Object.getPrototypeOf(u);return r===null?void 0:c(r,o,a)}else{if("value"in g)return g.value;var x=g.get;return x===void 0?void 0:x.call(a)}},v=h(6),y=w(v);function w(c){return c&&c.__esModule?c:{default:c}}function f(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function d(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function t(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var n=function(c){t(u,c);function u(){return f(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return N(u,[{key:"format",value:function(a,g){if(a!==this.statics.blotName||!g)return _(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"format",this).call(this,a,g);g=this.constructor.sanitize(g),this.domNode.setAttribute("href",g)}}],[{key:"create",value:function(a){var g=_(u.__proto__||Object.getPrototypeOf(u),"create",this).call(this,a);return a=this.sanitize(a),g.setAttribute("href",a),g.setAttribute("rel","noopener noreferrer"),g.setAttribute("target","_blank"),g}},{key:"formats",value:function(a){return a.getAttribute("href")}},{key:"sanitize",value:function(a){return i(a,this.PROTOCOL_WHITELIST)?a:this.SANITIZED_URL}}]),u}(y.default);n.blotName="link",n.tagName="A",n.SANITIZED_URL="about:blank",n.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function i(c,u){var o=document.createElement("a");o.href=c;var a=o.href.slice(0,o.href.indexOf(":"));return u.indexOf(a)>-1}l.default=n,l.sanitize=i},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},_=function(){function u(o,a){for(var g=0;g<a.length;g++){var r=a[g];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,a,g){return a&&u(o.prototype,a),g&&u(o,g),o}}(),v=h(23),y=d(v),w=h(107),f=d(w);function d(u){return u&&u.__esModule?u:{default:u}}function t(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}var n=0;function i(u,o){u.setAttribute(o,u.getAttribute(o)!=="true")}var c=function(){function u(o){var a=this;t(this,u),this.select=o,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){a.togglePicker()}),this.label.addEventListener("keydown",function(g){switch(g.keyCode){case y.default.keys.ENTER:a.togglePicker();break;case y.default.keys.ESCAPE:a.escape(),g.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return _(u,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),i(this.label,"aria-expanded"),i(this.options,"aria-hidden")}},{key:"buildItem",value:function(a){var g=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),a.hasAttribute("value")&&r.setAttribute("data-value",a.getAttribute("value")),a.textContent&&r.setAttribute("data-label",a.textContent),r.addEventListener("click",function(){g.selectItem(r,!0)}),r.addEventListener("keydown",function(x){switch(x.keyCode){case y.default.keys.ENTER:g.selectItem(r,!0),x.preventDefault();break;case y.default.keys.ESCAPE:g.escape(),x.preventDefault();break}}),r}},{key:"buildLabel",value:function(){var a=document.createElement("span");return a.classList.add("ql-picker-label"),a.innerHTML=f.default,a.tabIndex="0",a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),this.container.appendChild(a),a}},{key:"buildOptions",value:function(){var a=this,g=document.createElement("span");g.classList.add("ql-picker-options"),g.setAttribute("aria-hidden","true"),g.tabIndex="-1",g.id="ql-picker-options-"+n,n+=1,this.label.setAttribute("aria-controls",g.id),this.options=g,[].slice.call(this.select.options).forEach(function(r){var x=a.buildItem(r);g.appendChild(x),r.selected===!0&&a.selectItem(x)}),this.container.appendChild(g)}},{key:"buildPicker",value:function(){var a=this;[].slice.call(this.select.attributes).forEach(function(g){a.container.setAttribute(g.name,g.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var a=this;this.close(),setTimeout(function(){return a.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(a){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.container.querySelector(".ql-selected");if(a!==r&&(r!=null&&r.classList.remove("ql-selected"),a!=null&&(a.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(a.parentNode.children,a),a.hasAttribute("data-value")?this.label.setAttribute("data-value",a.getAttribute("data-value")):this.label.removeAttribute("data-value"),a.hasAttribute("data-label")?this.label.setAttribute("data-label",a.getAttribute("data-label")):this.label.removeAttribute("data-label"),g))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":N(Event))==="object"){var x=document.createEvent("Event");x.initEvent("change",!0,!0),this.select.dispatchEvent(x)}this.close()}}},{key:"update",value:function(){var a=void 0;if(this.select.selectedIndex>-1){var g=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];a=this.select.options[this.select.selectedIndex],this.selectItem(g)}else this.selectItem(null);var r=a!=null&&a!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),u}();l.default=c},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(0),_=D(N),v=h(5),y=D(v),w=h(4),f=D(w),d=h(16),t=D(d),n=h(25),i=D(n),c=h(24),u=D(c),o=h(35),a=D(o),g=h(6),r=D(g),x=h(22),S=D(x),b=h(7),O=D(b),C=h(55),p=D(C),m=h(42),k=D(m),E=h(23),P=D(E);function D(B){return B&&B.__esModule?B:{default:B}}y.default.register({"blots/block":f.default,"blots/block/embed":w.BlockEmbed,"blots/break":t.default,"blots/container":i.default,"blots/cursor":u.default,"blots/embed":a.default,"blots/inline":r.default,"blots/scroll":S.default,"blots/text":O.default,"modules/clipboard":p.default,"modules/history":k.default,"modules/keyboard":P.default}),_.default.register(f.default,t.default,u.default,r.default,S.default,O.default),l.default=y.default},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(1),_=function(){function v(y){this.domNode=y,this.domNode[N.DATA_KEY]={blot:this}}return Object.defineProperty(v.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),v.create=function(y){if(this.tagName==null)throw new N.ParchmentError("Blot definition missing tagName");var w;return Array.isArray(this.tagName)?(typeof y=="string"&&(y=y.toUpperCase(),parseInt(y).toString()===y&&(y=parseInt(y))),typeof y=="number"?w=document.createElement(this.tagName[y-1]):this.tagName.indexOf(y)>-1?w=document.createElement(y):w=document.createElement(this.tagName[0])):w=document.createElement(this.tagName),this.className&&w.classList.add(this.className),w},v.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},v.prototype.clone=function(){var y=this.domNode.cloneNode(!1);return N.create(y)},v.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[N.DATA_KEY]},v.prototype.deleteAt=function(y,w){var f=this.isolate(y,w);f.remove()},v.prototype.formatAt=function(y,w,f,d){var t=this.isolate(y,w);if(N.query(f,N.Scope.BLOT)!=null&&d)t.wrap(f,d);else if(N.query(f,N.Scope.ATTRIBUTE)!=null){var n=N.create(this.statics.scope);t.wrap(n),n.format(f,d)}},v.prototype.insertAt=function(y,w,f){var d=f==null?N.create("text",w):N.create(w,f),t=this.split(y);this.parent.insertBefore(d,t)},v.prototype.insertInto=function(y,w){w===void 0&&(w=null),this.parent!=null&&this.parent.children.remove(this);var f=null;y.children.insertBefore(this,w),w!=null&&(f=w.domNode),(this.domNode.parentNode!=y.domNode||this.domNode.nextSibling!=f)&&y.domNode.insertBefore(this.domNode,f),this.parent=y,this.attach()},v.prototype.isolate=function(y,w){var f=this.split(y);return f.split(w),f},v.prototype.length=function(){return 1},v.prototype.offset=function(y){return y===void 0&&(y=this.parent),this.parent==null||this==y?0:this.parent.children.offset(this)+this.parent.offset(y)},v.prototype.optimize=function(y){this.domNode[N.DATA_KEY]!=null&&delete this.domNode[N.DATA_KEY].mutations},v.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},v.prototype.replace=function(y){y.parent!=null&&(y.parent.insertBefore(this,y.next),y.remove())},v.prototype.replaceWith=function(y,w){var f=typeof y=="string"?N.create(y,w):y;return f.replace(this),f},v.prototype.split=function(y,w){return y===0?this:this.next},v.prototype.update=function(y,w){},v.prototype.wrap=function(y,w){var f=typeof y=="string"?N.create(y,w):y;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},v.blotName="abstract",v}();l.default=_},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(12),_=h(32),v=h(33),y=h(1),w=function(){function f(d){this.attributes={},this.domNode=d,this.build()}return f.prototype.attribute=function(d,t){t?d.add(this.domNode,t)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},f.prototype.build=function(){var d=this;this.attributes={};var t=N.default.keys(this.domNode),n=_.default.keys(this.domNode),i=v.default.keys(this.domNode);t.concat(n).concat(i).forEach(function(c){var u=y.query(c,y.Scope.ATTRIBUTE);u instanceof N.default&&(d.attributes[u.attrName]=u)})},f.prototype.copy=function(d){var t=this;Object.keys(this.attributes).forEach(function(n){var i=t.attributes[n].value(t.domNode);d.format(n,i)})},f.prototype.move=function(d){var t=this;this.copy(d),Object.keys(this.attributes).forEach(function(n){t.attributes[n].remove(t.domNode)}),this.attributes={}},f.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(t,n){return t[n]=d.attributes[n].value(d.domNode),t},{})},f}();l.default=w},function(s,l,h){var N=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var t in d)d.hasOwnProperty(t)&&(f[t]=d[t])};return function(f,d){w(f,d);function t(){this.constructor=f}f.prototype=d===null?Object.create(d):(t.prototype=d.prototype,new t)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=h(12);function v(w,f){var d=w.getAttribute("class")||"";return d.split(/\s+/).filter(function(t){return t.indexOf(f+"-")===0})}var y=function(w){N(f,w);function f(){return w!==null&&w.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(t){return t.split("-").slice(0,-1).join("-")})},f.prototype.add=function(d,t){return this.canAdd(d,t)?(this.remove(d),d.classList.add(this.keyName+"-"+t),!0):!1},f.prototype.remove=function(d){var t=v(d,this.keyName);t.forEach(function(n){d.classList.remove(n)}),d.classList.length===0&&d.removeAttribute("class")},f.prototype.value=function(d){var t=v(d,this.keyName)[0]||"",n=t.slice(this.keyName.length+1);return this.canAdd(d,n)?n:""},f}(_.default);l.default=y},function(s,l,h){var N=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var t in d)d.hasOwnProperty(t)&&(f[t]=d[t])};return function(f,d){w(f,d);function t(){this.constructor=f}f.prototype=d===null?Object.create(d):(t.prototype=d.prototype,new t)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=h(12);function v(w){var f=w.split("-"),d=f.slice(1).map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("");return f[0]+d}var y=function(w){N(f,w);function f(){return w!==null&&w.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(t){var n=t.split(":");return n[0].trim()})},f.prototype.add=function(d,t){return this.canAdd(d,t)?(d.style[v(this.keyName)]=t,!0):!1},f.prototype.remove=function(d){d.style[v(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},f.prototype.value=function(d){var t=d.style[v(this.keyName)];return this.canAdd(d,t)?t:""},f}(_.default);l.default=y},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function y(w,f){for(var d=0;d<f.length;d++){var t=f[d];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(w,t.key,t)}}return function(w,f,d){return f&&y(w.prototype,f),d&&y(w,d),w}}();function _(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}var v=function(){function y(w,f){_(this,y),this.quill=w,this.options=f,this.modules={}}return N(y,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(d){f.modules[d]==null&&f.addModule(d)})}},{key:"addModule",value:function(f){var d=this.quill.constructor.import("modules/"+f);return this.modules[f]=new d(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),y}();v.DEFAULTS={modules:{}},v.themes={default:v},l.default=v},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function o(a,g){for(var r=0;r<g.length;r++){var x=g[r];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(a,x.key,x)}}return function(a,g,r){return g&&o(a.prototype,g),r&&o(a,r),a}}(),_=function o(a,g,r){a===null&&(a=Function.prototype);var x=Object.getOwnPropertyDescriptor(a,g);if(x===void 0){var S=Object.getPrototypeOf(a);return S===null?void 0:o(S,g,r)}else{if("value"in x)return x.value;var b=x.get;return b===void 0?void 0:b.call(r)}},v=h(0),y=d(v),w=h(7),f=d(w);function d(o){return o&&o.__esModule?o:{default:o}}function t(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}function n(o,a){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:o}function i(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);o.prototype=Object.create(a&&a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(o,a):o.__proto__=a)}var c="\uFEFF",u=function(o){i(a,o);function a(g){t(this,a);var r=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,g));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach(function(x){r.contentNode.appendChild(x)}),r.leftGuard=document.createTextNode(c),r.rightGuard=document.createTextNode(c),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return N(a,[{key:"index",value:function(r,x){return r===this.leftGuard?0:r===this.rightGuard?1:_(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"index",this).call(this,r,x)}},{key:"restore",value:function(r){var x=void 0,S=void 0,b=r.data.split(c).join("");if(r===this.leftGuard)if(this.prev instanceof f.default){var O=this.prev.length();this.prev.insertAt(O,b),x={startNode:this.prev.domNode,startOffset:O+b.length}}else S=document.createTextNode(b),this.parent.insertBefore(y.default.create(S),this),x={startNode:S,startOffset:b.length};else r===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,b),x={startNode:this.next.domNode,startOffset:b.length}):(S=document.createTextNode(b),this.parent.insertBefore(y.default.create(S),this.next),x={startNode:S,startOffset:b.length}));return r.data=c,x}},{key:"update",value:function(r,x){var S=this;r.forEach(function(b){if(b.type==="characterData"&&(b.target===S.leftGuard||b.target===S.rightGuard)){var O=S.restore(b.target);O&&(x.range=O)}})}}]),a}(y.default.Embed);l.default=u},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.AlignStyle=l.AlignClass=l.AlignAttribute=void 0;var N=h(0),_=v(N);function v(t){return t&&t.__esModule?t:{default:t}}var y={scope:_.default.Scope.BLOCK,whitelist:["right","center","justify"]},w=new _.default.Attributor.Attribute("align","align",y),f=new _.default.Attributor.Class("align","ql-align",y),d=new _.default.Attributor.Style("align","text-align",y);l.AlignAttribute=w,l.AlignClass=f,l.AlignStyle=d},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundStyle=l.BackgroundClass=void 0;var N=h(0),_=y(N),v=h(26);function y(d){return d&&d.__esModule?d:{default:d}}var w=new _.default.Attributor.Class("background","ql-bg",{scope:_.default.Scope.INLINE}),f=new v.ColorAttributor("background","background-color",{scope:_.default.Scope.INLINE});l.BackgroundClass=w,l.BackgroundStyle=f},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.DirectionStyle=l.DirectionClass=l.DirectionAttribute=void 0;var N=h(0),_=v(N);function v(t){return t&&t.__esModule?t:{default:t}}var y={scope:_.default.Scope.BLOCK,whitelist:["rtl"]},w=new _.default.Attributor.Attribute("direction","dir",y),f=new _.default.Attributor.Class("direction","ql-direction",y),d=new _.default.Attributor.Style("direction","direction",y);l.DirectionAttribute=w,l.DirectionClass=f,l.DirectionStyle=d},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.FontClass=l.FontStyle=void 0;var N=function(){function o(a,g){for(var r=0;r<g.length;r++){var x=g[r];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(a,x.key,x)}}return function(a,g,r){return g&&o(a.prototype,g),r&&o(a,r),a}}(),_=function o(a,g,r){a===null&&(a=Function.prototype);var x=Object.getOwnPropertyDescriptor(a,g);if(x===void 0){var S=Object.getPrototypeOf(a);return S===null?void 0:o(S,g,r)}else{if("value"in x)return x.value;var b=x.get;return b===void 0?void 0:b.call(r)}},v=h(0),y=w(v);function w(o){return o&&o.__esModule?o:{default:o}}function f(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}function d(o,a){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:o}function t(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);o.prototype=Object.create(a&&a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(o,a):o.__proto__=a)}var n={scope:y.default.Scope.INLINE,whitelist:["serif","monospace"]},i=new y.default.Attributor.Class("font","ql-font",n),c=function(o){t(a,o);function a(){return f(this,a),d(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return N(a,[{key:"value",value:function(r){return _(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"value",this).call(this,r).replace(/["']/g,"")}}]),a}(y.default.Attributor.Style),u=new c("font","font-family",n);l.FontStyle=u,l.FontClass=i},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.SizeStyle=l.SizeClass=void 0;var N=h(0),_=v(N);function v(f){return f&&f.__esModule?f:{default:f}}var y=new _.default.Attributor.Class("size","ql-size",{scope:_.default.Scope.INLINE,whitelist:["small","large","huge"]}),w=new _.default.Attributor.Style("size","font-size",{scope:_.default.Scope.INLINE,whitelist:["10px","18px","32px"]});l.SizeClass=y,l.SizeStyle=w},function(s,l,h){s.exports={align:{"":h(76),center:h(77),right:h(78),justify:h(79)},background:h(80),blockquote:h(81),bold:h(82),clean:h(83),code:h(58),"code-block":h(58),color:h(84),direction:{"":h(85),rtl:h(86)},float:{center:h(87),full:h(88),left:h(89),right:h(90)},formula:h(91),header:{1:h(92),2:h(93)},italic:h(94),image:h(95),indent:{"+1":h(96),"-1":h(97)},link:h(98),list:{ordered:h(99),bullet:h(100),check:h(101)},script:{sub:h(102),super:h(103)},strike:h(104),underline:h(105),video:h(106)}},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.getLastChangeIndex=l.default=void 0;var N=function(){function g(r,x){for(var S=0;S<x.length;S++){var b=x[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(r,b.key,b)}}return function(r,x,S){return x&&g(r.prototype,x),S&&g(r,S),r}}(),_=h(0),v=t(_),y=h(5),w=t(y),f=h(9),d=t(f);function t(g){return g&&g.__esModule?g:{default:g}}function n(g,r){if(!(g instanceof r))throw new TypeError("Cannot call a class as a function")}function i(g,r){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:g}function c(g,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);g.prototype=Object.create(r&&r.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(g,r):g.__proto__=r)}var u=function(g){c(r,g);function r(x,S){n(this,r);var b=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,x,S));return b.lastRecorded=0,b.ignoreChange=!1,b.clear(),b.quill.on(w.default.events.EDITOR_CHANGE,function(O,C,p,m){O!==w.default.events.TEXT_CHANGE||b.ignoreChange||(!b.options.userOnly||m===w.default.sources.USER?b.record(C,p):b.transform(C))}),b.quill.keyboard.addBinding({key:"Z",shortKey:!0},b.undo.bind(b)),b.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},b.redo.bind(b)),/Win/i.test(navigator.platform)&&b.quill.keyboard.addBinding({key:"Y",shortKey:!0},b.redo.bind(b)),b}return N(r,[{key:"change",value:function(S,b){if(this.stack[S].length!==0){var O=this.stack[S].pop();this.stack[b].push(O),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(O[S],w.default.sources.USER),this.ignoreChange=!1;var C=a(O[S]);this.quill.setSelection(C)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(S,b){if(S.ops.length!==0){this.stack.redo=[];var O=this.quill.getContents().diff(b),C=Date.now();if(this.lastRecorded+this.options.delay>C&&this.stack.undo.length>0){var p=this.stack.undo.pop();O=O.compose(p.undo),S=p.redo.compose(S)}else this.lastRecorded=C;this.stack.undo.push({redo:S,undo:O}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(S){this.stack.undo.forEach(function(b){b.undo=S.transform(b.undo,!0),b.redo=S.transform(b.redo,!0)}),this.stack.redo.forEach(function(b){b.undo=S.transform(b.undo,!0),b.redo=S.transform(b.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),r}(d.default);u.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function o(g){var r=g.ops[g.ops.length-1];return r==null?!1:r.insert!=null?typeof r.insert=="string"&&r.insert.endsWith(`
`):r.attributes!=null?Object.keys(r.attributes).some(function(x){return v.default.query(x,v.default.Scope.BLOCK)!=null}):!1}function a(g){var r=g.reduce(function(S,b){return S+=b.delete||0,S},0),x=g.length()-r;return o(g)&&(x-=1),x}l.default=u,l.getLastChangeIndex=a},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BaseTooltip=void 0;var N=function(){function R(q,H){for(var z=0;z<H.length;z++){var L=H[z];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(q,L.key,L)}}return function(q,H,z){return H&&R(q.prototype,H),z&&R(q,z),q}}(),_=function R(q,H,z){q===null&&(q=Function.prototype);var L=Object.getOwnPropertyDescriptor(q,H);if(L===void 0){var F=Object.getPrototypeOf(q);return F===null?void 0:R(F,H,z)}else{if("value"in L)return L.value;var K=L.get;return K===void 0?void 0:K.call(z)}},v=h(3),y=C(v),w=h(2),f=C(w),d=h(8),t=C(d),n=h(23),i=C(n),c=h(34),u=C(c),o=h(59),a=C(o),g=h(60),r=C(g),x=h(28),S=C(x),b=h(61),O=C(b);function C(R){return R&&R.__esModule?R:{default:R}}function p(R,q){if(!(R instanceof q))throw new TypeError("Cannot call a class as a function")}function m(R,q){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:R}function k(R,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);R.prototype=Object.create(q&&q.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(R,q):R.__proto__=q)}var E=[!1,"center","right","justify"],P=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],D=[!1,"serif","monospace"],B=["1","2","3",!1],U=["small",!1,"large","huge"],$=function(R){k(q,R);function q(H,z){p(this,q);var L=m(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,H,z)),F=function K(V){if(!document.body.contains(H.root))return document.body.removeEventListener("click",K);L.tooltip!=null&&!L.tooltip.root.contains(V.target)&&document.activeElement!==L.tooltip.textbox&&!L.quill.hasFocus()&&L.tooltip.hide(),L.pickers!=null&&L.pickers.forEach(function(Q){Q.container.contains(V.target)||Q.close()})};return H.emitter.listenDOM("click",document.body,F),L}return N(q,[{key:"addModule",value:function(z){var L=_(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"addModule",this).call(this,z);return z==="toolbar"&&this.extendToolbar(L),L}},{key:"buildButtons",value:function(z,L){z.forEach(function(F){var K=F.getAttribute("class")||"";K.split(/\s+/).forEach(function(V){if(V.startsWith("ql-")&&(V=V.slice(3),L[V]!=null))if(V==="direction")F.innerHTML=L[V][""]+L[V].rtl;else if(typeof L[V]=="string")F.innerHTML=L[V];else{var Q=F.value||"";Q!=null&&L[V][Q]&&(F.innerHTML=L[V][Q])}})})}},{key:"buildPickers",value:function(z,L){var F=this;this.pickers=z.map(function(V){if(V.classList.contains("ql-align"))return V.querySelector("option")==null&&T(V,E),new r.default(V,L.align);if(V.classList.contains("ql-background")||V.classList.contains("ql-color")){var Q=V.classList.contains("ql-background")?"background":"color";return V.querySelector("option")==null&&T(V,P,Q==="background"?"#ffffff":"#000000"),new a.default(V,L[Q])}else return V.querySelector("option")==null&&(V.classList.contains("ql-font")?T(V,D):V.classList.contains("ql-header")?T(V,B):V.classList.contains("ql-size")&&T(V,U)),new S.default(V)});var K=function(){F.pickers.forEach(function(Q){Q.update()})};this.quill.on(t.default.events.EDITOR_CHANGE,K)}}]),q}(u.default);$.DEFAULTS=(0,y.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var q=this,H=this.container.querySelector("input.ql-image[type=file]");H==null&&(H=document.createElement("input"),H.setAttribute("type","file"),H.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),H.classList.add("ql-image"),H.addEventListener("change",function(){if(H.files!=null&&H.files[0]!=null){var z=new FileReader;z.onload=function(L){var F=q.quill.getSelection(!0);q.quill.updateContents(new f.default().retain(F.index).delete(F.length).insert({image:L.target.result}),t.default.sources.USER),q.quill.setSelection(F.index+1,t.default.sources.SILENT),H.value=""},z.readAsDataURL(H.files[0])}}),this.container.appendChild(H)),H.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var M=function(R){k(q,R);function q(H,z){p(this,q);var L=m(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,H,z));return L.textbox=L.root.querySelector('input[type="text"]'),L.listen(),L}return N(q,[{key:"listen",value:function(){var z=this;this.textbox.addEventListener("keydown",function(L){i.default.match(L,"enter")?(z.save(),L.preventDefault()):i.default.match(L,"escape")&&(z.cancel(),L.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),L!=null?this.textbox.value=L:z!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+z)||""),this.root.setAttribute("data-mode",z)}},{key:"restoreFocus",value:function(){var z=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=z}},{key:"save",value:function(){var z=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var L=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",z,t.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",z,t.default.sources.USER)),this.quill.root.scrollTop=L;break}case"video":z=I(z);case"formula":{if(!z)break;var F=this.quill.getSelection(!0);if(F!=null){var K=F.index+F.length;this.quill.insertEmbed(K,this.root.getAttribute("data-mode"),z,t.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(K+1," ",t.default.sources.USER),this.quill.setSelection(K+2,t.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),q}(O.default);function I(R){var q=R.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||R.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return q?(q[1]||"https")+"://www.youtube.com/embed/"+q[2]+"?showinfo=0":(q=R.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(q[1]||"https")+"://player.vimeo.com/video/"+q[2]+"/":R}function T(R,q){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;q.forEach(function(z){var L=document.createElement("option");z===H?L.setAttribute("selected","selected"):L.setAttribute("value",z),R.appendChild(L)})}l.BaseTooltip=M,l.default=$},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function _(){this.head=this.tail=null,this.length=0}return _.prototype.append=function(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];this.insertBefore(v[0],null),v.length>1&&this.append.apply(this,v.slice(1))},_.prototype.contains=function(v){for(var y,w=this.iterator();y=w();)if(y===v)return!0;return!1},_.prototype.insertBefore=function(v,y){v&&(v.next=y,y!=null?(v.prev=y.prev,y.prev!=null&&(y.prev.next=v),y.prev=v,y===this.head&&(this.head=v)):this.tail!=null?(this.tail.next=v,v.prev=this.tail,this.tail=v):(v.prev=null,this.head=this.tail=v),this.length+=1)},_.prototype.offset=function(v){for(var y=0,w=this.head;w!=null;){if(w===v)return y;y+=w.length(),w=w.next}return-1},_.prototype.remove=function(v){this.contains(v)&&(v.prev!=null&&(v.prev.next=v.next),v.next!=null&&(v.next.prev=v.prev),v===this.head&&(this.head=v.next),v===this.tail&&(this.tail=v.prev),this.length-=1)},_.prototype.iterator=function(v){return v===void 0&&(v=this.head),function(){var y=v;return v!=null&&(v=v.next),y}},_.prototype.find=function(v,y){y===void 0&&(y=!1);for(var w,f=this.iterator();w=f();){var d=w.length();if(v<d||y&&v===d&&(w.next==null||w.next.length()!==0))return[w,v];v-=d}return[null,0]},_.prototype.forEach=function(v){for(var y,w=this.iterator();y=w();)v(y)},_.prototype.forEachAt=function(v,y,w){if(!(y<=0))for(var f=this.find(v),d=f[0],t=f[1],n,i=v-t,c=this.iterator(d);(n=c())&&i<v+y;){var u=n.length();v>i?w(n,v-i,Math.min(y,i+u-v)):w(n,0,Math.min(u,v+y-i)),i+=u}},_.prototype.map=function(v){return this.reduce(function(y,w){return y.push(v(w)),y},[])},_.prototype.reduce=function(v,y){for(var w,f=this.iterator();w=f();)y=v(y,w);return y},_}();l.default=N},function(s,l,h){var N=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])};return function(t,n){d(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=h(17),v=h(1),y={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},w=100,f=function(d){N(t,d);function t(n){var i=d.call(this,n)||this;return i.scroll=i,i.observer=new MutationObserver(function(c){i.update(c)}),i.observer.observe(i.domNode,y),i.attach(),i}return t.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(n,i){this.update(),n===0&&i===this.length()?this.children.forEach(function(c){c.remove()}):d.prototype.deleteAt.call(this,n,i)},t.prototype.formatAt=function(n,i,c,u){this.update(),d.prototype.formatAt.call(this,n,i,c,u)},t.prototype.insertAt=function(n,i,c){this.update(),d.prototype.insertAt.call(this,n,i,c)},t.prototype.optimize=function(n,i){var c=this;n===void 0&&(n=[]),i===void 0&&(i={}),d.prototype.optimize.call(this,i);for(var u=[].slice.call(this.observer.takeRecords());u.length>0;)n.push(u.pop());for(var o=function(x,S){S===void 0&&(S=!0),!(x==null||x===c)&&x.domNode.parentNode!=null&&(x.domNode[v.DATA_KEY].mutations==null&&(x.domNode[v.DATA_KEY].mutations=[]),S&&o(x.parent))},a=function(x){x.domNode[v.DATA_KEY]==null||x.domNode[v.DATA_KEY].mutations==null||(x instanceof _.default&&x.children.forEach(a),x.optimize(i))},g=n,r=0;g.length>0;r+=1){if(r>=w)throw new Error("[Parchment] Maximum optimize iterations reached");for(g.forEach(function(x){var S=v.find(x.target,!0);S!=null&&(S.domNode===x.target&&(x.type==="childList"?(o(v.find(x.previousSibling,!1)),[].forEach.call(x.addedNodes,function(b){var O=v.find(b,!1);o(O,!1),O instanceof _.default&&O.children.forEach(function(C){o(C,!1)})})):x.type==="attributes"&&o(S.prev)),o(S))}),this.children.forEach(a),g=[].slice.call(this.observer.takeRecords()),u=g.slice();u.length>0;)n.push(u.pop())}},t.prototype.update=function(n,i){var c=this;i===void 0&&(i={}),n=n||this.observer.takeRecords(),n.map(function(u){var o=v.find(u.target,!0);return o==null?null:o.domNode[v.DATA_KEY].mutations==null?(o.domNode[v.DATA_KEY].mutations=[u],o):(o.domNode[v.DATA_KEY].mutations.push(u),null)}).forEach(function(u){u==null||u===c||u.domNode[v.DATA_KEY]==null||u.update(u.domNode[v.DATA_KEY].mutations||[],i)}),this.domNode[v.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[v.DATA_KEY].mutations,i),this.optimize(n,i)},t.blotName="scroll",t.defaultChild="block",t.scope=v.Scope.BLOCK_BLOT,t.tagName="DIV",t}(_.default);l.default=f},function(s,l,h){var N=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,t){d.__proto__=t}||function(d,t){for(var n in t)t.hasOwnProperty(n)&&(d[n]=t[n])};return function(d,t){f(d,t);function n(){this.constructor=d}d.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=h(18),v=h(1);function y(f,d){if(Object.keys(f).length!==Object.keys(d).length)return!1;for(var t in f)if(f[t]!==d[t])return!1;return!0}var w=function(f){N(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.formats=function(t){if(t.tagName!==d.tagName)return f.formats.call(this,t)},d.prototype.format=function(t,n){var i=this;t===this.statics.blotName&&!n?(this.children.forEach(function(c){c instanceof _.default||(c=c.wrap(d.blotName,!0)),i.attributes.copy(c)}),this.unwrap()):f.prototype.format.call(this,t,n)},d.prototype.formatAt=function(t,n,i,c){if(this.formats()[i]!=null||v.query(i,v.Scope.ATTRIBUTE)){var u=this.isolate(t,n);u.format(i,c)}else f.prototype.formatAt.call(this,t,n,i,c)},d.prototype.optimize=function(t){f.prototype.optimize.call(this,t);var n=this.formats();if(Object.keys(n).length===0)return this.unwrap();var i=this.next;i instanceof d&&i.prev===this&&y(n,i.formats())&&(i.moveChildren(this),i.remove())},d.blotName="inline",d.scope=v.Scope.INLINE_BLOT,d.tagName="SPAN",d}(_.default);l.default=w},function(s,l,h){var N=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var t in d)d.hasOwnProperty(t)&&(f[t]=d[t])};return function(f,d){w(f,d);function t(){this.constructor=f}f.prototype=d===null?Object.create(d):(t.prototype=d.prototype,new t)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=h(18),v=h(1),y=function(w){N(f,w);function f(){return w!==null&&w.apply(this,arguments)||this}return f.formats=function(d){var t=v.query(f.blotName).tagName;if(d.tagName!==t)return w.formats.call(this,d)},f.prototype.format=function(d,t){v.query(d,v.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!t?this.replaceWith(f.blotName):w.prototype.format.call(this,d,t))},f.prototype.formatAt=function(d,t,n,i){v.query(n,v.Scope.BLOCK)!=null?this.format(n,i):w.prototype.formatAt.call(this,d,t,n,i)},f.prototype.insertAt=function(d,t,n){if(n==null||v.query(t,v.Scope.INLINE)!=null)w.prototype.insertAt.call(this,d,t,n);else{var i=this.split(d),c=v.create(t,n);i.parent.insertBefore(c,i)}},f.prototype.update=function(d,t){navigator.userAgent.match(/Trident/)?this.build():w.prototype.update.call(this,d,t)},f.blotName="block",f.scope=v.Scope.BLOCK_BLOT,f.tagName="P",f}(_.default);l.default=y},function(s,l,h){var N=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,f){w.__proto__=f}||function(w,f){for(var d in f)f.hasOwnProperty(d)&&(w[d]=f[d])};return function(w,f){y(w,f);function d(){this.constructor=w}w.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=h(19),v=function(y){N(w,y);function w(){return y!==null&&y.apply(this,arguments)||this}return w.formats=function(f){},w.prototype.format=function(f,d){y.prototype.formatAt.call(this,0,this.length(),f,d)},w.prototype.formatAt=function(f,d,t,n){f===0&&d===this.length()?this.format(t,n):y.prototype.formatAt.call(this,f,d,t,n)},w.prototype.formats=function(){return this.statics.formats(this.domNode)},w}(_.default);l.default=v},function(s,l,h){var N=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var t in d)d.hasOwnProperty(t)&&(f[t]=d[t])};return function(f,d){w(f,d);function t(){this.constructor=f}f.prototype=d===null?Object.create(d):(t.prototype=d.prototype,new t)}}();Object.defineProperty(l,"__esModule",{value:!0});var _=h(19),v=h(1),y=function(w){N(f,w);function f(d){var t=w.call(this,d)||this;return t.text=t.statics.value(t.domNode),t}return f.create=function(d){return document.createTextNode(d)},f.value=function(d){var t=d.data;return t.normalize&&(t=t.normalize()),t},f.prototype.deleteAt=function(d,t){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+t)},f.prototype.index=function(d,t){return this.domNode===d?t:-1},f.prototype.insertAt=function(d,t,n){n==null?(this.text=this.text.slice(0,d)+t+this.text.slice(d),this.domNode.data=this.text):w.prototype.insertAt.call(this,d,t,n)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(d){w.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(d,t){return[this.domNode,d]},f.prototype.split=function(d,t){if(t===void 0&&(t=!1),!t){if(d===0)return this;if(d===this.length())return this.next}var n=v.create(this.domNode.splitText(d));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},f.prototype.update=function(d,t){var n=this;d.some(function(i){return i.type==="characterData"&&i.target===n.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=v.Scope.INLINE_BLOT,f}(_.default);l.default=y},function(s,l,h){var N=document.createElement("div");if(N.classList.toggle("test-class",!1),N.classList.contains("test-class")){var _=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(v,y){return arguments.length>1&&!this.contains(v)==!y?y:_.call(this,v)}}String.prototype.startsWith||(String.prototype.startsWith=function(v,y){return y=y||0,this.substr(y,v.length)===v}),String.prototype.endsWith||(String.prototype.endsWith=function(v,y){var w=this.toString();(typeof y!="number"||!isFinite(y)||Math.floor(y)!==y||y>w.length)&&(y=w.length),y-=v.length;var f=w.indexOf(v,y);return f!==-1&&f===y}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(y){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof y!="function")throw new TypeError("predicate must be a function");for(var w=Object(this),f=w.length>>>0,d=arguments[1],t,n=0;n<f;n++)if(t=w[n],y.call(d,t,n,w))return t}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(s,l){var h=-1,N=1,_=0;function v(r,x,S){if(r==x)return r?[[_,r]]:[];(S<0||r.length<S)&&(S=null);var b=d(r,x),O=r.substring(0,b);r=r.substring(b),x=x.substring(b),b=t(r,x);var C=r.substring(r.length-b);r=r.substring(0,r.length-b),x=x.substring(0,x.length-b);var p=y(r,x);return O&&p.unshift([_,O]),C&&p.push([_,C]),i(p),S!=null&&(p=o(p,S)),p=a(p),p}function y(r,x){var S;if(!r)return[[N,x]];if(!x)return[[h,r]];var b=r.length>x.length?r:x,O=r.length>x.length?x:r,C=b.indexOf(O);if(C!=-1)return S=[[N,b.substring(0,C)],[_,O],[N,b.substring(C+O.length)]],r.length>x.length&&(S[0][0]=S[2][0]=h),S;if(O.length==1)return[[h,r],[N,x]];var p=n(r,x);if(p){var m=p[0],k=p[1],E=p[2],P=p[3],D=p[4],B=v(m,E),U=v(k,P);return B.concat([[_,D]],U)}return w(r,x)}function w(r,x){for(var S=r.length,b=x.length,O=Math.ceil((S+b)/2),C=O,p=2*O,m=new Array(p),k=new Array(p),E=0;E<p;E++)m[E]=-1,k[E]=-1;m[C+1]=0,k[C+1]=0;for(var P=S-b,D=P%2!=0,B=0,U=0,$=0,M=0,I=0;I<O;I++){for(var T=-I+B;T<=I-U;T+=2){var R=C+T,q;T==-I||T!=I&&m[R-1]<m[R+1]?q=m[R+1]:q=m[R-1]+1;for(var H=q-T;q<S&&H<b&&r.charAt(q)==x.charAt(H);)q++,H++;if(m[R]=q,q>S)U+=2;else if(H>b)B+=2;else if(D){var z=C+P-T;if(z>=0&&z<p&&k[z]!=-1){var L=S-k[z];if(q>=L)return f(r,x,q,H)}}}for(var F=-I+$;F<=I-M;F+=2){var z=C+F,L;F==-I||F!=I&&k[z-1]<k[z+1]?L=k[z+1]:L=k[z-1]+1;for(var K=L-F;L<S&&K<b&&r.charAt(S-L-1)==x.charAt(b-K-1);)L++,K++;if(k[z]=L,L>S)M+=2;else if(K>b)$+=2;else if(!D){var R=C+P-F;if(R>=0&&R<p&&m[R]!=-1){var q=m[R],H=C+q-R;if(L=S-L,q>=L)return f(r,x,q,H)}}}}return[[h,r],[N,x]]}function f(r,x,S,b){var O=r.substring(0,S),C=x.substring(0,b),p=r.substring(S),m=x.substring(b),k=v(O,C),E=v(p,m);return k.concat(E)}function d(r,x){if(!r||!x||r.charAt(0)!=x.charAt(0))return 0;for(var S=0,b=Math.min(r.length,x.length),O=b,C=0;S<O;)r.substring(C,O)==x.substring(C,O)?(S=O,C=S):b=O,O=Math.floor((b-S)/2+S);return O}function t(r,x){if(!r||!x||r.charAt(r.length-1)!=x.charAt(x.length-1))return 0;for(var S=0,b=Math.min(r.length,x.length),O=b,C=0;S<O;)r.substring(r.length-O,r.length-C)==x.substring(x.length-O,x.length-C)?(S=O,C=S):b=O,O=Math.floor((b-S)/2+S);return O}function n(r,x){var S=r.length>x.length?r:x,b=r.length>x.length?x:r;if(S.length<4||b.length*2<S.length)return null;function O(U,$,M){for(var I=U.substring(M,M+Math.floor(U.length/4)),T=-1,R="",q,H,z,L;(T=$.indexOf(I,T+1))!=-1;){var F=d(U.substring(M),$.substring(T)),K=t(U.substring(0,M),$.substring(0,T));R.length<K+F&&(R=$.substring(T-K,T)+$.substring(T,T+F),q=U.substring(0,M-K),H=U.substring(M+F),z=$.substring(0,T-K),L=$.substring(T+F))}return R.length*2>=U.length?[q,H,z,L,R]:null}var C=O(S,b,Math.ceil(S.length/4)),p=O(S,b,Math.ceil(S.length/2)),m;if(!C&&!p)return null;p?C?m=C[4].length>p[4].length?C:p:m=p:m=C;var k,E,P,D;r.length>x.length?(k=m[0],E=m[1],P=m[2],D=m[3]):(P=m[0],D=m[1],k=m[2],E=m[3]);var B=m[4];return[k,E,P,D,B]}function i(r){r.push([_,""]);for(var x=0,S=0,b=0,O="",C="",p;x<r.length;)switch(r[x][0]){case N:b++,C+=r[x][1],x++;break;case h:S++,O+=r[x][1],x++;break;case _:S+b>1?(S!==0&&b!==0&&(p=d(C,O),p!==0&&(x-S-b>0&&r[x-S-b-1][0]==_?r[x-S-b-1][1]+=C.substring(0,p):(r.splice(0,0,[_,C.substring(0,p)]),x++),C=C.substring(p),O=O.substring(p)),p=t(C,O),p!==0&&(r[x][1]=C.substring(C.length-p)+r[x][1],C=C.substring(0,C.length-p),O=O.substring(0,O.length-p))),S===0?r.splice(x-b,S+b,[N,C]):b===0?r.splice(x-S,S+b,[h,O]):r.splice(x-S-b,S+b,[h,O],[N,C]),x=x-S-b+(S?1:0)+(b?1:0)+1):x!==0&&r[x-1][0]==_?(r[x-1][1]+=r[x][1],r.splice(x,1)):x++,b=0,S=0,O="",C="";break}r[r.length-1][1]===""&&r.pop();var m=!1;for(x=1;x<r.length-1;)r[x-1][0]==_&&r[x+1][0]==_&&(r[x][1].substring(r[x][1].length-r[x-1][1].length)==r[x-1][1]?(r[x][1]=r[x-1][1]+r[x][1].substring(0,r[x][1].length-r[x-1][1].length),r[x+1][1]=r[x-1][1]+r[x+1][1],r.splice(x-1,1),m=!0):r[x][1].substring(0,r[x+1][1].length)==r[x+1][1]&&(r[x-1][1]+=r[x+1][1],r[x][1]=r[x][1].substring(r[x+1][1].length)+r[x+1][1],r.splice(x+1,1),m=!0)),x++;m&&i(r)}var c=v;c.INSERT=N,c.DELETE=h,c.EQUAL=_,s.exports=c;function u(r,x){if(x===0)return[_,r];for(var S=0,b=0;b<r.length;b++){var O=r[b];if(O[0]===h||O[0]===_){var C=S+O[1].length;if(x===C)return[b+1,r];if(x<C){r=r.slice();var p=x-S,m=[O[0],O[1].slice(0,p)],k=[O[0],O[1].slice(p)];return r.splice(b,1,m,k),[b+1,r]}else S=C}}throw new Error("cursor_pos is out of bounds!")}function o(r,x){var S=u(r,x),b=S[1],O=S[0],C=b[O],p=b[O+1];if(C==null)return r;if(C[0]!==_)return r;if(p!=null&&C[1]+p[1]===p[1]+C[1])return b.splice(O,2,p,C),g(b,O,2);if(p!=null&&p[1].indexOf(C[1])===0){b.splice(O,2,[p[0],C[1]],[0,C[1]]);var m=p[1].slice(C[1].length);return m.length>0&&b.splice(O+2,0,[p[0],m]),g(b,O,3)}else return r}function a(r){for(var x=!1,S=function(p){return p.charCodeAt(0)>=56320&&p.charCodeAt(0)<=57343},b=function(p){return p.charCodeAt(p.length-1)>=55296&&p.charCodeAt(p.length-1)<=56319},O=2;O<r.length;O+=1)r[O-2][0]===_&&b(r[O-2][1])&&r[O-1][0]===h&&S(r[O-1][1])&&r[O][0]===N&&S(r[O][1])&&(x=!0,r[O-1][1]=r[O-2][1].slice(-1)+r[O-1][1],r[O][1]=r[O-2][1].slice(-1)+r[O][1],r[O-2][1]=r[O-2][1].slice(0,-1));if(!x)return r;for(var C=[],O=0;O<r.length;O+=1)r[O][1].length>0&&C.push(r[O]);return C}function g(r,x,S){for(var b=x+S-1;b>=0&&b>=x-1;b--)if(b+1<r.length){var O=r[b],C=r[b+1];O[0]===C[1]&&r.splice(b,2,[O[0],O[1]+C[1]])}return r}},function(s,l){l=s.exports=typeof Object.keys=="function"?Object.keys:h,l.shim=h;function h(N){var _=[];for(var v in N)_.push(v);return _}},function(s,l){var h=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";l=s.exports=h?N:_,l.supported=N;function N(v){return Object.prototype.toString.call(v)=="[object Arguments]"}l.unsupported=_;function _(v){return v&&typeof v=="object"&&typeof v.length=="number"&&Object.prototype.hasOwnProperty.call(v,"callee")&&!Object.prototype.propertyIsEnumerable.call(v,"callee")||!1}},function(s,l){var h=Object.prototype.hasOwnProperty,N="~";function _(){}Object.create&&(_.prototype=Object.create(null),new _().__proto__||(N=!1));function v(w,f,d){this.fn=w,this.context=f,this.once=d||!1}function y(){this._events=new _,this._eventsCount=0}y.prototype.eventNames=function(){var f=[],d,t;if(this._eventsCount===0)return f;for(t in d=this._events)h.call(d,t)&&f.push(N?t.slice(1):t);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},y.prototype.listeners=function(f,d){var t=N?N+f:f,n=this._events[t];if(d)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,c=n.length,u=new Array(c);i<c;i++)u[i]=n[i].fn;return u},y.prototype.emit=function(f,d,t,n,i,c){var u=N?N+f:f;if(!this._events[u])return!1;var o=this._events[u],a=arguments.length,g,r;if(o.fn){switch(o.once&&this.removeListener(f,o.fn,void 0,!0),a){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,d),!0;case 3:return o.fn.call(o.context,d,t),!0;case 4:return o.fn.call(o.context,d,t,n),!0;case 5:return o.fn.call(o.context,d,t,n,i),!0;case 6:return o.fn.call(o.context,d,t,n,i,c),!0}for(r=1,g=new Array(a-1);r<a;r++)g[r-1]=arguments[r];o.fn.apply(o.context,g)}else{var x=o.length,S;for(r=0;r<x;r++)switch(o[r].once&&this.removeListener(f,o[r].fn,void 0,!0),a){case 1:o[r].fn.call(o[r].context);break;case 2:o[r].fn.call(o[r].context,d);break;case 3:o[r].fn.call(o[r].context,d,t);break;case 4:o[r].fn.call(o[r].context,d,t,n);break;default:if(!g)for(S=1,g=new Array(a-1);S<a;S++)g[S-1]=arguments[S];o[r].fn.apply(o[r].context,g)}}return!0},y.prototype.on=function(f,d,t){var n=new v(d,t||this),i=N?N+f:f;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],n]:this._events[i].push(n):(this._events[i]=n,this._eventsCount++),this},y.prototype.once=function(f,d,t){var n=new v(d,t||this,!0),i=N?N+f:f;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],n]:this._events[i].push(n):(this._events[i]=n,this._eventsCount++),this},y.prototype.removeListener=function(f,d,t,n){var i=N?N+f:f;if(!this._events[i])return this;if(!d)return--this._eventsCount===0?this._events=new _:delete this._events[i],this;var c=this._events[i];if(c.fn)c.fn===d&&(!n||c.once)&&(!t||c.context===t)&&(--this._eventsCount===0?this._events=new _:delete this._events[i]);else{for(var u=0,o=[],a=c.length;u<a;u++)(c[u].fn!==d||n&&!c[u].once||t&&c[u].context!==t)&&o.push(c[u]);o.length?this._events[i]=o.length===1?o[0]:o:--this._eventsCount===0?this._events=new _:delete this._events[i]}return this},y.prototype.removeAllListeners=function(f){var d;return f?(d=N?N+f:f,this._events[d]&&(--this._eventsCount===0?this._events=new _:delete this._events[d])):(this._events=new _,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prototype.setMaxListeners=function(){return this},y.prefixed=N,y.EventEmitter=y,typeof s<"u"&&(s.exports=y)},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.matchText=l.matchSpacing=l.matchNewline=l.matchBlot=l.matchAttributor=l.default=void 0;var N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},_=function(){function G(Z,X){var J=[],Y=!0,se=!1,ae=void 0;try{for(var ie=Z[Symbol.iterator](),ve;!(Y=(ve=ie.next()).done)&&(J.push(ve.value),!(X&&J.length===X));Y=!0);}catch(Ne){se=!0,ae=Ne}finally{try{!Y&&ie.return&&ie.return()}finally{if(se)throw ae}}return J}return function(Z,X){if(Array.isArray(Z))return Z;if(Symbol.iterator in Object(Z))return G(Z,X);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function G(Z,X){for(var J=0;J<X.length;J++){var Y=X[J];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(Z,Y.key,Y)}}return function(Z,X,J){return X&&G(Z.prototype,X),J&&G(Z,J),Z}}(),y=h(3),w=k(y),f=h(2),d=k(f),t=h(0),n=k(t),i=h(5),c=k(i),u=h(10),o=k(u),a=h(9),g=k(a),r=h(36),x=h(37),S=h(13),b=k(S),O=h(26),C=h(38),p=h(39),m=h(40);function k(G){return G&&G.__esModule?G:{default:G}}function E(G,Z,X){return Z in G?Object.defineProperty(G,Z,{value:X,enumerable:!0,configurable:!0,writable:!0}):G[Z]=X,G}function P(G,Z){if(!(G instanceof Z))throw new TypeError("Cannot call a class as a function")}function D(G,Z){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:G}function B(G,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);G.prototype=Object.create(Z&&Z.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(G,Z):G.__proto__=Z)}var U=(0,o.default)("quill:clipboard"),$="__ql-matcher",M=[[Node.TEXT_NODE,he],[Node.TEXT_NODE,le],["br",ee],[Node.ELEMENT_NODE,le],[Node.ELEMENT_NODE,Q],[Node.ELEMENT_NODE,oe],[Node.ELEMENT_NODE,V],[Node.ELEMENT_NODE,ge],["li",re],["b",K.bind(K,"bold")],["i",K.bind(K,"italic")],["style",te]],I=[r.AlignAttribute,C.DirectionAttribute].reduce(function(G,Z){return G[Z.keyName]=Z,G},{}),T=[r.AlignStyle,x.BackgroundStyle,O.ColorStyle,C.DirectionStyle,p.FontStyle,m.SizeStyle].reduce(function(G,Z){return G[Z.keyName]=Z,G},{}),R=function(G){B(Z,G);function Z(X,J){P(this,Z);var Y=D(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,X,J));return Y.quill.root.addEventListener("paste",Y.onPaste.bind(Y)),Y.container=Y.quill.addContainer("ql-clipboard"),Y.container.setAttribute("contenteditable",!0),Y.container.setAttribute("tabindex",-1),Y.matchers=[],M.concat(Y.options.matchers).forEach(function(se){var ae=_(se,2),ie=ae[0],ve=ae[1];!J.matchVisual&&ve===oe||Y.addMatcher(ie,ve)}),Y}return v(Z,[{key:"addMatcher",value:function(J,Y){this.matchers.push([J,Y])}},{key:"convert",value:function(J){if(typeof J=="string")return this.container.innerHTML=J.replace(/\>\r?\n +\</g,"><"),this.convert();var Y=this.quill.getFormat(this.quill.selection.savedRange.index);if(Y[b.default.blotName]){var se=this.container.innerText;return this.container.innerHTML="",new d.default().insert(se,E({},b.default.blotName,Y[b.default.blotName]))}var ae=this.prepareMatching(),ie=_(ae,2),ve=ie[0],Ne=ie[1],ue=F(this.container,ve,Ne);return z(ue,`
`)&&ue.ops[ue.ops.length-1].attributes==null&&(ue=ue.compose(new d.default().retain(ue.length()-1).delete(1))),U.log("convert",this.container.innerHTML,ue),this.container.innerHTML="",ue}},{key:"dangerouslyPasteHTML",value:function(J,Y){var se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.default.sources.API;if(typeof J=="string")this.quill.setContents(this.convert(J),Y),this.quill.setSelection(0,c.default.sources.SILENT);else{var ae=this.convert(Y);this.quill.updateContents(new d.default().retain(J).concat(ae),se),this.quill.setSelection(J+ae.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(J){var Y=this;if(!(J.defaultPrevented||!this.quill.isEnabled())){var se=this.quill.getSelection(),ae=new d.default().retain(se.index),ie=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){ae=ae.concat(Y.convert()).delete(se.length),Y.quill.updateContents(ae,c.default.sources.USER),Y.quill.setSelection(ae.length()-se.length,c.default.sources.SILENT),Y.quill.scrollingContainer.scrollTop=ie,Y.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var J=this,Y=[],se=[];return this.matchers.forEach(function(ae){var ie=_(ae,2),ve=ie[0],Ne=ie[1];switch(ve){case Node.TEXT_NODE:se.push(Ne);break;case Node.ELEMENT_NODE:Y.push(Ne);break;default:[].forEach.call(J.container.querySelectorAll(ve),function(ue){ue[$]=ue[$]||[],ue[$].push(Ne)});break}}),[Y,se]}}]),Z}(g.default);R.DEFAULTS={matchers:[],matchVisual:!0};function q(G,Z,X){return(typeof Z>"u"?"undefined":N(Z))==="object"?Object.keys(Z).reduce(function(J,Y){return q(J,Y,Z[Y])},G):G.reduce(function(J,Y){return Y.attributes&&Y.attributes[Z]?J.push(Y):J.insert(Y.insert,(0,w.default)({},E({},Z,X),Y.attributes))},new d.default)}function H(G){if(G.nodeType!==Node.ELEMENT_NODE)return{};var Z="__ql-computed-style";return G[Z]||(G[Z]=window.getComputedStyle(G))}function z(G,Z){for(var X="",J=G.ops.length-1;J>=0&&X.length<Z.length;--J){var Y=G.ops[J];if(typeof Y.insert!="string")break;X=Y.insert+X}return X.slice(-1*Z.length)===Z}function L(G){if(G.childNodes.length===0)return!1;var Z=H(G);return["block","list-item"].indexOf(Z.display)>-1}function F(G,Z,X){return G.nodeType===G.TEXT_NODE?X.reduce(function(J,Y){return Y(G,J)},new d.default):G.nodeType===G.ELEMENT_NODE?[].reduce.call(G.childNodes||[],function(J,Y){var se=F(Y,Z,X);return Y.nodeType===G.ELEMENT_NODE&&(se=Z.reduce(function(ae,ie){return ie(Y,ae)},se),se=(Y[$]||[]).reduce(function(ae,ie){return ie(Y,ae)},se)),J.concat(se)},new d.default):new d.default}function K(G,Z,X){return q(X,G,!0)}function V(G,Z){var X=n.default.Attributor.Attribute.keys(G),J=n.default.Attributor.Class.keys(G),Y=n.default.Attributor.Style.keys(G),se={};return X.concat(J).concat(Y).forEach(function(ae){var ie=n.default.query(ae,n.default.Scope.ATTRIBUTE);ie!=null&&(se[ie.attrName]=ie.value(G),se[ie.attrName])||(ie=I[ae],ie!=null&&(ie.attrName===ae||ie.keyName===ae)&&(se[ie.attrName]=ie.value(G)||void 0),ie=T[ae],ie!=null&&(ie.attrName===ae||ie.keyName===ae)&&(ie=T[ae],se[ie.attrName]=ie.value(G)||void 0))}),Object.keys(se).length>0&&(Z=q(Z,se)),Z}function Q(G,Z){var X=n.default.query(G);if(X==null)return Z;if(X.prototype instanceof n.default.Embed){var J={},Y=X.value(G);Y!=null&&(J[X.blotName]=Y,Z=new d.default().insert(J,X.formats(G)))}else typeof X.formats=="function"&&(Z=q(Z,X.blotName,X.formats(G)));return Z}function ee(G,Z){return z(Z,`
`)||Z.insert(`
`),Z}function te(){return new d.default}function re(G,Z){var X=n.default.query(G);if(X==null||X.blotName!=="list-item"||!z(Z,`
`))return Z;for(var J=-1,Y=G.parentNode;!Y.classList.contains("ql-clipboard");)(n.default.query(Y)||{}).blotName==="list"&&(J+=1),Y=Y.parentNode;return J<=0?Z:Z.compose(new d.default().retain(Z.length()-1).retain(1,{indent:J}))}function le(G,Z){return z(Z,`
`)||(L(G)||Z.length()>0&&G.nextSibling&&L(G.nextSibling))&&Z.insert(`
`),Z}function oe(G,Z){if(L(G)&&G.nextElementSibling!=null&&!z(Z,`

`)){var X=G.offsetHeight+parseFloat(H(G).marginTop)+parseFloat(H(G).marginBottom);G.nextElementSibling.offsetTop>G.offsetTop+X*1.5&&Z.insert(`
`)}return Z}function ge(G,Z){var X={},J=G.style||{};return J.fontStyle&&H(G).fontStyle==="italic"&&(X.italic=!0),J.fontWeight&&(H(G).fontWeight.startsWith("bold")||parseInt(H(G).fontWeight)>=700)&&(X.bold=!0),Object.keys(X).length>0&&(Z=q(Z,X)),parseFloat(J.textIndent||0)>0&&(Z=new d.default().insert("	").concat(Z)),Z}function he(G,Z){var X=G.data;if(G.parentNode.tagName==="O:P")return Z.insert(X.trim());if(X.trim().length===0&&G.parentNode.classList.contains("ql-clipboard"))return Z;if(!H(G.parentNode).whiteSpace.startsWith("pre")){var J=function(se,ae){return ae=ae.replace(/[^\u00a0]/g,""),ae.length<1&&se?" ":ae};X=X.replace(/\r\n/g," ").replace(/\n/g," "),X=X.replace(/\s\s+/g,J.bind(J,!0)),(G.previousSibling==null&&L(G.parentNode)||G.previousSibling!=null&&L(G.previousSibling))&&(X=X.replace(/^\s+/,J.bind(J,!1))),(G.nextSibling==null&&L(G.parentNode)||G.nextSibling!=null&&L(G.nextSibling))&&(X=X.replace(/\s+$/,J.bind(J,!1)))}return Z.insert(X)}l.default=R,l.matchAttributor=V,l.matchBlot=Q,l.matchNewline=le,l.matchSpacing=oe,l.matchText=he},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function i(c,u){for(var o=0;o<u.length;o++){var a=u[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}}return function(c,u,o){return u&&i(c.prototype,u),o&&i(c,o),c}}(),_=function i(c,u,o){c===null&&(c=Function.prototype);var a=Object.getOwnPropertyDescriptor(c,u);if(a===void 0){var g=Object.getPrototypeOf(c);return g===null?void 0:i(g,u,o)}else{if("value"in a)return a.value;var r=a.get;return r===void 0?void 0:r.call(o)}},v=h(6),y=w(v);function w(i){return i&&i.__esModule?i:{default:i}}function f(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")}function d(i,c){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:i}function t(i,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);i.prototype=Object.create(c&&c.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(i,c):i.__proto__=c)}var n=function(i){t(c,i);function c(){return f(this,c),d(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return N(c,[{key:"optimize",value:function(o){_(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"optimize",this).call(this,o),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return _(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),c}(y.default);n.blotName="bold",n.tagName=["STRONG","B"],l.default=n},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.addControls=l.default=void 0;var N=function(){function m(k,E){var P=[],D=!0,B=!1,U=void 0;try{for(var $=k[Symbol.iterator](),M;!(D=(M=$.next()).done)&&(P.push(M.value),!(E&&P.length===E));D=!0);}catch(I){B=!0,U=I}finally{try{!D&&$.return&&$.return()}finally{if(B)throw U}}return P}return function(k,E){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return m(k,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function m(k,E){for(var P=0;P<E.length;P++){var D=E[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,E,P){return E&&m(k.prototype,E),P&&m(k,P),k}}(),v=h(2),y=o(v),w=h(0),f=o(w),d=h(5),t=o(d),n=h(10),i=o(n),c=h(9),u=o(c);function o(m){return m&&m.__esModule?m:{default:m}}function a(m,k,E){return k in m?Object.defineProperty(m,k,{value:E,enumerable:!0,configurable:!0,writable:!0}):m[k]=E,m}function g(m,k){if(!(m instanceof k))throw new TypeError("Cannot call a class as a function")}function r(m,k){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:m}function x(m,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);m.prototype=Object.create(k&&k.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(m,k):m.__proto__=k)}var S=(0,i.default)("quill:toolbar"),b=function(m){x(k,m);function k(E,P){g(this,k);var D=r(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,E,P));if(Array.isArray(D.options.container)){var B=document.createElement("div");C(B,D.options.container),E.container.parentNode.insertBefore(B,E.container),D.container=B}else typeof D.options.container=="string"?D.container=document.querySelector(D.options.container):D.container=D.options.container;if(!(D.container instanceof HTMLElement)){var U;return U=S.error("Container required for toolbar",D.options),r(D,U)}return D.container.classList.add("ql-toolbar"),D.controls=[],D.handlers={},Object.keys(D.options.handlers).forEach(function($){D.addHandler($,D.options.handlers[$])}),[].forEach.call(D.container.querySelectorAll("button, select"),function($){D.attach($)}),D.quill.on(t.default.events.EDITOR_CHANGE,function($,M){$===t.default.events.SELECTION_CHANGE&&D.update(M)}),D.quill.on(t.default.events.SCROLL_OPTIMIZE,function(){var $=D.quill.selection.getRange(),M=N($,1),I=M[0];D.update(I)}),D}return _(k,[{key:"addHandler",value:function(P,D){this.handlers[P]=D}},{key:"attach",value:function(P){var D=this,B=[].find.call(P.classList,function($){return $.indexOf("ql-")===0});if(B){if(B=B.slice(3),P.tagName==="BUTTON"&&P.setAttribute("type","button"),this.handlers[B]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[B]==null){S.warn("ignoring attaching to disabled format",B,P);return}if(f.default.query(B)==null){S.warn("ignoring attaching to nonexistent format",B,P);return}}var U=P.tagName==="SELECT"?"change":"click";P.addEventListener(U,function($){var M=void 0;if(P.tagName==="SELECT"){if(P.selectedIndex<0)return;var I=P.options[P.selectedIndex];I.hasAttribute("selected")?M=!1:M=I.value||!1}else P.classList.contains("ql-active")?M=!1:M=P.value||!P.hasAttribute("value"),$.preventDefault();D.quill.focus();var T=D.quill.selection.getRange(),R=N(T,1),q=R[0];if(D.handlers[B]!=null)D.handlers[B].call(D,M);else if(f.default.query(B).prototype instanceof f.default.Embed){if(M=prompt("Enter "+B),!M)return;D.quill.updateContents(new y.default().retain(q.index).delete(q.length).insert(a({},B,M)),t.default.sources.USER)}else D.quill.format(B,M,t.default.sources.USER);D.update(q)}),this.controls.push([B,P])}}},{key:"update",value:function(P){var D=P==null?{}:this.quill.getFormat(P);this.controls.forEach(function(B){var U=N(B,2),$=U[0],M=U[1];if(M.tagName==="SELECT"){var I=void 0;if(P==null)I=null;else if(D[$]==null)I=M.querySelector("option[selected]");else if(!Array.isArray(D[$])){var T=D[$];typeof T=="string"&&(T=T.replace(/\"/g,'\\"')),I=M.querySelector('option[value="'+T+'"]')}I==null?(M.value="",M.selectedIndex=-1):I.selected=!0}else if(P==null)M.classList.remove("ql-active");else if(M.hasAttribute("value")){var R=D[$]===M.getAttribute("value")||D[$]!=null&&D[$].toString()===M.getAttribute("value")||D[$]==null&&!M.getAttribute("value");M.classList.toggle("ql-active",R)}else M.classList.toggle("ql-active",D[$]!=null)})}}]),k}(u.default);b.DEFAULTS={};function O(m,k,E){var P=document.createElement("button");P.setAttribute("type","button"),P.classList.add("ql-"+k),E!=null&&(P.value=E),m.appendChild(P)}function C(m,k){Array.isArray(k[0])||(k=[k]),k.forEach(function(E){var P=document.createElement("span");P.classList.add("ql-formats"),E.forEach(function(D){if(typeof D=="string")O(P,D);else{var B=Object.keys(D)[0],U=D[B];Array.isArray(U)?p(P,B,U):O(P,B,U)}}),m.appendChild(P)})}function p(m,k,E){var P=document.createElement("select");P.classList.add("ql-"+k),E.forEach(function(D){var B=document.createElement("option");D!==!1?B.setAttribute("value",D):B.setAttribute("selected","selected"),P.appendChild(B)}),m.appendChild(P)}b.DEFAULTS={container:null,handlers:{clean:function(){var k=this,E=this.quill.getSelection();if(E!=null)if(E.length==0){var P=this.quill.getFormat();Object.keys(P).forEach(function(D){f.default.query(D,f.default.Scope.INLINE)!=null&&k.quill.format(D,!1)})}else this.quill.removeFormat(E,t.default.sources.USER)},direction:function(k){var E=this.quill.getFormat().align;k==="rtl"&&E==null?this.quill.format("align","right",t.default.sources.USER):!k&&E==="right"&&this.quill.format("align",!1,t.default.sources.USER),this.quill.format("direction",k,t.default.sources.USER)},indent:function(k){var E=this.quill.getSelection(),P=this.quill.getFormat(E),D=parseInt(P.indent||0);if(k==="+1"||k==="-1"){var B=k==="+1"?1:-1;P.direction==="rtl"&&(B*=-1),this.quill.format("indent",D+B,t.default.sources.USER)}},link:function(k){k===!0&&(k=prompt("Enter link URL:")),this.quill.format("link",k,t.default.sources.USER)},list:function(k){var E=this.quill.getSelection(),P=this.quill.getFormat(E);k==="check"?P.list==="checked"||P.list==="unchecked"?this.quill.format("list",!1,t.default.sources.USER):this.quill.format("list","unchecked",t.default.sources.USER):this.quill.format("list",k,t.default.sources.USER)}}},l.default=b,l.addControls=C},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function i(c,u){for(var o=0;o<u.length;o++){var a=u[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}}return function(c,u,o){return u&&i(c.prototype,u),o&&i(c,o),c}}(),_=function i(c,u,o){c===null&&(c=Function.prototype);var a=Object.getOwnPropertyDescriptor(c,u);if(a===void 0){var g=Object.getPrototypeOf(c);return g===null?void 0:i(g,u,o)}else{if("value"in a)return a.value;var r=a.get;return r===void 0?void 0:r.call(o)}},v=h(28),y=w(v);function w(i){return i&&i.__esModule?i:{default:i}}function f(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")}function d(i,c){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:i}function t(i,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);i.prototype=Object.create(c&&c.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(i,c):i.__proto__=c)}var n=function(i){t(c,i);function c(u,o){f(this,c);var a=d(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return a.label.innerHTML=o,a.container.classList.add("ql-color-picker"),[].slice.call(a.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(g){g.classList.add("ql-primary")}),a}return N(c,[{key:"buildItem",value:function(o){var a=_(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"buildItem",this).call(this,o);return a.style.backgroundColor=o.getAttribute("value")||"",a}},{key:"selectItem",value:function(o,a){_(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"selectItem",this).call(this,o,a);var g=this.label.querySelector(".ql-color-label"),r=o&&o.getAttribute("data-value")||"";g&&(g.tagName==="line"?g.style.stroke=r:g.style.fill=r)}}]),c}(y.default);l.default=n},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function i(c,u){for(var o=0;o<u.length;o++){var a=u[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}}return function(c,u,o){return u&&i(c.prototype,u),o&&i(c,o),c}}(),_=function i(c,u,o){c===null&&(c=Function.prototype);var a=Object.getOwnPropertyDescriptor(c,u);if(a===void 0){var g=Object.getPrototypeOf(c);return g===null?void 0:i(g,u,o)}else{if("value"in a)return a.value;var r=a.get;return r===void 0?void 0:r.call(o)}},v=h(28),y=w(v);function w(i){return i&&i.__esModule?i:{default:i}}function f(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")}function d(i,c){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:i}function t(i,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);i.prototype=Object.create(c&&c.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(i,c):i.__proto__=c)}var n=function(i){t(c,i);function c(u,o){f(this,c);var a=d(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return a.container.classList.add("ql-icon-picker"),[].forEach.call(a.container.querySelectorAll(".ql-picker-item"),function(g){g.innerHTML=o[g.getAttribute("data-value")||""]}),a.defaultItem=a.container.querySelector(".ql-selected"),a.selectItem(a.defaultItem),a}return N(c,[{key:"selectItem",value:function(o,a){_(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"selectItem",this).call(this,o,a),o=o||this.defaultItem,this.label.innerHTML=o.innerHTML}}]),c}(y.default);l.default=n},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function y(w,f){for(var d=0;d<f.length;d++){var t=f[d];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(w,t.key,t)}}return function(w,f,d){return f&&y(w.prototype,f),d&&y(w,d),w}}();function _(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}var v=function(){function y(w,f){var d=this;_(this,y),this.quill=w,this.boundsContainer=f||document.body,this.root=w.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return N(y,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var d=f.left+f.width/2-this.root.offsetWidth/2,t=f.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=t+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect(),c=0;if(i.right>n.right&&(c=n.right-i.right,this.root.style.left=d+c+"px"),i.left<n.left&&(c=n.left-i.left,this.root.style.left=d+c+"px"),i.bottom>n.bottom){var u=i.bottom-i.top,o=f.bottom-f.top+u;this.root.style.top=t-o+"px",this.root.classList.add("ql-flip")}return c}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),y}();l.default=v},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function p(m,k){var E=[],P=!0,D=!1,B=void 0;try{for(var U=m[Symbol.iterator](),$;!(P=($=U.next()).done)&&(E.push($.value),!(k&&E.length===k));P=!0);}catch(M){D=!0,B=M}finally{try{!P&&U.return&&U.return()}finally{if(D)throw B}}return E}return function(m,k){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return p(m,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function p(m,k,E){m===null&&(m=Function.prototype);var P=Object.getOwnPropertyDescriptor(m,k);if(P===void 0){var D=Object.getPrototypeOf(m);return D===null?void 0:p(D,k,E)}else{if("value"in P)return P.value;var B=P.get;return B===void 0?void 0:B.call(E)}},v=function(){function p(m,k){for(var E=0;E<k.length;E++){var P=k[E];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(m,P.key,P)}}return function(m,k,E){return k&&p(m.prototype,k),E&&p(m,E),m}}(),y=h(3),w=g(y),f=h(8),d=g(f),t=h(43),n=g(t),i=h(27),c=g(i),u=h(15),o=h(41),a=g(o);function g(p){return p&&p.__esModule?p:{default:p}}function r(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function x(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function S(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var b=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],O=function(p){S(m,p);function m(k,E){r(this,m),E.modules.toolbar!=null&&E.modules.toolbar.container==null&&(E.modules.toolbar.container=b);var P=x(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,k,E));return P.quill.container.classList.add("ql-snow"),P}return v(m,[{key:"extendToolbar",value:function(E){E.container.classList.add("ql-snow"),this.buildButtons([].slice.call(E.container.querySelectorAll("button")),a.default),this.buildPickers([].slice.call(E.container.querySelectorAll("select")),a.default),this.tooltip=new C(this.quill,this.options.bounds),E.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(P,D){E.handlers.link.call(E,!D.format.link)})}}]),m}(n.default);O.DEFAULTS=(0,w.default)(!0,{},n.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(m){if(m){var k=this.quill.getSelection();if(k==null||k.length==0)return;var E=this.quill.getText(k);/^\S+@\S+\.\S+$/.test(E)&&E.indexOf("mailto:")!==0&&(E="mailto:"+E);var P=this.quill.theme.tooltip;P.edit("link",E)}else this.quill.format("link",!1)}}}}});var C=function(p){S(m,p);function m(k,E){r(this,m);var P=x(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,k,E));return P.preview=P.root.querySelector("a.ql-preview"),P}return v(m,[{key:"listen",value:function(){var E=this;_(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(P){E.root.classList.contains("ql-editing")?E.save():E.edit("link",E.preview.textContent),P.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(P){if(E.linkRange!=null){var D=E.linkRange;E.restoreFocus(),E.quill.formatText(D,"link",!1,d.default.sources.USER),delete E.linkRange}P.preventDefault(),E.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(P,D,B){if(P!=null){if(P.length===0&&B===d.default.sources.USER){var U=E.quill.scroll.descendant(c.default,P.index),$=N(U,2),M=$[0],I=$[1];if(M!=null){E.linkRange=new u.Range(P.index-I,M.length());var T=c.default.formats(M.domNode);E.preview.textContent=T,E.preview.setAttribute("href",T),E.show(),E.position(E.quill.getBounds(E.linkRange));return}}else delete E.linkRange;E.hide()}})}},{key:"show",value:function(){_(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),m}(t.BaseTooltip);C.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),l.default=O},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(29),_=Y(N),v=h(36),y=h(38),w=h(64),f=h(65),d=Y(f),t=h(66),n=Y(t),i=h(67),c=Y(i),u=h(37),o=h(26),a=h(39),g=h(40),r=h(56),x=Y(r),S=h(68),b=Y(S),O=h(27),C=Y(O),p=h(69),m=Y(p),k=h(70),E=Y(k),P=h(71),D=Y(P),B=h(72),U=Y(B),$=h(73),M=Y($),I=h(13),T=Y(I),R=h(74),q=Y(R),H=h(75),z=Y(H),L=h(57),F=Y(L),K=h(41),V=Y(K),Q=h(28),ee=Y(Q),te=h(59),re=Y(te),le=h(60),oe=Y(le),ge=h(61),he=Y(ge),G=h(108),Z=Y(G),X=h(62),J=Y(X);function Y(se){return se&&se.__esModule?se:{default:se}}_.default.register({"attributors/attribute/direction":y.DirectionAttribute,"attributors/class/align":v.AlignClass,"attributors/class/background":u.BackgroundClass,"attributors/class/color":o.ColorClass,"attributors/class/direction":y.DirectionClass,"attributors/class/font":a.FontClass,"attributors/class/size":g.SizeClass,"attributors/style/align":v.AlignStyle,"attributors/style/background":u.BackgroundStyle,"attributors/style/color":o.ColorStyle,"attributors/style/direction":y.DirectionStyle,"attributors/style/font":a.FontStyle,"attributors/style/size":g.SizeStyle},!0),_.default.register({"formats/align":v.AlignClass,"formats/direction":y.DirectionClass,"formats/indent":w.IndentClass,"formats/background":u.BackgroundStyle,"formats/color":o.ColorStyle,"formats/font":a.FontClass,"formats/size":g.SizeClass,"formats/blockquote":d.default,"formats/code-block":T.default,"formats/header":n.default,"formats/list":c.default,"formats/bold":x.default,"formats/code":I.Code,"formats/italic":b.default,"formats/link":C.default,"formats/script":m.default,"formats/strike":E.default,"formats/underline":D.default,"formats/image":U.default,"formats/video":M.default,"formats/list/item":i.ListItem,"modules/formula":q.default,"modules/syntax":z.default,"modules/toolbar":F.default,"themes/bubble":Z.default,"themes/snow":J.default,"ui/icons":V.default,"ui/picker":ee.default,"ui/icon-picker":oe.default,"ui/color-picker":re.default,"ui/tooltip":he.default},!0),l.default=_.default},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.IndentClass=void 0;var N=function(){function c(u,o){for(var a=0;a<o.length;a++){var g=o[a];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,o,a){return o&&c(u.prototype,o),a&&c(u,a),u}}(),_=function c(u,o,a){u===null&&(u=Function.prototype);var g=Object.getOwnPropertyDescriptor(u,o);if(g===void 0){var r=Object.getPrototypeOf(u);return r===null?void 0:c(r,o,a)}else{if("value"in g)return g.value;var x=g.get;return x===void 0?void 0:x.call(a)}},v=h(0),y=w(v);function w(c){return c&&c.__esModule?c:{default:c}}function f(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function d(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function t(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var n=function(c){t(u,c);function u(){return f(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return N(u,[{key:"add",value:function(a,g){if(g==="+1"||g==="-1"){var r=this.value(a)||0;g=g==="+1"?r+1:r-1}return g===0?(this.remove(a),!0):_(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"add",this).call(this,a,g)}},{key:"canAdd",value:function(a,g){return _(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"canAdd",this).call(this,a,g)||_(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"canAdd",this).call(this,a,parseInt(g))}},{key:"value",value:function(a){return parseInt(_(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"value",this).call(this,a))||void 0}}]),u}(y.default.Attributor.Class),i=new n("indent","ql-indent",{scope:y.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});l.IndentClass=i},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(4),_=v(N);function v(t){return t&&t.__esModule?t:{default:t}}function y(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function w(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t}function f(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(t){f(n,t);function n(){return y(this,n),w(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return n}(_.default);d.blotName="blockquote",d.tagName="blockquote",l.default=d},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function n(i,c){for(var u=0;u<c.length;u++){var o=c[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,c,u){return c&&n(i.prototype,c),u&&n(i,u),i}}(),_=h(4),v=y(_);function y(n){return n&&n.__esModule?n:{default:n}}function w(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function f(n,i){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:n}function d(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(n,i):n.__proto__=i)}var t=function(n){d(i,n);function i(){return w(this,i),f(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return N(i,null,[{key:"formats",value:function(u){return this.tagName.indexOf(u.tagName)+1}}]),i}(v.default);t.blotName="header",t.tagName=["H1","H2","H3","H4","H5","H6"],l.default=t},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.ListItem=void 0;var N=function(){function r(x,S){for(var b=0;b<S.length;b++){var O=S[b];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(x,O.key,O)}}return function(x,S,b){return S&&r(x.prototype,S),b&&r(x,b),x}}(),_=function r(x,S,b){x===null&&(x=Function.prototype);var O=Object.getOwnPropertyDescriptor(x,S);if(O===void 0){var C=Object.getPrototypeOf(x);return C===null?void 0:r(C,S,b)}else{if("value"in O)return O.value;var p=O.get;return p===void 0?void 0:p.call(b)}},v=h(0),y=n(v),w=h(4),f=n(w),d=h(25),t=n(d);function n(r){return r&&r.__esModule?r:{default:r}}function i(r,x,S){return x in r?Object.defineProperty(r,x,{value:S,enumerable:!0,configurable:!0,writable:!0}):r[x]=S,r}function c(r,x){if(!(r instanceof x))throw new TypeError("Cannot call a class as a function")}function u(r,x){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:r}function o(r,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);r.prototype=Object.create(x&&x.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(r,x):r.__proto__=x)}var a=function(r){o(x,r);function x(){return c(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return N(x,[{key:"format",value:function(b,O){b===g.blotName&&!O?this.replaceWith(y.default.create(this.statics.scope)):_(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,b,O)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():_(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(b,O){return this.parent.isolate(this.offset(this.parent),this.length()),b===this.parent.statics.blotName?(this.parent.replaceWith(b,O),this):(this.parent.unwrap(),_(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"replaceWith",this).call(this,b,O))}}],[{key:"formats",value:function(b){return b.tagName===this.tagName?void 0:_(x.__proto__||Object.getPrototypeOf(x),"formats",this).call(this,b)}}]),x}(f.default);a.blotName="list-item",a.tagName="LI";var g=function(r){o(x,r),N(x,null,[{key:"create",value:function(b){var O=b==="ordered"?"OL":"UL",C=_(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,O);return(b==="checked"||b==="unchecked")&&C.setAttribute("data-checked",b==="checked"),C}},{key:"formats",value:function(b){if(b.tagName==="OL")return"ordered";if(b.tagName==="UL")return b.hasAttribute("data-checked")?b.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function x(S){c(this,x);var b=u(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,S)),O=function(p){if(p.target.parentNode===S){var m=b.statics.formats(S),k=y.default.find(p.target);m==="checked"?k.format("list","unchecked"):m==="unchecked"&&k.format("list","checked")}};return S.addEventListener("touchstart",O),S.addEventListener("mousedown",O),b}return N(x,[{key:"format",value:function(b,O){this.children.length>0&&this.children.tail.format(b,O)}},{key:"formats",value:function(){return i({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(b,O){if(b instanceof a)_(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,b,O);else{var C=O==null?this.length():O.offset(this),p=this.split(C);p.parent.insertBefore(b,p)}}},{key:"optimize",value:function(b){_(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,b);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&O.domNode.tagName===this.domNode.tagName&&O.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(O.moveChildren(this),O.remove())}},{key:"replace",value:function(b){if(b.statics.blotName!==this.statics.blotName){var O=y.default.create(this.statics.defaultChild);b.moveChildren(O),this.appendChild(O)}_(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"replace",this).call(this,b)}}]),x}(t.default);g.blotName="list",g.scope=y.default.Scope.BLOCK_BLOT,g.tagName=["OL","UL"],g.defaultChild="list-item",g.allowedChildren=[a],l.ListItem=a,l.default=g},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(56),_=v(N);function v(t){return t&&t.__esModule?t:{default:t}}function y(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function w(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t}function f(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(t){f(n,t);function n(){return y(this,n),w(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return n}(_.default);d.blotName="italic",d.tagName=["EM","I"],l.default=d},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function i(c,u){for(var o=0;o<u.length;o++){var a=u[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}}return function(c,u,o){return u&&i(c.prototype,u),o&&i(c,o),c}}(),_=function i(c,u,o){c===null&&(c=Function.prototype);var a=Object.getOwnPropertyDescriptor(c,u);if(a===void 0){var g=Object.getPrototypeOf(c);return g===null?void 0:i(g,u,o)}else{if("value"in a)return a.value;var r=a.get;return r===void 0?void 0:r.call(o)}},v=h(6),y=w(v);function w(i){return i&&i.__esModule?i:{default:i}}function f(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")}function d(i,c){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:i}function t(i,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);i.prototype=Object.create(c&&c.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(i,c):i.__proto__=c)}var n=function(i){t(c,i);function c(){return f(this,c),d(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return N(c,null,[{key:"create",value:function(o){return o==="super"?document.createElement("sup"):o==="sub"?document.createElement("sub"):_(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this,o)}},{key:"formats",value:function(o){if(o.tagName==="SUB")return"sub";if(o.tagName==="SUP")return"super"}}]),c}(y.default);n.blotName="script",n.tagName=["SUB","SUP"],l.default=n},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(6),_=v(N);function v(t){return t&&t.__esModule?t:{default:t}}function y(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function w(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t}function f(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(t){f(n,t);function n(){return y(this,n),w(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return n}(_.default);d.blotName="strike",d.tagName="S",l.default=d},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=h(6),_=v(N);function v(t){return t&&t.__esModule?t:{default:t}}function y(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function w(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t}function f(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var d=function(t){f(n,t);function n(){return y(this,n),w(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return n}(_.default);d.blotName="underline",d.tagName="U",l.default=d},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function u(o,a){for(var g=0;g<a.length;g++){var r=a[g];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,a,g){return a&&u(o.prototype,a),g&&u(o,g),o}}(),_=function u(o,a,g){o===null&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,a);if(r===void 0){var x=Object.getPrototypeOf(o);return x===null?void 0:u(x,a,g)}else{if("value"in r)return r.value;var S=r.get;return S===void 0?void 0:S.call(g)}},v=h(0),y=f(v),w=h(27);function f(u){return u&&u.__esModule?u:{default:u}}function d(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function t(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function n(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var i=["alt","height","width"],c=function(u){n(o,u);function o(){return d(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return N(o,[{key:"format",value:function(g,r){i.indexOf(g)>-1?r?this.domNode.setAttribute(g,r):this.domNode.removeAttribute(g):_(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"format",this).call(this,g,r)}}],[{key:"create",value:function(g){var r=_(o.__proto__||Object.getPrototypeOf(o),"create",this).call(this,g);return typeof g=="string"&&r.setAttribute("src",this.sanitize(g)),r}},{key:"formats",value:function(g){return i.reduce(function(r,x){return g.hasAttribute(x)&&(r[x]=g.getAttribute(x)),r},{})}},{key:"match",value:function(g){return/\.(jpe?g|gif|png)$/.test(g)||/^data:image\/.+;base64/.test(g)}},{key:"sanitize",value:function(g){return(0,w.sanitize)(g,["http","https","data"])?g:"//:0"}},{key:"value",value:function(g){return g.getAttribute("src")}}]),o}(y.default.Embed);c.blotName="image",c.tagName="IMG",l.default=c},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0});var N=function(){function u(o,a){for(var g=0;g<a.length;g++){var r=a[g];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,a,g){return a&&u(o.prototype,a),g&&u(o,g),o}}(),_=function u(o,a,g){o===null&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,a);if(r===void 0){var x=Object.getPrototypeOf(o);return x===null?void 0:u(x,a,g)}else{if("value"in r)return r.value;var S=r.get;return S===void 0?void 0:S.call(g)}},v=h(4),y=h(27),w=f(y);function f(u){return u&&u.__esModule?u:{default:u}}function d(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function t(u,o){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:u}function n(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(u,o):u.__proto__=o)}var i=["height","width"],c=function(u){n(o,u);function o(){return d(this,o),t(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return N(o,[{key:"format",value:function(g,r){i.indexOf(g)>-1?r?this.domNode.setAttribute(g,r):this.domNode.removeAttribute(g):_(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"format",this).call(this,g,r)}}],[{key:"create",value:function(g){var r=_(o.__proto__||Object.getPrototypeOf(o),"create",this).call(this,g);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(g)),r}},{key:"formats",value:function(g){return i.reduce(function(r,x){return g.hasAttribute(x)&&(r[x]=g.getAttribute(x)),r},{})}},{key:"sanitize",value:function(g){return w.default.sanitize(g)}},{key:"value",value:function(g){return g.getAttribute("src")}}]),o}(v.BlockEmbed);c.blotName="video",c.className="ql-video",c.tagName="IFRAME",l.default=c},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.FormulaBlot=void 0;var N=function(){function g(r,x){for(var S=0;S<x.length;S++){var b=x[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(r,b.key,b)}}return function(r,x,S){return x&&g(r.prototype,x),S&&g(r,S),r}}(),_=function g(r,x,S){r===null&&(r=Function.prototype);var b=Object.getOwnPropertyDescriptor(r,x);if(b===void 0){var O=Object.getPrototypeOf(r);return O===null?void 0:g(O,x,S)}else{if("value"in b)return b.value;var C=b.get;return C===void 0?void 0:C.call(S)}},v=h(35),y=n(v),w=h(5),f=n(w),d=h(9),t=n(d);function n(g){return g&&g.__esModule?g:{default:g}}function i(g,r){if(!(g instanceof r))throw new TypeError("Cannot call a class as a function")}function c(g,r){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:g}function u(g,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);g.prototype=Object.create(r&&r.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(g,r):g.__proto__=r)}var o=function(g){u(r,g);function r(){return i(this,r),c(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return N(r,null,[{key:"create",value:function(S){var b=_(r.__proto__||Object.getPrototypeOf(r),"create",this).call(this,S);return typeof S=="string"&&(window.katex.render(S,b,{throwOnError:!1,errorColor:"#f00"}),b.setAttribute("data-value",S)),b}},{key:"value",value:function(S){return S.getAttribute("data-value")}}]),r}(y.default);o.blotName="formula",o.className="ql-formula",o.tagName="SPAN";var a=function(g){u(r,g),N(r,null,[{key:"register",value:function(){f.default.register(o,!0)}}]);function r(){i(this,r);var x=c(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return x}return r}(t.default);l.FormulaBlot=o,l.default=a},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.CodeToken=l.CodeBlock=void 0;var N=function(){function S(b,O){for(var C=0;C<O.length;C++){var p=O[C];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(b,p.key,p)}}return function(b,O,C){return O&&S(b.prototype,O),C&&S(b,C),b}}(),_=function S(b,O,C){b===null&&(b=Function.prototype);var p=Object.getOwnPropertyDescriptor(b,O);if(p===void 0){var m=Object.getPrototypeOf(b);return m===null?void 0:S(m,O,C)}else{if("value"in p)return p.value;var k=p.get;return k===void 0?void 0:k.call(C)}},v=h(0),y=c(v),w=h(5),f=c(w),d=h(9),t=c(d),n=h(13),i=c(n);function c(S){return S&&S.__esModule?S:{default:S}}function u(S,b){if(!(S instanceof b))throw new TypeError("Cannot call a class as a function")}function o(S,b){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:S}function a(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(S,b):S.__proto__=b)}var g=function(S){a(b,S);function b(){return u(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return N(b,[{key:"replaceWith",value:function(C){this.domNode.textContent=this.domNode.textContent,this.attach(),_(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"replaceWith",this).call(this,C)}},{key:"highlight",value:function(C){var p=this.domNode.textContent;this.cachedText!==p&&((p.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=C(p),this.domNode.normalize(),this.attach()),this.cachedText=p)}}]),b}(i.default);g.className="ql-syntax";var r=new y.default.Attributor.Class("token","hljs",{scope:y.default.Scope.INLINE}),x=function(S){a(b,S),N(b,null,[{key:"register",value:function(){f.default.register(r,!0),f.default.register(g,!0)}}]);function b(O,C){u(this,b);var p=o(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,O,C));if(typeof p.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var m=null;return p.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(m),m=setTimeout(function(){p.highlight(),m=null},p.options.interval)}),p.highlight(),p}return N(b,[{key:"highlight",value:function(){var C=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var p=this.quill.getSelection();this.quill.scroll.descendants(g).forEach(function(m){m.highlight(C.options.highlight)}),this.quill.update(f.default.sources.SILENT),p!=null&&this.quill.setSelection(p,f.default.sources.SILENT)}}}]),b}(t.default);x.DEFAULTS={highlight:function(){return window.hljs==null?null:function(S){var b=window.hljs.highlightAuto(S);return b.value}}(),interval:1e3},l.CodeBlock=g,l.CodeToken=r,l.default=x},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(s,l){s.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(s,l){s.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(s,l){s.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(s,l){s.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(s,l){s.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(s,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BubbleTooltip=void 0;var N=function b(O,C,p){O===null&&(O=Function.prototype);var m=Object.getOwnPropertyDescriptor(O,C);if(m===void 0){var k=Object.getPrototypeOf(O);return k===null?void 0:b(k,C,p)}else{if("value"in m)return m.value;var E=m.get;return E===void 0?void 0:E.call(p)}},_=function(){function b(O,C){for(var p=0;p<C.length;p++){var m=C[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(O,m.key,m)}}return function(O,C,p){return C&&b(O.prototype,C),p&&b(O,p),O}}(),v=h(3),y=u(v),w=h(8),f=u(w),d=h(43),t=u(d),n=h(15),i=h(41),c=u(i);function u(b){return b&&b.__esModule?b:{default:b}}function o(b,O){if(!(b instanceof O))throw new TypeError("Cannot call a class as a function")}function a(b,O){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:b}function g(b,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);b.prototype=Object.create(O&&O.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(b,O):b.__proto__=O)}var r=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],x=function(b){g(O,b);function O(C,p){o(this,O),p.modules.toolbar!=null&&p.modules.toolbar.container==null&&(p.modules.toolbar.container=r);var m=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,C,p));return m.quill.container.classList.add("ql-bubble"),m}return _(O,[{key:"extendToolbar",value:function(p){this.tooltip=new S(this.quill,this.options.bounds),this.tooltip.root.appendChild(p.container),this.buildButtons([].slice.call(p.container.querySelectorAll("button")),c.default),this.buildPickers([].slice.call(p.container.querySelectorAll("select")),c.default)}}]),O}(t.default);x.DEFAULTS=(0,y.default)(!0,{},t.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(O){O?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var S=function(b){g(O,b);function O(C,p){o(this,O);var m=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,C,p));return m.quill.on(f.default.events.EDITOR_CHANGE,function(k,E,P,D){if(k===f.default.events.SELECTION_CHANGE)if(E!=null&&E.length>0&&D===f.default.sources.USER){m.show(),m.root.style.left="0px",m.root.style.width="",m.root.style.width=m.root.offsetWidth+"px";var B=m.quill.getLines(E.index,E.length);if(B.length===1)m.position(m.quill.getBounds(E));else{var U=B[B.length-1],$=m.quill.getIndex(U),M=Math.min(U.length()-1,E.index+E.length-$),I=m.quill.getBounds(new n.Range($,M));m.position(I)}}else document.activeElement!==m.textbox&&m.quill.hasFocus()&&m.hide()}),m}return _(O,[{key:"listen",value:function(){var p=this;N(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){p.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!p.root.classList.contains("ql-hidden")){var m=p.quill.getSelection();m!=null&&p.position(p.quill.getBounds(m))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(p){var m=N(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"position",this).call(this,p),k=this.root.querySelector(".ql-tooltip-arrow");if(k.style.marginLeft="",m===0)return m;k.style.marginLeft=-1*m-k.offsetWidth/2+"px"}}]),O}(d.BaseTooltip);S.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),l.BubbleTooltip=S,l.default=x},function(s,l,h){s.exports=h(63)}]).default})})(dn);var af=dn.exports,lf=xe&&xe.__extends||function(){var j=function(A,s){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var N in h)h.hasOwnProperty(N)&&(l[N]=h[N])},j(A,s)};return function(A,s){j(A,s);function l(){this.constructor=A}A.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),tt=xe&&xe.__assign||function(){return tt=Object.assign||function(j){for(var A,s=1,l=arguments.length;s<l;s++){A=arguments[s];for(var h in A)Object.prototype.hasOwnProperty.call(A,h)&&(j[h]=A[h])}return j},tt.apply(this,arguments)},of=xe&&xe.__spreadArrays||function(){for(var j=0,A=0,s=arguments.length;A<s;A++)j+=arguments[A].length;for(var l=Array(j),h=0,A=0;A<s;A++)for(var N=arguments[A],_=0,v=N.length;_<v;_++,h++)l[h]=N[_];return l},dt=xe&&xe.__importDefault||function(j){return j&&j.__esModule?j:{default:j}},je=dt(W),cf=dt(Xn),ze=dt(sf),kr=dt(af),df=function(j){lf(A,j);function A(s){var l=j.call(this,s)||this;l.dirtyProps=["modules","formats","bounds","theme","children"],l.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],l.state={generation:0},l.selection=null,l.onEditorChange=function(N,_,v,y){var w,f,d,t;N==="text-change"?(f=(w=l).onEditorChangeText)===null||f===void 0||f.call(w,l.editor.root.innerHTML,_,y,l.unprivilegedEditor):N==="selection-change"&&((t=(d=l).onEditorChangeSelection)===null||t===void 0||t.call(d,_,y,l.unprivilegedEditor))};var h=l.isControlled()?s.value:s.defaultValue;return l.value=h??"",l}return A.prototype.validateProps=function(s){var l;if(je.default.Children.count(s.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(je.default.Children.count(s.children)){var h=je.default.Children.only(s.children);if(((l=h)===null||l===void 0?void 0:l.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&s.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},A.prototype.shouldComponentUpdate=function(s,l){var h=this,N;if(this.validateProps(s),!this.editor||this.state.generation!==l.generation)return!0;if("value"in s){var _=this.getEditorContents(),v=(N=s.value,N??"");this.isEqualValue(v,_)||this.setEditorContents(this.editor,v)}return s.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,s.readOnly),of(this.cleanProps,this.dirtyProps).some(function(y){return!ze.default(s[y],h.props[y])})},A.prototype.shouldComponentRegenerate=function(s){var l=this;return this.dirtyProps.some(function(h){return!ze.default(s[h],l.props[h])})},A.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},A.prototype.componentWillUnmount=function(){this.destroyEditor()},A.prototype.componentDidUpdate=function(s,l){var h=this;if(this.editor&&this.shouldComponentRegenerate(s)){var N=this.editor.getContents(),_=this.editor.getSelection();this.regenerationSnapshot={delta:N,selection:_},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==l.generation){var v=this.regenerationSnapshot,N=v.delta,y=v.selection;delete this.regenerationSnapshot,this.instantiateEditor();var w=this.editor;w.setContents(N),Ar(function(){return h.setEditorSelection(w,y)})}},A.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},A.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},A.prototype.isControlled=function(){return"value"in this.props},A.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},A.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},A.prototype.createEditor=function(s,l){var h=new kr.default(s,l);return l.tabIndex!=null&&this.setEditorTabIndex(h,l.tabIndex),this.hookEditor(h),h},A.prototype.hookEditor=function(s){this.unprivilegedEditor=this.makeUnprivilegedEditor(s),s.on("editor-change",this.onEditorChange)},A.prototype.unhookEditor=function(s){s.off("editor-change",this.onEditorChange)},A.prototype.getEditorContents=function(){return this.value},A.prototype.getEditorSelection=function(){return this.selection},A.prototype.isDelta=function(s){return s&&s.ops},A.prototype.isEqualValue=function(s,l){return this.isDelta(s)&&this.isDelta(l)?ze.default(s.ops,l.ops):ze.default(s,l)},A.prototype.setEditorContents=function(s,l){var h=this;this.value=l;var N=this.getEditorSelection();typeof l=="string"?s.setContents(s.clipboard.convert(l)):s.setContents(l),Ar(function(){return h.setEditorSelection(s,N)})},A.prototype.setEditorSelection=function(s,l){if(this.selection=l,l){var h=s.getLength();l.index=Math.max(0,Math.min(l.index,h-1)),l.length=Math.max(0,Math.min(l.length,h-1-l.index)),s.setSelection(l)}},A.prototype.setEditorTabIndex=function(s,l){var h,N;!((N=(h=s)===null||h===void 0?void 0:h.scroll)===null||N===void 0)&&N.domNode&&(s.scroll.domNode.tabIndex=l)},A.prototype.setEditorReadOnly=function(s,l){l?s.disable():s.enable()},A.prototype.makeUnprivilegedEditor=function(s){var l=s;return{getHTML:function(){return l.root.innerHTML},getLength:l.getLength.bind(l),getText:l.getText.bind(l),getContents:l.getContents.bind(l),getSelection:l.getSelection.bind(l),getBounds:l.getBounds.bind(l)}},A.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var s=cf.default.findDOMNode(this.editingArea);if(!s)throw new Error("Cannot find element for editing area");if(s.nodeType===3)throw new Error("Editing area cannot be a text node");return s},A.prototype.renderEditingArea=function(){var s=this,l=this.props,h=l.children,N=l.preserveWhitespace,_=this.state.generation,v={key:_,ref:function(y){s.editingArea=y}};return je.default.Children.count(h)?je.default.cloneElement(je.default.Children.only(h),v):N?je.default.createElement("pre",tt({},v)):je.default.createElement("div",tt({},v))},A.prototype.render=function(){var s;return je.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(s=this.props.className,s??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},A.prototype.onEditorChangeText=function(s,l,h,N){var _,v;if(this.editor){var y=this.isDelta(this.value)?N.getContents():N.getHTML();y!==this.getEditorContents()&&(this.lastDeltaChangeSet=l,this.value=y,(v=(_=this.props).onChange)===null||v===void 0||v.call(_,s,l,h,N))}},A.prototype.onEditorChangeSelection=function(s,l,h){var N,_,v,y,w,f;if(this.editor){var d=this.getEditorSelection(),t=!d&&s,n=d&&!s;ze.default(s,d)||(this.selection=s,(_=(N=this.props).onChangeSelection)===null||_===void 0||_.call(N,s,l,h),t?(y=(v=this.props).onFocus)===null||y===void 0||y.call(v,s,l,h):n&&((f=(w=this.props).onBlur)===null||f===void 0||f.call(w,d,l,h)))}},A.prototype.focus=function(){this.editor&&this.editor.focus()},A.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},A.displayName="React Quill",A.Quill=kr.default,A.defaultProps={theme:"snow",modules:{},readOnly:!1},A}(je.default.Component);function Ar(j){Promise.resolve().then(j)}var uf=df;const ff=Yn(uf);function hf(){const j=pe(),A=ne(nt),s=ne(qr),l=ne(Mr),h=ne(Fr),N=ne(Br),_=A.create||A.edit,v=A.edit&&s,[y,w]=W.useState({title:"",slug:"",excerpt:"",content:"",category:"",tags:"",status:"draft",metaTitle:"",metaDescription:"",publishAt:"",coverImage:null}),[f,d]=W.useState(null),[t,n]=W.useState({});W.useEffect(()=>{v&&s&&!l&&j($r(s))},[j,v,s,l]),W.useEffect(()=>{var r;v&&l?(w({title:l.title||"",slug:l.slug||"",excerpt:l.excerpt||"",content:l.content||"",category:l.category||"",tags:Array.isArray(l.tags)?l.tags.join(", "):"",status:l.status||"draft",metaTitle:l.metaTitle||"",metaDescription:l.metaDescription||"",publishAt:l.publishAt?new Date(l.publishAt).toISOString().slice(0,16):"",coverImage:null}),d(((r=l.coverImage)==null?void 0:r.url)||null)):v||(w({title:"",slug:"",excerpt:"",content:"",category:"",tags:"",status:"draft",metaTitle:"",metaDescription:"",publishAt:"",coverImage:null}),d(null))},[v,l]),W.useEffect(()=>{n({})},[y]);const i=r=>{const{name:x,value:S}=r.target;if(w(b=>({...b,[x]:S})),x==="title"&&!v){const b=S.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();w(O=>({...O,slug:b}))}},c=r=>{w(x=>({...x,content:r}))},u=r=>{const x=r.target.files[0];if(x){w(b=>({...b,coverImage:x}));const S=new FileReader;S.onload=b=>{d(b.target.result)},S.readAsDataURL(x)}},o=()=>{const r={};return y.title.trim()||(r.title="Title is required"),y.slug.trim()||(r.slug="Slug is required"),y.content.trim()||(r.content="Content is required"),y.category||(r.category="Category is required"),y.status==="scheduled"&&!y.publishAt&&(r.publishAt="Publish date is required for scheduled posts"),n(r),Object.keys(r).length===0},a=async r=>{if(r.preventDefault(),!!o())try{const x={...y};x.tags&&(x.tags=x.tags.split(",").map(S=>S.trim()).filter(S=>S)),x.publishAt&&(x.publishAt=new Date(x.publishAt).toISOString()),v?await j(Jn({id:s,blogData:x})).unwrap():await j(es(x)).unwrap(),g()}catch(x){console.error("Error saving blog:",x)}},g=()=>{j(Ve(v?"edit":"create")),w({title:"",slug:"",excerpt:"",content:"",category:"",tags:"",status:"draft",metaTitle:"",metaDescription:"",publishAt:"",coverImage:null}),d(null),n({})};return _?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:g}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsx("div",{className:"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:v&&!l&&h?e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading blog data..."})]})}):e.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:v?"Edit Blog Post":"Create New Blog Post"}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ye,{className:"w-6 h-6"})})]}),N&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-3",children:e.jsx("div",{className:"text-red-800 text-sm",children:N})}),e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title *"}),e.jsx("input",{type:"text",name:"title",id:"title",value:y.title,onChange:i,className:`mt-1 block w-full border rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${t.title?"border-red-300":"border-gray-300"}`,placeholder:"Enter blog title"}),t.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.title})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700",children:"Slug *"}),e.jsx("input",{type:"text",name:"slug",id:"slug",value:y.slug,onChange:i,className:`mt-1 block w-full border rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${t.slug?"border-red-300":"border-gray-300"}`,placeholder:"url-friendly-slug"}),t.slug&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.slug})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category *"}),e.jsxs("select",{name:"category",id:"category",value:y.category,onChange:i,className:`mt-1 block w-full border rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${t.category?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"jewelry",children:"Jewelry"}),e.jsx("option",{value:"fragrance",children:"Fragrance"}),e.jsx("option",{value:"lifestyle",children:"Lifestyle"}),e.jsx("option",{value:"guide",children:"Guide"}),e.jsx("option",{value:"news",children:"News"})]}),t.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.category})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{name:"status",id:"status",value:y.status,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"scheduled",children:"Scheduled"})]})]}),y.status==="scheduled"&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"publishAt",className:"block text-sm font-medium text-gray-700",children:"Publish Date *"}),e.jsx("input",{type:"datetime-local",name:"publishAt",id:"publishAt",value:y.publishAt,onChange:i,className:`mt-1 block w-full border rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${t.publishAt?"border-red-300":"border-gray-300"}`}),t.publishAt&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.publishAt})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700",children:"Tags"}),e.jsx("input",{type:"text",name:"tags",id:"tags",value:y.tags,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"tag1, tag2, tag3"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Separate tags with commas"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"excerpt",className:"block text-sm font-medium text-gray-700",children:"Excerpt"}),e.jsx("textarea",{name:"excerpt",id:"excerpt",rows:3,value:y.excerpt,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Brief description of the blog post"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"coverImage",className:"block text-sm font-medium text-gray-700",children:"Cover Image"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:e.jsxs("div",{className:"space-y-1 text-center",children:[f?e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:f,alt:"Preview",className:"mx-auto h-32 w-auto rounded-lg"})}):e.jsx(Ur,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"coverImage",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[e.jsx("span",{children:f?"Change image":"Upload a file"}),e.jsx("input",{id:"coverImage",name:"coverImage",type:"file",accept:"image/*",onChange:u,className:"sr-only"})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),e.jsx("div",{className:`border rounded-md ${t.content?"border-red-300":"border-gray-300"}`,children:e.jsx(ff,{theme:"snow",value:y.content,onChange:c,placeholder:"Write your blog content here...",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],[{align:[]}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","indent","link","image","color","background","align"],style:{minHeight:"200px"}})}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"SEO Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"metaTitle",className:"block text-sm font-medium text-gray-700",children:"Meta Title"}),e.jsx("input",{type:"text",name:"metaTitle",id:"metaTitle",value:y.metaTitle,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"SEO title for search engines"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"metaDescription",className:"block text-sm font-medium text-gray-700",children:"Meta Description"}),e.jsx("textarea",{name:"metaDescription",id:"metaDescription",rows:3,value:y.metaDescription,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"SEO description for search engines"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),v?"Updating...":"Creating..."]}):v?"Update Blog":"Create Blog"})]})]})]})})]})}):null}function mf(){var N,_;const j=pe(),A=ne(nt),s=ne(Mr);if(!A.details||!s)return null;const h=v=>{switch(v){case"published":return"bg-green-100 text-green-800";case"draft":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Blog Details"}),e.jsx("button",{onClick:()=>j(Ve("details")),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${h(s.status)}`,children:s.status}),s.category&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:s.category})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.title}),s.excerpt&&e.jsx("p",{className:"text-gray-600 text-lg mb-4",children:s.excerpt}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{}),e.jsxs("span",{children:["By ",((N=s.author)==null?void 0:N.name)||"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{}),e.jsxs("span",{children:["Created ",be(s.createdAt)]})]}),s.publishAt&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{}),e.jsxs("span",{children:["Published ",be(s.publishAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{}),e.jsxs("span",{children:[s.views||0," views"]})]})]})]}),((_=s.coverImage)==null?void 0:_.url)&&e.jsx("div",{className:"mb-6",children:e.jsx("img",{src:s.coverImage.url,alt:s.coverImage.alt||s.title,className:"w-full h-64 object-cover rounded-lg"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Metadata"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Slug:"}),e.jsx("span",{className:"ml-2 font-mono text-gray-800",children:s.slug})]}),s.readingTime&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Reading Time:"}),e.jsxs("span",{className:"ml-2",children:[s.readingTime," minutes"]})]}),s.metaTitle&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Meta Title:"}),e.jsx("span",{className:"ml-2",children:s.metaTitle})]}),s.metaDescription&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Meta Description:"}),e.jsx("span",{className:"ml-2",children:s.metaDescription})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Tags"}),s.tags&&s.tags.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((v,y)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm",children:v},y))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No tags assigned"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Content"}),e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s.content}})]})]}),e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t bg-gray-50",children:e.jsx("button",{onClick:()=>j(Ve("details")),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Close"})})]})})}function pf(){const j=pe(),A=ne(nt),s=ne(qr),l=ne(Fr);if(!A.delete)return null;const N=async()=>{s&&await j(Hr(s))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delete Blog"}),e.jsx("button",{onClick:()=>j(Ve("delete")),className:"text-gray-400 hover:text-gray-600",disabled:l,children:e.jsx(ye,{size:24})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(zr,{className:"text-red-600",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure you want to delete this blog?"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"This action cannot be undone. The blog will be permanently removed from the system."})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t bg-gray-50",children:[e.jsx("button",{onClick:()=>j(Ve("delete")),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",disabled:l,children:"Cancel"}),e.jsxs("button",{onClick:N,disabled:l,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Delete Blog"]})]})]})})}function gf(){const j=pe(),A=ne(ts),s=ne(rs);ne(Br),ne(ns),ne(nt);const[l,h]=W.useState(""),[N,_]=W.useState("");W.useEffect(()=>{j(ss({page:1,limit:50}))},[j]);const v=i=>({published:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",archived:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",y=async(i,c)=>{try{await j(ls({id:i,status:c})).unwrap()}catch(u){console.error("Failed to update blog status:",u)}},w=async i=>{if(window.confirm("Are you sure you want to delete this blog post?"))try{await j(Hr(i)).unwrap()}catch(c){console.error("Failed to delete blog:",c)}},f=()=>{j(ht({modalType:"create"}))},d=i=>{j(ht({modalType:"edit",blogId:i}))},t=i=>{j(ht({modalType:"details",blogId:i})),j($r(i))},n=A.filter(i=>{const c=i.title.toLowerCase().includes(l.toLowerCase())||i.description.toLowerCase().includes(l.toLowerCase()),u=!N||i.status===N;return c&&u});return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Blog Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create and manage blog posts"})]}),e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(De,{className:"w-4 h-4"}),"New Blog Post"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search blog posts...",value:l,onChange:i=>h(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("select",{value:N,onChange:i=>_(i.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:s?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Loading blog posts..."})]})}):n.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Bt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No blog posts found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Create your first blog post to get started"})]})}):e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Post"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Author"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Views"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(i=>{var c;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 flex-shrink-0",children:i.coverImageUrl?e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:i.coverImageUrl,alt:i.title}):e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-200 flex items-center justify-center",children:e.jsx(Bt,{className:"w-6 h-6 text-gray-400"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 max-w-xs truncate",children:i.title}),e.jsx("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:i.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:((c=i.author)==null?void 0:c.name)||"Unknown"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:be(i.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(i.status)}`,children:i.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(as,{className:"w-4 h-4 mr-1 text-gray-400"}),i.views||0]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>t(i._id),className:"text-blue-600 hover:text-blue-900 p-1",title:"View Post",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>d(i._id),className:"text-green-600 hover:text-green-900 p-1",title:"Edit Post",children:e.jsx(Kr,{className:"w-4 h-4"})}),i.status==="draft"&&e.jsx("button",{onClick:()=>y(i._id,"published"),className:"text-purple-600 hover:text-purple-900 p-1",title:"Publish Post",children:e.jsx(Er,{className:"w-4 h-4"})}),i.status==="published"&&e.jsx("button",{onClick:()=>y(i._id,"draft"),className:"text-yellow-600 hover:text-yellow-900 p-1",title:"Unpublish Post",children:e.jsx(is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(i._id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Post",children:e.jsx(Ge,{className:"w-4 h-4"})})]})})]},i._id)})})]})})}),e.jsx(hf,{}),e.jsx(mf,{}),e.jsx(pf,{})]})}const xf=(j,A)=>{const[s,l]=W.useState(j);return W.useEffect(()=>{const h=setTimeout(()=>{l(j)},A);return()=>{clearTimeout(h)}},[j,A]),s},yf=()=>{const j=pe(),{list:A,currentFAQ:s,createModal:l,editModal:h}=ne(b=>b.faqAdmin),[N,_]=W.useState(""),[v,y]=W.useState(""),[w,f]=W.useState(""),[d,t]=W.useState(1),[n,i]=W.useState(!1),c=xf(N,500),u={search:c,category:v,isActive:w};W.useEffect(()=>{const b={page:d,limit:10,...Object.fromEntries(Object.entries(u).filter(([O,C])=>C!==""))};console.log("FAQ Admin - Loading FAQs with params:",b),j(Qe(b))},[j,d,c,v,w]);const o=W.useCallback(b=>{_(b),t(1)},[]),a=W.useCallback((b,O)=>{switch(b){case"category":y(O);break;case"status":f(O);break}t(1)},[]),g=b=>{j(ys(b)),j(vs(b))},r=async b=>{if(window.confirm("Are you sure you want to delete this FAQ?"))try{await j(bs(b)).unwrap();const O={page:d,limit:10,...Object.fromEntries(Object.entries(u).filter(([C,p])=>p!==""))};j(Qe(O))}catch(O){console.error("Failed to delete FAQ:",O)}},x=async b=>{try{await j(xs(b)).unwrap();const O={page:d,limit:10,...Object.fromEntries(Object.entries(u).filter(([C,p])=>p!==""))};j(Qe(O))}catch(O){console.error("Failed to toggle FAQ status:",O)}},S=[{value:"",label:"All Categories"},{value:"general",label:"General"},{value:"products",label:"Products"},{value:"shipping",label:"Shipping"},{value:"returns",label:"Returns"},{value:"care",label:"Care Instructions"},{value:"sizing",label:"Sizing"},{value:"materials",label:"Materials"},{value:"orders",label:"Orders"}];return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"FAQ Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage chatbot FAQ responses"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>i(!n),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(os,{}),"Import CSV"]}),e.jsxs("button",{onClick:()=>j(cs()),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Vr,{}),"Add FAQ"]})]})]}),e.jsx(ds,{children:n&&e.jsx(us.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-b bg-gray-50",children:e.jsx(jf,{onClose:()=>i(!1)})})}),e.jsx("div",{className:"p-6 border-b bg-gray-50",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx($t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search FAQs...",value:N,onChange:b=>o(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("select",{value:v,onChange:b=>a("category",b.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:S.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))}),e.jsxs("select",{value:w,onChange:b=>a("status",b.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:A.status==="loading"?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):A.faqs.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx($t,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No FAQs found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filters"})]})}):e.jsx("div",{className:"divide-y divide-gray-200",children:A.faqs.map(b=>{var O;return e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 line-clamp-2",children:b.question}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.isActive?"Active":"Inactive"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:b.category})]}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-3",children:b.answer}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Priority: ",b.priority]}),e.jsxs("span",{children:["Matches: ",b.timesMatched]}),e.jsxs("span",{children:["👍 ",b.helpfulVotes]}),e.jsxs("span",{children:["👎 ",b.unhelpfulVotes]}),e.jsxs("span",{children:["Keywords: ",((O=b.keywords)==null?void 0:O.length)||0]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>x(b._id),className:`p-2 rounded-lg transition-colors ${b.isActive?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:b.isActive?"Deactivate":"Activate",children:b.isActive?e.jsx(fs,{}):e.jsx(hs,{})}),e.jsx("button",{onClick:()=>g(b._id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(Gr,{})}),e.jsx("button",{onClick:()=>r(b._id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(Ct,{})})]})]})},b._id)})})}),A.totalPages>1&&e.jsx("div",{className:"p-6 border-t bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(d-1)*20+1," to ",Math.min(d*20,A.total)," of ",A.total," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t(b=>Math.max(b-1,1)),disabled:d===1,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",children:d}),e.jsx("button",{onClick:()=>t(b=>Math.min(b+1,A.totalPages)),disabled:d===A.totalPages,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}),e.jsx(vf,{}),e.jsx(bf,{})]})},vf=()=>{const j=pe(),{createModal:A}=ne(N=>N.faqAdmin),[s,l]=W.useState({question:"",answer:"",category:"general",priority:0,keywords:"",tags:""}),h=async N=>{N.preventDefault();const _={...s,keywords:s.keywords.split(",").map(v=>v.trim()).filter(v=>v),tags:s.tags.split(",").map(v=>v.trim()).filter(v=>v)};await j(Ns(_)),A.status==="succeeded"&&(l({question:"",answer:"",category:"general",priority:0,keywords:"",tags:""}),j(Ut()))};return A.isOpen?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full m-4 max-h-[90vh] overflow-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Create New FAQ"})}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Question *"}),e.jsx("input",{type:"text",value:s.question,onChange:N=>l({...s,question:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Answer *"}),e.jsx("textarea",{value:s.answer,onChange:N=>l({...s,answer:N.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),e.jsxs("select",{value:s.category,onChange:N=>l({...s,category:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"products",children:"Products"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"returns",children:"Returns"}),e.jsx("option",{value:"care",children:"Care Instructions"}),e.jsx("option",{value:"sizing",children:"Sizing"}),e.jsx("option",{value:"materials",children:"Materials"}),e.jsx("option",{value:"orders",children:"Orders"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priority (0-10)"}),e.jsx("input",{type:"number",min:"0",max:"10",value:s.priority,onChange:N=>l({...s,priority:Number(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Keywords (comma-separated)"}),e.jsx("input",{type:"text",value:s.keywords,onChange:N=>l({...s,keywords:N.target.value}),placeholder:"jewelry, ring, gold, price...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>j(Ut()),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A.status==="loading",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:A.status==="loading"?"Creating...":"Create FAQ"})]})]})]})}):null},bf=()=>{const j=pe(),{editModal:A,currentFAQ:s}=ne(_=>_.faqAdmin),[l,h]=W.useState({question:"",answer:"",category:"general",priority:0,keywords:"",tags:"",isActive:!0});W.useEffect(()=>{s.data&&h({question:s.data.question||"",answer:s.data.answer||"",category:s.data.category||"general",priority:s.data.priority||0,keywords:(s.data.keywords||[]).join(", "),tags:(s.data.tags||[]).join(", "),isActive:s.data.isActive!==!1})},[s.data]);const N=async _=>{_.preventDefault();const v={id:A.faqId,...l,keywords:l.keywords.split(",").map(y=>y.trim()).filter(y=>y),tags:l.tags.split(",").map(y=>y.trim()).filter(y=>y)};await j(ws(v)),A.status==="succeeded"&&j(zt())};return A.isOpen?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full m-4 max-h-[90vh] overflow-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Edit FAQ"})}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Question *"}),e.jsx("input",{type:"text",value:l.question,onChange:_=>h({...l,question:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Answer *"}),e.jsx("textarea",{value:l.answer,onChange:_=>h({...l,answer:_.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),e.jsxs("select",{value:l.category,onChange:_=>h({...l,category:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"products",children:"Products"}),e.jsx("option",{value:"shipping",children:"Shipping"}),e.jsx("option",{value:"returns",children:"Returns"}),e.jsx("option",{value:"care",children:"Care Instructions"}),e.jsx("option",{value:"sizing",children:"Sizing"}),e.jsx("option",{value:"materials",children:"Materials"}),e.jsx("option",{value:"orders",children:"Orders"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priority (0-10)"}),e.jsx("input",{type:"number",min:"0",max:"10",value:l.priority,onChange:_=>h({...l,priority:Number(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Keywords (comma-separated)"}),e.jsx("input",{type:"text",value:l.keywords,onChange:_=>h({...l,keywords:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:l.isActive,onChange:_=>h({...l,isActive:_.target.checked}),className:"mr-2"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>j(zt()),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A.status==="loading",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:A.status==="loading"?"Updating...":"Update FAQ"})]})]})]})}):null},jf=({onClose:j})=>{const A=pe(),[s,l]=W.useState(null),[h,N]=W.useState(!1),[_,v]=W.useState(null),y=t=>{const n=t.target.files[0];n&&n.type==="text/csv"?(l(n),v(null)):alert("Please select a valid CSV file")},w=()=>{const t=`question,answer,category,priority,keywords
"How do I track my order?","You can track your order using the tracking number sent to your email.","orders",8,"track,order,shipping,status"
"What is your return policy?","We offer 30-day returns for unworn items in original condition.","returns",9,"return,refund,policy,exchange"
"How do I care for gold jewelry?","Clean with mild soap and soft brush. Store in a dry place.","care",7,"care,gold,cleaning,maintenance"`,n=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(n),c=document.createElement("a");c.href=i,c.download="faq_template.csv",c.click(),window.URL.revokeObjectURL(i)},f=t=>{const n=t.split(`
`).filter(c=>c.trim()),i=n[0].split(",").map(c=>c.replace(/"/g,"").trim());return n.slice(1).map(c=>{const u=[];let o="",a=!1;for(let r=0;r<c.length;r++){const x=c[r];x==='"'?a=!a:x===","&&!a?(u.push(o.trim()),o=""):o+=x}u.push(o.trim());const g={};return i.forEach((r,x)=>{let S=u[x]||"";S=S.replace(/^"|"$/g,""),r==="keywords"?g[r]=S?S.split(",").map(b=>b.trim()):[]:r==="priority"?g[r]=parseInt(S)||0:g[r]=S}),g})},d=async()=>{if(s){N(!0);try{const t=await s.text(),n=f(t),i=await js(n);v(i),A(Qe({page:1}))}catch(t){console.error("Upload error:",t),alert("Upload failed: "+t.message)}finally{N(!1)}}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Import FAQs from CSV"}),e.jsx("button",{onClick:j,className:"text-gray-500 hover:text-gray-700",children:e.jsx(ms,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select CSV File"}),e.jsx("input",{type:"file",accept:".csv",onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(ps,{}),"Download Template"]}),e.jsxs("button",{onClick:d,disabled:!s||h,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(gs,{}),h?"Uploading...":"Upload FAQs"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"CSV Format Requirements:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"question"}),": The FAQ question (required)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"answer"}),": The FAQ answer (required)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"category"}),": Category (general, products, shipping, etc.)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"priority"}),": Number 0-10 (higher = more important)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"keywords"}),": Comma-separated keywords for matching"]})]}),e.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:[e.jsx("strong",{children:"Tip:"})," Download the template to see the exact format required."]})]})]}),_&&e.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Upload Results"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:["✅ ",e.jsx("strong",{children:_.summary.created})," FAQs created successfully"]}),_.summary.failed>0&&e.jsxs("p",{children:["❌ ",e.jsx("strong",{children:_.summary.failed})," FAQs failed to create"]}),e.jsxs("p",{children:["📊 Total processed: ",e.jsx("strong",{children:_.summary.total})]})]}),_.errors.length>0&&e.jsxs("details",{className:"mt-3",children:[e.jsx("summary",{className:"cursor-pointer text-red-600 font-medium",children:"View Errors"}),e.jsx("div",{className:"mt-2 text-sm text-red-700 space-y-1",children:_.errors.map((t,n)=>e.jsxs("p",{children:["Row ",t.index+2,": ",t.error]},n))})]})]})]})},Nf=()=>{const j=pe(),A=ne(_s),s=ne(ks),l=ne(As),h=ne(Os),N=ne(Ss),_=ne(Es),v=ne(Ts),y=ne(Cs),w=ne(Ps),f=ne(Ds),[d,t]=W.useState("list"),[n,i]=W.useState(!1),[c,u]=W.useState("create"),[o,a]=W.useState({page:1,limit:10,search:"",source:"",isActive:"",isFeatured:""}),[g,r]=W.useState({name:"",email:"",content:"",rating:5,location:"",designation:"",isActive:!0,isFeatured:!1}),[x,S]=W.useState({placeId:"",apiKey:""});W.useEffect(()=>{j(Oe(o))},[j,o]),W.useEffect(()=>{d==="analytics"&&j(Ls())},[j,d]),W.useEffect(()=>{w&&(de.error(w),j(Rs()))},[w,j]),W.useEffect(()=>{f&&(de.success(f),j(Is()))},[f,j]);const b=($,M)=>{a(I=>({...I,[$]:M,page:1}))},O=$=>{a(M=>({...M,page:$}))},C=($,M=null)=>{u($),$==="edit"&&M?(r({name:M.name||"",email:M.email||"",content:M.content||"",rating:M.rating||5,location:M.location||"",designation:M.designation||"",isActive:M.isActive,isFeatured:M.isFeatured}),j(Ht(M))):r({name:"",email:"",content:"",rating:5,location:"",designation:"",isActive:!0,isFeatured:!1}),i(!0)},p=()=>{i(!1),u("create"),r({name:"",email:"",content:"",rating:5,location:"",designation:"",isActive:!0,isFeatured:!1}),S({placeId:"",apiKey:""}),j(Ht(null))},m=async $=>{$.preventDefault(),c==="create"?j(Vs(g)).then(M=>{M.error||(p(),j(Oe(o)))}):c==="edit"&&h&&j(Gs({id:h._id,data:g})).then(M=>{M.error||(p(),j(Oe(o)))})},k=async()=>{j($s()).then($=>{$.error||j(Oe(o))})},E=$=>{window.confirm("Are you sure you want to delete this testimonial?")&&j(Ks($)).then(M=>{M.error||j(Oe(o))})},P=$=>{j(zs($)).then(M=>{M.error||j(Oe(o))})},D=$=>{j(Hs($)).then(M=>{M.error||j(Oe(o))})},B=$=>[...Array(5)].map((M,I)=>e.jsx("span",{className:"text-yellow-400",children:I<$?e.jsx(Ae,{}):e.jsx(Us,{})},I)),U=()=>n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[c==="create"&&"Create Testimonial",c==="edit"&&"Edit Testimonial"]}),e.jsx("button",{onClick:p,className:"text-gray-500 hover:text-gray-700",children:e.jsx(Fs,{})})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:g.name,onChange:$=>r(M=>({...M,name:$.target.value})),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",value:g.email,onChange:$=>r(M=>({...M,email:$.target.value})),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Content *"}),e.jsx("textarea",{value:g.content,onChange:$=>r(M=>({...M,content:$.target.value})),className:"w-full border rounded px-3 py-2 h-24",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rating"}),e.jsx("select",{value:g.rating,onChange:$=>r(M=>({...M,rating:parseInt($.target.value)})),className:"w-full border rounded px-3 py-2",children:[1,2,3,4,5].map($=>e.jsxs("option",{value:$,children:[$," Star",$>1?"s":""]},$))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),e.jsx("input",{type:"text",value:g.location,onChange:$=>r(M=>({...M,location:$.target.value})),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Designation"}),e.jsx("input",{type:"text",value:g.designation,onChange:$=>r(M=>({...M,designation:$.target.value})),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.isActive,onChange:$=>r(M=>({...M,isActive:$.target.checked})),className:"mr-2"}),"Active"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.isFeatured,onChange:$=>r(M=>({...M,isFeatured:$.target.checked})),className:"mr-2"}),"Featured"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-gray-600 border rounded hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:_?e.jsx(Bs,{className:"animate-spin"}):"Save"})]})]})]})}):null;return e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Testimonial Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage customer testimonials and reviews"})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>t("list"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="list"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Testimonials"}),e.jsx("button",{onClick:()=>t("analytics"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="analytics"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Analytics"})]})}),d==="list"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>C("create"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx(Vr,{})," ",e.jsx("span",{children:"Add Manual"})]}),e.jsxs("button",{onClick:k,disabled:v,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(mt,{})," ",e.jsx("span",{children:v?"Fetching...":"Fetch Google"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Search testimonials...",value:o.search,onChange:$=>b("search",$.target.value),className:"border rounded px-3 py-2"}),e.jsxs("select",{value:o.source,onChange:$=>b("source",$.target.value),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"All Sources"}),e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"google",children:"Google"})]}),e.jsxs("select",{value:o.isActive,onChange:$=>b("isActive",$.target.value),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]}),e.jsxs("select",{value:o.isFeatured,onChange:$=>b("isFeatured",$.target.value),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"true",children:"Featured"}),e.jsx("option",{value:"false",children:"Regular"})]})]}),N?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Content"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map($=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.name}),$.location&&e.jsx("div",{className:"text-sm text-gray-500",children:$.location})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:$.content})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center space-x-1",children:B($.rating)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$.source==="google"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:[$.source==="google"?e.jsx(mt,{className:"mr-1"}):e.jsx(Wr,{className:"mr-1"}),$.source]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:$.isActive?"Active":"Inactive"}),$.isFeatured&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Ae,{className:"mr-1"}),"Featured"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>C("edit",$),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Gr,{})}),e.jsx("button",{onClick:()=>P($._id),className:"text-gray-600 hover:text-gray-900",children:$.isActive?e.jsx(qs,{}):e.jsx(jt,{})}),e.jsx("button",{onClick:()=>D($._id),className:$.isFeatured?"text-yellow-600":"text-gray-400",children:e.jsx(Ae,{})}),e.jsx("button",{onClick:()=>E($._id),className:"text-red-600 hover:text-red-900",children:e.jsx(Ct,{})})]})})]},$._id))})]})}),s.pages>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("div",{className:"flex space-x-2",children:Array.from({length:s.pages},($,M)=>M+1).map($=>e.jsx("button",{onClick:()=>O($),className:`px-3 py-2 rounded ${$===s.page?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:$},$))})})]}),d==="analytics"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:y?e.jsx("div",{className:"col-span-full flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ms,{className:"text-blue-600 text-2xl"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.total})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(jt,{className:"text-green-600 text-2xl"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.active})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ae,{className:"text-yellow-600 text-2xl"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Featured"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.featured})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(mt,{className:"text-red-600 text-2xl"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Google"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.google})]})]})})]})}),U()]})};function Or(j){return Ws({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"},child:[]}]})(j)}function wf({stats:j={revenueINR:0,orders:0,products:0,avgRating:0},revenueTrend:A=[],topProducts:s=[],recentOrders:l=[],recentReviews:h=[],upcomingAppointments:N=[],onOpenOrder:_=()=>{},onOpenProduct:v=()=>{},onOpenReview:y=()=>{},onOpenAppointment:w=()=>{}}){const f=i=>{try{return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(i||0)}catch{return`₹${i||0}`}},d=i=>i?new Date(i).toLocaleDateString():"-",t=i=>i?new Date(i).toLocaleString():"-",n=({icon:i,title:c,value:u,subtitle:o,color:a="blue"})=>{const g={blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",purple:"bg-purple-50 text-purple-600 border-purple-200",orange:"bg-orange-50 text-orange-600 border-orange-200"};return e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:c}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 mt-1",children:u}),o&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o})]}),e.jsx("div",{className:`p-3 rounded-lg ${g[a]}`,children:i})]})})};return e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(n,{icon:e.jsx(Zs,{className:"w-6 h-6"}),title:"Total Revenue",value:f(j.revenueINR),subtitle:"This month",color:"green"}),e.jsx(n,{icon:e.jsx(Or,{className:"w-6 h-6"}),title:"Total Orders",value:j.orders,subtitle:"Active orders",color:"blue"}),e.jsx(n,{icon:e.jsx(Kt,{className:"w-6 h-6"}),title:"Products",value:j.products,subtitle:"Listed products",color:"purple"}),e.jsx(n,{icon:e.jsx(Ae,{className:"w-6 h-6"}),title:"Avg Rating",value:`${(j.avgRating||0).toFixed(1)}/5`,subtitle:"Customer satisfaction",color:"orange"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"})}),e.jsx("div",{className:"p-6",children:l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Or,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No recent orders"})]}):e.jsx("div",{className:"space-y-4",children:l.slice(0,5).map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>_(i),children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["#",i.orderNumber]}),e.jsx("p",{className:"text-sm text-gray-600",children:d(i.createdAt)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:f(i.totalINR)}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full font-medium ${i.status==="delivered"?"bg-green-100 text-green-800":i.status==="processing"?"bg-blue-100 text-blue-800":i.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:i.status})]})]},i._id))})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Products"})}),e.jsx("div",{className:"p-6",children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Kt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No products data"})]}):e.jsx("div",{className:"space-y-4",children:s.slice(0,5).map((i,c)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>v(i),children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:i.image&&e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.units," units sold"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:f(i.salesINR)}),e.jsxs("p",{className:"text-sm text-gray-600",children:["#",c+1]})]})]},i._id))})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Reviews"})}),e.jsx("div",{className:"p-6",children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ae,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No recent reviews"})]}):e.jsx("div",{className:"space-y-4",children:h.slice(0,5).map(i=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>y(i),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.userName}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((c,u)=>e.jsx(Ae,{className:`w-4 h-4 ${u<i.rating?"text-yellow-400":"text-gray-300"}`},u))})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:i.comment}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:d(i.createdAt)})]},i._id))})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Appointments"})}),e.jsx("div",{className:"p-6",children:N.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ke,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No upcoming appointments"})]}):e.jsx("div",{className:"space-y-4",children:N.slice(0,5).map(i=>e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>w(i),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.customerName}),e.jsx("p",{className:"text-sm text-gray-600",children:i.serviceType})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t(i.appointmentAt)}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full font-medium ${i.status==="confirmed"?"bg-green-100 text-green-800":i.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:i.status})]})]})},i._id))})})]})]})]})})}const _f=()=>{var b,O,C;const[j,A]=W.useState([]),[s,l]=W.useState({}),[h,N]=W.useState(!0),[_,v]=W.useState("all"),[y,w]=W.useState(!1),[f,d]=W.useState(null),[t,n]=W.useState(!1);W.useEffect(()=>{i(),c()},[_,y]);const i=async()=>{var p,m;try{N(!0);const k=new URLSearchParams;_!=="all"&&k.append("type",_),y&&k.append("isRead","false");const E=await ke.get(`/admin/notifications?${k.toString()}`);E.data.success?A(E.data.data.notifications||[]):de.error(E.data.message||"Failed to fetch notifications")}catch(k){console.error("Error fetching notifications:",k),((p=k.response)==null?void 0:p.status)===401?de.error("Please login to access admin dashboard"):((m=k.response)==null?void 0:m.status)===403?de.error("Admin access required"):de.error("Failed to fetch notifications")}finally{N(!1)}},c=async()=>{try{const p=await ke.get("/admin/notifications/stats");p.data.success&&l(p.data.data.stats||{})}catch(p){console.error("Error fetching stats:",p)}},u=async p=>{try{const m=await ke.patch(`/admin/notifications/${p}/read`);m.data.success?(A(k=>k.map(E=>E._id===p?{...E,isRead:!0}:E)),de.success("Notification marked as read"),c()):de.error(m.data.message||"Failed to mark notification as read")}catch(m){console.error("Error marking notification as read:",m),de.error("Failed to mark notification as read")}},o=async p=>{try{const m=await ke.get(`/admin/notifications/${p}`);m.data.success?(d(m.data.data.notification),n(!0),m.data.data.notification.isRead||u(p)):de.error("Failed to load notification details")}catch(m){console.error("Error loading notification details:",m),de.error("Failed to load notification details")}},a=async(p,m="Issue resolved")=>{try{const k=await ke.patch(`/admin/notifications/${p}/action`,{actionNotes:m});k.data.success?(A(E=>E.map(P=>P._id===p?{...P,actionTaken:!0,isRead:!0}:P)),de.success("Action marked as taken"),c()):de.error(k.data.message||"Failed to mark action as taken")}catch(k){console.error("Error marking action as taken:",k),de.error("Failed to mark action as taken")}},g=async p=>{if(window.confirm("Are you sure you want to delete this notification?"))try{const m=await ke.delete(`/admin/notifications/${p}`);m.data.success?(A(k=>k.filter(E=>E._id!==p)),de.success("Notification deleted"),c()):de.error(m.data.message||"Failed to delete notification")}catch(m){console.error("Error deleting notification:",m),de.error("Failed to delete notification")}},r=p=>{switch(p){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=p=>{switch(p){case"out_of_stock":return e.jsx(Vt,{className:"text-red-500"});case"low_stock":return e.jsx(Gt,{className:"text-yellow-500"});case"order_placed":return e.jsx(ta,{className:"text-green-500"});case"payment_failed":return e.jsx(ea,{className:"text-red-500"});default:return e.jsx(Pe,{className:"text-blue-500"})}},S=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return h?e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Notifications"}),e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((p,m)=>e.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},m))}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((p,m)=>e.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},m))})]})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[e.jsx(Pe,{className:"inline mr-2"}),"Notifications"]}),e.jsx("button",{onClick:()=>i(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Pe,{className:"text-blue-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.total||0})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(jt,{className:"text-yellow-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unread"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.unread||0})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Vt,{className:"text-red-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.outOfStock||0})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Gt,{className:"text-orange-600 text-xl"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.lowStock||0})]})]})})]}),e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qs,{className:"text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"})]}),["all","out_of_stock","low_stock","order_placed","payment_failed"].map(p=>e.jsx("button",{onClick:()=>v(p),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${_===p?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:p==="all"?"All":p.replace("_"," ").toUpperCase()},p)),e.jsx("button",{onClick:()=>w(!y),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${y?"bg-yellow-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Unread Only"})]}),e.jsx("div",{className:"space-y-3",children:j.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[e.jsx(Pe,{className:"mx-auto text-6xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),e.jsx("p",{className:"text-gray-600",children:"All caught up! No notifications match your current filters."})]}):j.map(p=>{var m,k;return e.jsx("div",{className:`bg-white rounded-lg shadow border p-4 transition-all hover:shadow-md ${p.isRead?"opacity-75":"border-l-4 border-l-blue-500"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"text-xl mt-1",children:x(p.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:p.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${r(p.severity)}`,children:p.severity.toUpperCase()}),!p.isRead&&e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"})]}),e.jsx("p",{className:"text-gray-700 mb-2 text-sm",children:p.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{children:S(p.createdAt)}),p.productId&&e.jsxs("span",{children:["Product: ",p.productId.name||"Unknown"]}),((m=p.metadata)==null?void 0:m.variantSizeLabel)&&e.jsxs("span",{children:["Size: ",p.metadata.variantSizeLabel]}),((k=p.metadata)==null?void 0:k.stockLevel)!==void 0&&e.jsxs("span",{children:["Stock: ",p.metadata.stockLevel]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!p.isRead&&e.jsx("button",{onClick:()=>u(p._id),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Mark as read",children:e.jsx(Ys,{})}),e.jsx("button",{onClick:()=>o(p._id),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"View details",children:e.jsx(Xs,{})}),p.actionRequired&&!p.actionTaken&&e.jsx("button",{onClick:()=>a(p._id),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Mark as resolved",children:e.jsx(Js,{})}),e.jsx("button",{onClick:()=>g(p._id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete notification",children:e.jsx(Ct,{})}),p.actionTaken&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"✓ Resolved"})]})]})},p._id)})}),t&&f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Notification Details"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 text-xl font-bold",children:"×"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-2xl",children:x(f.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:f.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${r(f.severity)}`,children:f.severity.toUpperCase()}),f.actionRequired&&e.jsx("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded",children:"Action Required"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Message"}),e.jsx("p",{className:"text-gray-700",children:f.message})]}),f.productId&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Product Information"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",f.productId.name||"Unknown"]}),((b=f.metadata)==null?void 0:b.variantSizeLabel)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Variant:"})," ",f.metadata.variantSizeLabel]}),((O=f.metadata)==null?void 0:O.variantSku)&&e.jsxs("p",{children:[e.jsx("strong",{children:"SKU:"})," ",f.metadata.variantSku]}),((C=f.metadata)==null?void 0:C.stockLevel)!==void 0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Stock Level:"})," ",f.metadata.stockLevel]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Notification Details"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",S(f.createdAt)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",f.type.replace("_"," ").toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",f.isRead?"Read":"Unread"]}),f.actionTaken&&e.jsxs("div",{className:"mt-2 p-2 bg-green-50 rounded",children:[e.jsx("p",{className:"text-green-800",children:e.jsx("strong",{children:"✓ Action Taken"})}),f.actionNotes&&e.jsx("p",{className:"text-green-700 text-sm mt-1",children:f.actionNotes}),f.actionAt&&e.jsxs("p",{className:"text-green-600 text-xs mt-1",children:["Resolved: ",S(f.actionAt)]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-6 pt-4 border-t",children:[!f.isRead&&e.jsx("button",{onClick:()=>{u(f._id),d(p=>({...p,isRead:!0}))},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Mark as Read"}),f.actionRequired&&!f.actionTaken&&e.jsx("button",{onClick:()=>{a(f._id),d(p=>({...p,actionTaken:!0,isRead:!0}))},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Mark as Resolved"}),e.jsx("button",{onClick:()=>{g(f._id),n(!1)},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Delete"}),e.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors",children:"Close"})]})]})})})]})},kf=()=>{const[j,A]=W.useState(""),s=async()=>{var N,_,v;try{A("Testing authentication...");const y=await ke.get("/admin/notifications/stats");A("Success! Auth is working. Response: "+JSON.stringify(y.data,null,2)),de.success("Authentication test passed!")}catch(y){console.error("Auth test failed:",y);const w={status:(N=y.response)==null?void 0:N.status,statusText:(_=y.response)==null?void 0:_.statusText,data:(v=y.response)==null?void 0:v.data,message:y.message,code:y.code};A("Auth test failed: "+JSON.stringify(w,null,2)),de.error("Authentication test failed")}},l=async()=>{var N,_,v;try{A("Testing notifications endpoint...");const y=await ke.get("/admin/notifications");A("Endpoint test success: "+JSON.stringify(y.data,null,2)),de.success("Endpoint test passed!")}catch(y){console.error("Endpoint test failed:",y);const w={status:(N=y.response)==null?void 0:N.status,statusText:(_=y.response)==null?void 0:_.statusText,data:(v=y.response)==null?void 0:v.data,message:y.message,code:y.code};A("Endpoint test failed: "+JSON.stringify(w,null,2)),de.error("Endpoint test failed")}},h=async()=>{try{A("Testing with plain fetch...");const N=await fetch("http://localhost:8080/api/admin/notifications/stats",{credentials:"include",headers:{"Content-Type":"application/json"}}),_=await N.text();A(`Fetch test - Status: ${N.status}, Response: ${_}`),N.ok?de.success("Plain fetch test passed!"):de.error("Plain fetch test failed")}catch(N){console.error("Plain fetch test failed:",N),A("Plain fetch test failed: "+N.message),de.error("Plain fetch test failed")}};return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Notification System Debug"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Test Authentication"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 ml-2",children:"Test Notifications Endpoint"}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 ml-2",children:"Test Plain Fetch"})]}),e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Debug Information:"}),e.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:j})]}),e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-yellow-800",children:"Instructions:"}),e.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["1. Make sure you're logged in as an admin user",e.jsx("br",{}),"2. Check that the backend server is running on port 8080",e.jsx("br",{}),"3. Verify the notification endpoints are properly registered",e.jsx("br",{}),"4. Check browser console for additional error details"]})]})]})},Af=(j={})=>{const A=new URLSearchParams;Object.keys(j).forEach(l=>{j[l]!==void 0&&j[l]!==""&&A.append(l,j[l])});const s=A.toString();return Ee.get(`/admin/newsevents${s?`?${s}`:""}`)},Of=j=>j instanceof FormData?Ee.post("/admin/newsevents",j,{headers:{"Content-Type":"multipart/form-data"}}):Ee.post("/admin/newsevents",j),Sf=(j,A)=>A instanceof FormData?Ee.put(`/admin/newsevents/${j}`,A,{headers:{"Content-Type":"multipart/form-data"}}):Ee.put(`/admin/newsevents/${j}`,A),Ef=j=>Ee.delete(`/admin/newsevents/${j}`),Tf=()=>Ee.get("/admin/newsevents/stats");function Cf({isOpen:j,item:A,onClose:s,onSuccess:l}){const h=!!A,[N,_]=W.useState({title:"",slug:"",excerpt:"",content:"",type:"event",kind:"Event",date:"",city:"",location:"",rsvpUrl:"",outlet:"",url:"",status:"draft",metaTitle:"",metaDescription:"",publishAt:""}),[v,y]=W.useState(null),[w,f]=W.useState(null),[d,t]=W.useState(!1),[n,i]=W.useState(null),[c,u]=W.useState({});W.useEffect(()=>{var S;h&&A?(_({title:A.title||"",slug:A.slug||"",excerpt:A.excerpt||"",content:A.content||"",type:A.type||"event",kind:A.kind||"Event",date:A.date?new Date(A.date).toISOString().split("T")[0]:"",city:A.city||"",location:A.location||"",rsvpUrl:A.rsvpUrl||"",outlet:A.outlet||"",url:A.url||"",status:A.status||"draft",metaTitle:A.metaTitle||"",metaDescription:A.metaDescription||"",publishAt:A.publishAt?new Date(A.publishAt).toISOString().split("T")[0]:""}),(S=A.cover)!=null&&S.url&&f(A.cover.url)):(_({title:"",slug:"",excerpt:"",content:"",type:"event",kind:"Event",date:"",city:"",location:"",rsvpUrl:"",outlet:"",url:"",status:"draft",metaTitle:"",metaDescription:"",publishAt:""}),y(null),f(null))},[h,A]);const o=S=>S.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),a=S=>{const{name:b,value:O}=S.target;_(C=>{const p={...C,[b]:O};return b==="title"&&(p.slug=o(O)),p}),c[b]&&u(C=>({...C,[b]:null}))},g=S=>{const b=S.target.files[0];if(b){y(b);const O=new FileReader;O.onloadend=()=>{f(O.result)},O.readAsDataURL(b)}},r=()=>{const S={};return N.title.trim()||(S.title="Title is required"),N.slug.trim()||(S.slug="Slug is required"),N.excerpt.trim()||(S.excerpt="Excerpt is required"),N.type||(S.type="Type is required"),N.date||(S.date="Date is required"),N.type==="event"&&(N.kind||(S.kind="Kind is required for events")),N.type==="media-coverage"&&(N.outlet.trim()||(S.outlet="Outlet is required for media coverage"),N.url.trim()||(S.url="URL is required for media coverage")),u(S),Object.keys(S).length===0},x=async S=>{var b,O;if(S.preventDefault(),!!r()){t(!0),i(null);try{const C=new FormData;Object.entries(N).forEach(([p,m])=>{m!==""&&m!==null&&m!==void 0&&C.append(p,m)}),v&&C.append("cover",v),h?await Sf(A._id,C):await Of(C),l()}catch(C){i(((O=(b=C.response)==null?void 0:b.data)==null?void 0:O.message)||C.message||"Something went wrong")}finally{t(!1)}}};return j?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:h?"Edit News/Event":"Create News/Event"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ye,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:x,className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[n&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:n}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),e.jsxs("select",{name:"type",value:N.type,onChange:a,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${c.type?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"event",children:"Event"}),e.jsx("option",{value:"media-coverage",children:"Media Coverage"})]}),c.type&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.type})]}),N.type==="event"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kind *"}),e.jsxs("select",{name:"kind",value:N.kind,onChange:a,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${c.kind?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"Event",children:"Event"}),e.jsx("option",{value:"News",children:"News"})]}),c.kind&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.kind})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",name:"title",value:N.title,onChange:a,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${c.title?"border-red-500":"border-gray-300"}`}),c.title&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug *"}),e.jsx("input",{type:"text",name:"slug",value:N.slug,onChange:a,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${c.slug?"border-red-500":"border-gray-300"}`}),c.slug&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.slug})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",name:"date",value:N.date,onChange:a,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${c.date?"border-red-500":"border-gray-300"}`}),c.date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.date})]}),N.type==="event"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",name:"city",value:N.city,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:N.location,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RSVP URL"}),e.jsx("input",{type:"url",name:"rsvpUrl",value:N.rsvpUrl,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]}),N.type==="media-coverage"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Outlet *"}),e.jsx("input",{type:"text",name:"outlet",value:N.outlet,onChange:a,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${c.outlet?"border-red-500":"border-gray-300"}`}),c.outlet&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.outlet})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Article URL *"}),e.jsx("input",{type:"url",name:"url",value:N.url,onChange:a,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${c.url?"border-red-500":"border-gray-300"}`}),c.url&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.url})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Excerpt *"}),e.jsx("textarea",{name:"excerpt",value:N.excerpt,onChange:a,rows:3,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${c.excerpt?"border-red-500":"border-gray-300"}`}),c.excerpt&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.excerpt})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),e.jsx("textarea",{name:"content",value:N.content,onChange:a,rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Image"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50",children:[e.jsx(Ur,{className:"w-4 h-4 mr-2"}),"Choose Image",e.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"hidden"})]}),w&&e.jsx("img",{src:w,alt:"Preview",className:"w-20 h-20 object-cover rounded"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{name:"status",value:N.status,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Publish At"}),e.jsx("input",{type:"date",name:"publishAt",value:N.publishAt,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"SEO Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),e.jsx("input",{type:"text",name:"metaTitle",value:N.metaTitle,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),e.jsx("textarea",{name:"metaDescription",value:N.metaDescription,onChange:a,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Saving...":h?"Update":"Create"})]})]})]})}):null}function Pf({isOpen:j,item:A,onClose:s}){var l;return!j||!A?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"News/Event Details"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ye,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] p-6",children:e.jsxs("div",{className:"space-y-6",children:[((l=A.cover)==null?void 0:l.url)&&e.jsx("div",{children:e.jsx("img",{src:A.cover.url,alt:A.title,className:"w-full h-64 object-cover rounded-lg"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Title:"}),e.jsx("p",{className:"text-gray-900",children:A.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Slug:"}),e.jsx("p",{className:"text-gray-600 font-mono text-sm",children:A.slug})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Type:"}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${A.type==="event"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:A.type==="media-coverage"?"Media Coverage":A.kind})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Date:"}),e.jsx("p",{className:"text-gray-900",children:be(A.date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${A.status==="published"?"bg-green-100 text-green-800":A.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:A.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Views:"}),e.jsx("p",{className:"text-gray-900",children:A.views||0})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:A.type==="event"?"Event Details":"Media Details"}),e.jsx("div",{className:"space-y-3",children:A.type==="event"?e.jsxs(e.Fragment,{children:[A.city&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"City:"}),e.jsx("p",{className:"text-gray-900",children:A.city})]}),A.location&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Location:"}),e.jsx("p",{className:"text-gray-900",children:A.location})]}),A.rsvpUrl&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"RSVP URL:"}),e.jsx("a",{href:A.rsvpUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:A.rsvpUrl})]})]}):e.jsxs(e.Fragment,{children:[A.outlet&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Outlet:"}),e.jsx("p",{className:"text-gray-900",children:A.outlet})]}),A.url&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Article URL:"}),e.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:A.url})]})]})})]})]}),A.excerpt&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Excerpt"}),e.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg",children:A.excerpt})]}),A.content&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Content"}),e.jsx("div",{className:"prose max-w-none bg-gray-50 p-4 rounded-lg",children:A.content.split(`
`).map((h,N)=>e.jsx("p",{className:"mb-2",children:h},N))})]}),(A.metaTitle||A.metaDescription)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"SEO Information"}),e.jsxs("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg",children:[A.metaTitle&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Meta Title:"}),e.jsx("p",{className:"text-gray-900",children:A.metaTitle})]}),A.metaDescription&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Meta Description:"}),e.jsx("p",{className:"text-gray-900",children:A.metaDescription})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Metadata"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Created:"}),e.jsx("p",{className:"text-gray-600",children:be(A.createdAt)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Updated:"}),e.jsx("p",{className:"text-gray-600",children:be(A.updatedAt)})]}),A.author&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Author:"}),e.jsx("p",{className:"text-gray-600",children:A.author.name||A.author.email})]}),A.publishAt&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Publish Date:"}),e.jsx("p",{className:"text-gray-600",children:be(A.publishAt)})]})]})]})]})}),e.jsx("div",{className:"flex justify-end p-6 border-t bg-gray-50",children:e.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})}function Df({isOpen:j,item:A,onClose:s,onConfirm:l,isDeleting:h=!1}){return!j||!A?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("h2",{className:"text-xl font-semibold text-red-600",children:["Delete ",A.type==="event"?"Event":"Media Coverage"]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",disabled:h,children:e.jsx(ye,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(zr,{className:"w-8 h-8 text-red-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Are you sure you want to delete this ",A.type==="event"?"event":"media coverage","?"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("strong",{children:"Title:"})," ",A.title]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("strong",{children:"Type:"})," ",A.type==="media-coverage"?"Media Coverage":A.kind]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Status:"})," ",A.status]})]}),e.jsxs("p",{className:"text-sm text-red-600 font-medium",children:["This action cannot be undone. The ",A.type==="event"?"event":"media coverage"," will be permanently removed from the system."]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:h,children:"Cancel"}),e.jsx("button",{onClick:()=>l(A._id),disabled:h,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete"})]})]})})}function Lf(){const[j,A]=W.useState([]),[s,l]=W.useState(!1),[h,N]=W.useState(null),[_,v]=W.useState({page:1,totalPages:1,total:0}),[y,w]=W.useState(""),[f,d]=W.useState(""),[t,n]=W.useState(""),[i,c]=W.useState(null),[u,o]=W.useState({createEdit:{isOpen:!1,item:null},details:{isOpen:!1,item:null},delete:{isOpen:!1,item:null}});W.useEffect(()=>{a(),g()},[]);const a=async(m=1,k={})=>{var E,P;l(!0);try{const D={page:m,limit:50,...k},U=(await Af(D)).data;A(U.items),v(U.pagination)}catch(D){console.error("NewsEvents error:",D),N(((P=(E=D.response)==null?void 0:E.data)==null?void 0:P.message)||D.message||"Failed to fetch news & events")}finally{l(!1)}},g=async()=>{try{const k=(await Tf()).data;c(k.totals)}catch(m){console.error("Failed to fetch stats:",m)}},r=()=>{const m={};y&&(m.q=y),f&&(m.type=f),t&&(m.status=t),a(1,m)},x=async(m,k)=>{try{if(!(await fetch(`/api/admin/newsevents/${m}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:k})})).ok)throw new Error("Failed to update status");a(),g()}catch(E){N(E.message)}},S=async m=>{var k,E;try{await Ef(m),a(),g(),O("delete")}catch(P){N(((E=(k=P.response)==null?void 0:k.data)==null?void 0:E.message)||P.message||"Failed to delete")}},b=(m,k=null)=>{o(E=>({...E,[m]:{isOpen:!0,item:k}}))},O=m=>{o(k=>({...k,[m]:{isOpen:!1,item:null}}))},C=m=>({published:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",archived:"bg-red-100 text-red-800"})[m]||"bg-gray-100 text-gray-800",p=m=>m==="event"?e.jsx(ra,{className:"w-4 h-4"}):e.jsx(na,{className:"w-4 h-4"});return s&&j.length===0?e.jsx("div",{className:"p-6",children:"Loading..."}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"News & Events"}),e.jsx("p",{className:"text-gray-600",children:"Manage events and media coverage"})]}),e.jsxs("button",{onClick:()=>b("createEdit"),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[e.jsx(De,{className:"w-4 h-4"}),"Add New"]})]}),i&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.published}),e.jsx("div",{className:"text-sm text-gray-600",children:"Published"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.draft}),e.jsx("div",{className:"text-sm text-gray-600",children:"Drafts"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.archived}),e.jsx("div",{className:"text-sm text-gray-600",children:"Archived"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.events}),e.jsx("div",{className:"text-sm text-gray-600",children:"Events"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.mediaCoverage}),e.jsx("div",{className:"text-sm text-gray-600",children:"Media Coverage"})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search by title, content...",value:y,onChange:m=>w(m.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{children:e.jsxs("select",{value:f,onChange:m=>d(m.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"event",children:"Events"}),e.jsx("option",{value:"media-coverage",children:"Media Coverage"})]})}),e.jsx("div",{children:e.jsxs("select",{value:t,onChange:m=>n(m.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"archived",children:"Archived"})]})}),e.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:[e.jsx(Te,{className:"w-4 h-4"}),"Search"]})]})}),e.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Views"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[m.cover&&e.jsx("img",{src:m.cover.url,alt:"",className:"w-10 h-10 rounded object-cover mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:m.title}),e.jsx("div",{className:"text-sm text-gray-500 line-clamp-1",children:m.excerpt})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[p(m.type),e.jsx("span",{className:"text-sm text-gray-900 capitalize",children:m.type==="media-coverage"?"Media":m.kind})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C(m.status)}`,children:m.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:be(m.date)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:m.views}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>b("details",m),className:"text-blue-600 hover:text-blue-800",title:"View Details",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b("createEdit",m),className:"text-green-600 hover:text-green-800",title:"Edit",children:e.jsx(Kr,{className:"w-4 h-4"})}),e.jsxs("select",{value:m.status,onChange:k=>x(m._id,k.target.value),className:"text-xs border rounded px-2 py-1",title:"Update Status",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsx("button",{onClick:()=>b("delete",m),className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx(Ge,{className:"w-4 h-4"})})]})})]},m._id))})]})})}),_.totalPages>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex space-x-1",children:Array.from({length:_.totalPages},(m,k)=>k+1).map(m=>e.jsx("button",{onClick:()=>a(m),className:`px-3 py-2 text-sm ${m===_.page?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"} border rounded`,children:m},m))})}),u.createEdit.isOpen&&e.jsx(Cf,{isOpen:u.createEdit.isOpen,item:u.createEdit.item,onClose:()=>O("createEdit"),onSuccess:()=>{a(),g(),O("createEdit")}}),u.details.isOpen&&e.jsx(Pf,{isOpen:u.details.isOpen,item:u.details.item,onClose:()=>O("details")}),u.delete.isOpen&&e.jsx(Df,{isOpen:u.delete.isOpen,item:u.delete.item,onClose:()=>O("delete"),onConfirm:()=>S(u.delete.item._id)}),h&&e.jsx("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:h})]})}const Mf=()=>{var d,t,n;const[j,A]=W.useState("overview"),[s,l]=W.useState(!1);sa();const h=[{id:"overview",label:"Overview",icon:Wt},{id:"products",label:"Products",icon:Zt},{id:"orders",label:"Orders",icon:Zt},{id:"bookings",label:"Bookings",icon:Et},{id:"reviews",label:"Reviews",icon:Ae},{id:"testimonials",label:"Testimonials",icon:ia},{id:"blogs",label:"Blogs",icon:la},{id:"newsevents",label:"News & Events",icon:oa},{id:"faq",label:"FAQ",icon:ca},{id:"notifications",label:"Notifications",icon:Pe},{id:"debug",label:"Debug",icon:Pe},{id:"newsletter",label:"Newsletter",icon:da}],N=[{id:1,img:Qt,title:"Fragnance 1",price:"₹79,153.0"},{id:2,img:Yt,title:"Classic fragnance",price:"₹129,999.0"},{id:3,img:ha,title:"Statement fragnance",price:"₹54,200.0"},{id:4,img:ma,title:"Everyday fragnance",price:"₹24,500.0"}],_=[{_id:"1",orderNumber:"GRV2023001",createdAt:"2023-09-15T10:30:00Z",status:"delivered",items:[{productSnapshot:{name:"Diamond Solitaire Ring",heroImage:{url:"/images/jewelry1.jpg"}},quantity:1,unitPrice:75e3}],grandTotal:75e3},{_id:"2",orderNumber:"GRV2023002",createdAt:"2023-09-10T15:45:00Z",status:"processing",items:[{productSnapshot:{name:"Pearl Necklace Set",heroImage:{url:"/images/jewelry2.jpg"}},quantity:1,unitPrice:45e3},{productSnapshot:{name:"Emerald Earrings",heroImage:{url:"/images/jewelry3.jpg"}},quantity:2,unitPrice:35e3}],grandTotal:115e3}],v=[{_id:"1",customerName:"Rahul Kumar",customerEmail:"rahul@example.com",serviceType:"consultation",status:"pending",appointmentAt:"2025-09-26T10:00:00.000Z",adminNotes:"First consultation"},{_id:"2",customerName:"Sneha Verma",customerEmail:"sneha@example.com",serviceType:"repair",status:"confirmed",appointmentAt:"2025-09-27T15:30:00.000Z",adminNotes:"Bring spare parts"}],y=[{_id:"r1",user:{name:"Rahul",email:"rahul@example.com"},product:"prod-101",rating:5,comment:"Excellent quality!",isApproved:!0,flagged:!1,createdAt:"2025-09-25T10:00:00.000Z"},{_id:"r2",user:{name:"Sneha",email:"sneha@example.com"},product:"prod-102",rating:3,comment:"Good, but delivery was late.",isApproved:!1,flagged:!0,createdAt:"2025-09-24T15:30:00.000Z"}],w=[{_id:"1",email:"a@x.com",status:"subscribed",createdAt:"2025-09-01T09:00:00Z"},{_id:"2",email:"b@x.com",status:"unsubscribed",createdAt:"2025-09-05T12:00:00Z"}],f=()=>{switch(j){case"overview":return e.jsx(wf,{stats:{revenueINR:25e4,orders:_.length,products:N.length,avgRating:4.4},revenueTrend:[12e3,18e3,26e3,31e3,29e3,34e3,36e3],topProducts:[{_id:"p1",name:"Fragrance 1",image:Qt,salesINR:79153,units:42},{_id:"p2",name:"Classic Fragrance",image:Yt,salesINR:129999,units:23}],recentOrders:_.map(i=>({...i,totalINR:i.grandTotal})),recentReviews:y.map(i=>({_id:i._id,userName:i.user.name,rating:i.rating,comment:i.comment,createdAt:i.createdAt})),upcomingAppointments:v});case"products":return e.jsx(va,{});case"orders":return e.jsx(Aa,{});case"bookings":return e.jsx(Sa,{});case"reviews":return e.jsx(Ea,{reviews:y,pagination:{page:1,limit:20,total:2,totalPages:1},onAction:(i,c)=>console.log("Action:",i,c),onPageChange:i=>console.log("Go to page:",i),onFilterChange:i=>console.log("Apply filters:",i),onClearFilters:()=>console.log("Filters cleared")});case"testimonials":return e.jsx(Nf,{});case"blogs":return e.jsx(gf,{});case"newsevents":return e.jsx(Lf,{});case"faq":return e.jsx(yf,{});case"notifications":return e.jsx(_f,{});case"debug":return e.jsx(kf,{});case"newsletter":return e.jsx(Ta,{subscribers:w,pagination:{page:1,limit:20,total:2,totalPages:1},onFilterChange:i=>console.log("filters",i),onPageChange:i=>console.log("page",i)});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>l(!s),className:"lg:hidden p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100",children:e.jsx(aa,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Wt,{className:"w-5 h-5 text-white"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Garava Admin"})})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("h2",{className:`text-sm font-medium uppercase tracking-wider font-montserrat\r
             text-gray-600`,children:(d=h.find(i=>i.id===j))==null?void 0:d.label})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-400 rounded-full flex items-center justify-center",children:e.jsx(Wr,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Admin"})]}),e.jsx(ua,{to:"/",className:"p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100",title:"Back to Site",children:e.jsx(fa,{className:"w-4 h-4"})})]})]})}),s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>l(!1)}),e.jsx("aside",{className:`fixed top-16 left-0 z-40 w-64 h-[calc(100vh-4rem)] bg-white border-r border-gray-200 transform transition-transform duration-200 ${s?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:e.jsxs("div",{className:"h-full overflow-y-auto",children:[e.jsx("nav",{className:"p-4 space-y-1",children:h.map(i=>{const c=i.icon;return e.jsxs("button",{onClick:()=>{A(i.id),l(!1)},className:`w-full flex items-center gap-3 px-3 py-2 text-left rounded-md transition-colors ${j===i.id?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(c,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:i.label})]},i.id)})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Garava Admin v2.0"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Online"})]})]})})]})}),e.jsx("main",{className:"lg:ml-64 pt-16",children:e.jsxs("div",{className:"h-[calc(100vh-4rem)]",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:(t=h.find(i=>i.id===j))==null?void 0:t.label}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Manage your ",(n=h.find(i=>i.id===j))==null?void 0:n.label.toLowerCase()]})]})})}),e.jsx("div",{className:"h-[calc(100%-5rem)] bg-gray-50",children:e.jsx("div",{className:"h-full p-6",children:e.jsx("div",{className:"h-full bg-white rounded-lg border border-gray-200 overflow-hidden",children:f()})})})]})})]})};export{Mf as default};
