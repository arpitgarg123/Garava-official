import{h as j,u as v,a as d,n as f,o as g,p as N,j as e,P as m,B as y,q as c,t as b,v as C}from"./index-CKwcYcCo.js";import{I}from"./index-CFYhMnPX.js";import{R as k}from"./index-DWMn1eS0.js";import{C as w}from"./LoadingSkeleton--JWO6ykG.js";import{f as h}from"./pricing-Cv4rcUXx.js";const B=()=>{const o=j(),x=v(),r=d(f),l=d(g),n=d(N);console.log("Cart Debug:",{cartTotal:l,calculatedTotal:r.reduce((s,t)=>s+t.unitPrice*t.quantity,0),itemCount:r.length,sampleItem:r[0]});const p=(s,t)=>{const a=r.find(i=>i._id===s);if(!a){c.error("Cart item not found");return}x(b({productId:a.product,variantId:a.variantId,variantSku:a.variantSku,quantity:t})).unwrap().then(()=>{c.success("Cart updated")}).catch(i=>{c.error("Failed to update cart"),console.error("Update cart error:",i)})},u=s=>{const t=r.find(a=>a._id===s);if(!t){c.error("Cart item not found");return}x(C({productId:t.product,variantId:t.variantId,variantSku:t.variantSku})).unwrap().then(()=>{c.success("Item removed from cart")}).catch(a=>{c.error("Failed to remove item"),console.error("Remove from cart error:",a)})};return n?e.jsx("div",{className:" min-h-[60vh] p-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx(m,{title:"Shopping Cart"}),e.jsx(w,{})]})}):e.jsxs("div",{className:"min-h-[60vh] mt-30",children:[e.jsx("div",{className:"sticky top-30 z-10 ",children:e.jsx(y,{})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx(m,{title:"Shopping Cart"}),r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 mt-20",children:[e.jsx(I,{size:60,className:"text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"Your cart is empty"}),e.jsx("button",{onClick:()=>o("/jewellery"),className:"btn-black",children:"Continue Shopping"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:r.map((s,t)=>e.jsxs("div",{className:"flex border-b py-4 space-x-4",children:[e.jsx("img",{src:s.heroImage||"/placeholder.webp",alt:s.name||"Product",className:"w-24 h-24 object-cover"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h3",{className:"font-medium",children:s.name||"Product Name"}),e.jsxs("p",{className:"text-[1.0625rem] text-gray-500",children:["SKU: ",s.variantSku||"N/A"]}),s.color&&e.jsxs("p",{className:"text-[1.0625rem] text-gray-500",children:["Color: ",s.color]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("select",{value:s.quantity,onChange:a=>p(s._id,Number(a.target.value)),className:"border p-1",disabled:n,children:[1,2,3,4,5].map(a=>e.jsx("option",{value:a,children:a},`${s._id}-qty-${a}`))}),e.jsx("button",{onClick:()=>u(s._id),className:"text-red-500 hover:text-red-700",disabled:n,children:e.jsx(k,{size:20})})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold",children:["₹",(s.unitPrice||0).toLocaleString()]})})]},s._id||`cart-item-${t}`))}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"border p-6 space-y-4 sticky top-24",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Order Summary"}),e.jsx("div",{className:"space-y-2",children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:h(l)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Delivery"}),e.jsx("span",{children:"Free"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"COD Charge"}),e.jsx("span",{children:"—"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Discount"}),e.jsx("span",{children:"—"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax"}),e.jsx("span",{children:"—"})]}),e.jsxs("div",{className:"border-t pt-2 font-semibold flex justify-between",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:h(l)})]})]})}),e.jsx("button",{onClick:()=>o("/checkout"),className:"w-full bg-black text-white py-3 hover:bg-gray-800 transition",children:"Proceed to Checkout"})]})})]})]})]})};export{B as default};
